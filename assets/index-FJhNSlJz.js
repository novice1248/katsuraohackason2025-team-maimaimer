(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Iw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Im={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function Cw(){if(Jv)return Ql;Jv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var eE;function Dw(){return eE||(eE=1,Im.exports=Cw()),Im.exports}var R=Dw(),Cm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function Nw(){if(tE)return Ne;tE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,F={};function H(D,$,ae){this.props=D,this.context=$,this.refs=F,this.updater=ae||x}H.prototype.isReactComponent={},H.prototype.setState=function(D,$){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,$,"setState")},H.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ne(){}ne.prototype=H.prototype;function se(D,$,ae){this.props=D,this.context=$,this.refs=F,this.updater=ae||x}var ie=se.prototype=new ne;ie.constructor=se,z(ie,H.prototype),ie.isPureReactComponent=!0;var he=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function O(D,$,ae,re,ge,Ie){return ae=Ie.ref,{$$typeof:i,type:D,key:$,ref:ae!==void 0?ae:null,props:Ie}}function w(D,$){return O(D.type,$,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function V(D){var $={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return $[ae]})}var M=/\/+/g;function P(D,$){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):$.toString(36)}function C(){}function Ke(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function($){D.status==="pending"&&(D.status="fulfilled",D.value=$)},function($){D.status==="pending"&&(D.status="rejected",D.reason=$)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function oe(D,$,ae,re,ge){var Ie=typeof D;(Ie==="undefined"||Ie==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(Ie){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case i:case e:ye=!0;break;case _:return ye=D._init,oe(ye(D._payload),$,ae,re,ge)}}if(ye)return ge=ge(D),ye=re===""?"."+P(D,0):re,he(ge)?(ae="",ye!=null&&(ae=ye.replace(M,"$&/")+"/"),oe(ge,$,ae,"",function(Rt){return Rt})):ge!=null&&(I(ge)&&(ge=w(ge,ae+(ge.key==null||D&&D.key===ge.key?"":(""+ge.key).replace(M,"$&/")+"/")+ye)),$.push(ge)),1;ye=0;var mt=re===""?".":re+":";if(he(D))for(var ze=0;ze<D.length;ze++)re=D[ze],Ie=mt+P(re,ze),ye+=oe(re,$,ae,Ie,ge);else if(ze=A(D),typeof ze=="function")for(D=ze.call(D),ze=0;!(re=D.next()).done;)re=re.value,Ie=mt+P(re,ze++),ye+=oe(re,$,ae,Ie,ge);else if(Ie==="object"){if(typeof D.then=="function")return oe(Ke(D),$,ae,re,ge);throw $=String(D),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ye}function K(D,$,ae){if(D==null)return D;var re=[],ge=0;return oe(D,re,"","",function(Ie){return $.call(ae,Ie,ge++)}),re}function te(D){if(D._status===-1){var $=D._result;$=$(),$.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=$)}if(D._status===1)return D._result.default;throw D._result}var ce=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ee(){}return Ne.Children={map:K,forEach:function(D,$,ae){K(D,function(){$.apply(this,arguments)},ae)},count:function(D){var $=0;return K(D,function(){$++}),$},toArray:function(D){return K(D,function($){return $})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ne.Component=H,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=se,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ue.H.useMemoCache(D)}},Ne.cache=function(D){return function(){return D.apply(null,arguments)}},Ne.cloneElement=function(D,$,ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var re=z({},D.props),ge=D.key,Ie=void 0;if($!=null)for(ye in $.ref!==void 0&&(Ie=void 0),$.key!==void 0&&(ge=""+$.key),$)!me.call($,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&$.ref===void 0||(re[ye]=$[ye]);var ye=arguments.length-2;if(ye===1)re.children=ae;else if(1<ye){for(var mt=Array(ye),ze=0;ze<ye;ze++)mt[ze]=arguments[ze+2];re.children=mt}return O(D.type,ge,void 0,void 0,Ie,re)},Ne.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ne.createElement=function(D,$,ae){var re,ge={},Ie=null;if($!=null)for(re in $.key!==void 0&&(Ie=""+$.key),$)me.call($,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ge[re]=$[re]);var ye=arguments.length-2;if(ye===1)ge.children=ae;else if(1<ye){for(var mt=Array(ye),ze=0;ze<ye;ze++)mt[ze]=arguments[ze+2];ge.children=mt}if(D&&D.defaultProps)for(re in ye=D.defaultProps,ye)ge[re]===void 0&&(ge[re]=ye[re]);return O(D,Ie,void 0,void 0,null,ge)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(D){return{$$typeof:m,render:D}},Ne.isValidElement=I,Ne.lazy=function(D){return{$$typeof:_,_payload:{_status:-1,_result:D},_init:te}},Ne.memo=function(D,$){return{$$typeof:p,type:D,compare:$===void 0?null:$}},Ne.startTransition=function(D){var $=ue.T,ae={};ue.T=ae;try{var re=D(),ge=ue.S;ge!==null&&ge(ae,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Ee,ce)}catch(Ie){ce(Ie)}finally{ue.T=$}},Ne.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ne.use=function(D){return ue.H.use(D)},Ne.useActionState=function(D,$,ae){return ue.H.useActionState(D,$,ae)},Ne.useCallback=function(D,$){return ue.H.useCallback(D,$)},Ne.useContext=function(D){return ue.H.useContext(D)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(D,$){return ue.H.useDeferredValue(D,$)},Ne.useEffect=function(D,$,ae){var re=ue.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(D,$)},Ne.useId=function(){return ue.H.useId()},Ne.useImperativeHandle=function(D,$,ae){return ue.H.useImperativeHandle(D,$,ae)},Ne.useInsertionEffect=function(D,$){return ue.H.useInsertionEffect(D,$)},Ne.useLayoutEffect=function(D,$){return ue.H.useLayoutEffect(D,$)},Ne.useMemo=function(D,$){return ue.H.useMemo(D,$)},Ne.useOptimistic=function(D,$){return ue.H.useOptimistic(D,$)},Ne.useReducer=function(D,$,ae){return ue.H.useReducer(D,$,ae)},Ne.useRef=function(D){return ue.H.useRef(D)},Ne.useState=function(D){return ue.H.useState(D)},Ne.useSyncExternalStore=function(D,$,ae){return ue.H.useSyncExternalStore(D,$,ae)},Ne.useTransition=function(){return ue.H.useTransition()},Ne.version="19.1.1",Ne}var nE;function Dp(){return nE||(nE=1,Cm.exports=Nw()),Cm.exports}var U=Dp();const An=Iw(U);var Dm={exports:{}},Xl={},Nm={exports:{}},xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function xw(){return iE||(iE=1,(function(i){function e(K,te){var ce=K.length;K.push(te);e:for(;0<ce;){var Ee=ce-1>>>1,D=K[Ee];if(0<o(D,te))K[Ee]=te,K[ce]=D,ce=Ee;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var te=K[0],ce=K.pop();if(ce!==te){K[0]=ce;e:for(var Ee=0,D=K.length,$=D>>>1;Ee<$;){var ae=2*(Ee+1)-1,re=K[ae],ge=ae+1,Ie=K[ge];if(0>o(re,ce))ge<D&&0>o(Ie,re)?(K[Ee]=Ie,K[ge]=ce,Ee=ge):(K[Ee]=re,K[ae]=ce,Ee=ae);else if(ge<D&&0>o(Ie,ce))K[Ee]=Ie,K[ge]=ce,Ee=ge;else break e}}return te}function o(K,te){var ce=K.sortIndex-te.sortIndex;return ce!==0?ce:K.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],p=[],_=1,T=null,A=3,x=!1,z=!1,F=!1,H=!1,ne=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function he(K){for(var te=n(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=K)s(p),te.sortIndex=te.expirationTime,e(g,te);else break;te=n(p)}}function ue(K){if(F=!1,he(K),!z)if(n(g)!==null)z=!0,me||(me=!0,P());else{var te=n(p);te!==null&&oe(ue,te.startTime-K)}}var me=!1,O=-1,w=5,I=-1;function V(){return H?!0:!(i.unstable_now()-I<w)}function M(){if(H=!1,me){var K=i.unstable_now();I=K;var te=!0;try{e:{z=!1,F&&(F=!1,se(O),O=-1),x=!0;var ce=A;try{t:{for(he(K),T=n(g);T!==null&&!(T.expirationTime>K&&V());){var Ee=T.callback;if(typeof Ee=="function"){T.callback=null,A=T.priorityLevel;var D=Ee(T.expirationTime<=K);if(K=i.unstable_now(),typeof D=="function"){T.callback=D,he(K),te=!0;break t}T===n(g)&&s(g),he(K)}else s(g);T=n(g)}if(T!==null)te=!0;else{var $=n(p);$!==null&&oe(ue,$.startTime-K),te=!1}}break e}finally{T=null,A=ce,x=!1}te=void 0}}finally{te?P():me=!1}}}var P;if(typeof ie=="function")P=function(){ie(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ke=C.port2;C.port1.onmessage=M,P=function(){Ke.postMessage(null)}}else P=function(){ne(M,0)};function oe(K,te){O=ne(function(){K(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(K){switch(A){case 1:case 2:case 3:var te=3;break;default:te=A}var ce=A;A=te;try{return K()}finally{A=ce}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ce=A;A=K;try{return te()}finally{A=ce}},i.unstable_scheduleCallback=function(K,te,ce){var Ee=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ee+ce:Ee):ce=Ee,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ce+D,K={id:_++,callback:te,priorityLevel:K,startTime:ce,expirationTime:D,sortIndex:-1},ce>Ee?(K.sortIndex=ce,e(p,K),n(g)===null&&K===n(p)&&(F?(se(O),O=-1):F=!0,oe(ue,ce-Ee))):(K.sortIndex=D,e(g,K),z||x||(z=!0,me||(me=!0,P()))),K},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(K){var te=A;return function(){var ce=A;A=te;try{return K.apply(this,arguments)}finally{A=ce}}}})(xm)),xm}var rE;function Ow(){return rE||(rE=1,Nm.exports=xw()),Nm.exports}var Om={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function Mw(){if(sE)return hn;sE=1;var i=Dp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,hn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(g,p,null,_)},hn.flushSync=function(g){var p=f.T,_=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=p,s.p=_,s.d.f()}},hn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},hn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},hn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,T=m(_,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:x}):_==="script"&&s.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=m(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},hn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=m(_,p.crossOrigin);s.d.L(g,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=m(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},hn.requestFormReset=function(g){s.d.r(g)},hn.unstable_batchedUpdates=function(g,p){return g(p)},hn.useFormState=function(g,p,_){return f.H.useFormState(g,p,_)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.1.1",hn}var aE;function ab(){if(aE)return Om.exports;aE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Om.exports=Mw(),Om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function Vw(){if(oE)return Xl;oE=1;var i=Ow(),e=Dp(),n=ab();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,b=h.child;b;){if(b===a){E=!0,a=h,l=d;break}if(b===l){E=!0,l=h,a=d;break}b=b.sibling}if(!E){for(b=d.child;b;){if(b===a){E=!0,a=d,l=h;break}if(b===l){E=!0,l=d,a=h;break}b=b.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function p(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=p(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case H:return"Profiler";case F:return"StrictMode";case ue:return"Suspense";case me:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case ie:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case he:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return r=t.displayName||null,r!==null?r:Ke(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return Ke(t(r))}catch{}}return null}var oe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ee=[],D=-1;function $(t){return{current:t}}function ae(t){0>D||(t.current=Ee[D],Ee[D]=null,D--)}function re(t,r){D++,Ee[D]=t.current,t.current=r}var ge=$(null),Ie=$(null),ye=$(null),mt=$(null);function ze(t,r){switch(re(ye,r),re(Ie,t),re(ge,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Iv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Iv(r),t=Cv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(ge),re(ge,t)}function Rt(){ae(ge),ae(Ie),ae(ye)}function Me(t){t.memoizedState!==null&&re(mt,t);var r=ge.current,a=Cv(r,t.type);r!==a&&(re(Ie,t),re(ge,a))}function gn(t){Ie.current===t&&(ae(ge),ae(Ie)),mt.current===t&&(ae(mt),Hl._currentValue=ce)}var Gt=Object.prototype.hasOwnProperty,wn=i.unstable_scheduleCallback,Jt=i.unstable_cancelCallback,Kn=i.unstable_shouldYield,ui=i.unstable_requestPaint,yn=i.unstable_now,Ra=i.unstable_getCurrentPriorityLevel,$i=i.unstable_ImmediatePriority,_n=i.unstable_UserBlockingPriority,Yn=i.unstable_NormalPriority,Pr=i.unstable_LowPriority,Wi=i.unstable_IdlePriority,Lr=i.log,Ia=i.unstable_setDisableYieldValue,ht=null,Pe=null;function It(t){if(typeof Lr=="function"&&Ia(t),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(ht,t)}catch{}}var yt=Math.clz32?Math.clz32:Si,Os=Math.log,Qn=Math.LN2;function Si(t){return t>>>=0,t===0?32:31-(Os(t)/Qn|0)|0}var Zi=256,Ji=4194304;function vn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function er(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=vn(l):(E&=b,E!==0?h=vn(E):a||(a=b&~t,a!==0&&(h=vn(a))))):(b=l&~d,b!==0?h=vn(b):E!==0?h=vn(E):a||(a=l&~t,a!==0&&(h=vn(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function tr(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ur(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ms(){var t=Zi;return Zi<<=1,(Zi&4194048)===0&&(Zi=256),t}function Vs(){var t=Ji;return Ji<<=1,(Ji&62914560)===0&&(Ji=4194304),t}function ci(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function at(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Lt(t,r,a,l,h,d){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,q=t.hiddenUpdates;for(a=E&~a;0<a;){var X=31-yt(a),J=1<<X;b[X]=0,N[X]=-1;var G=q[X];if(G!==null)for(q[X]=null,X=0;X<G.length;X++){var Y=G[X];Y!==null&&(Y.lane&=-536870913)}a&=~J}l!==0&&ft(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~r))}function ft(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-yt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Rn(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-yt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function Tt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ct(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ut(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:Yv(t.type))}function hi(t,r){var a=te.p;try{return te.p=t,r()}finally{te.p=a}}var De=Math.random().toString(36).slice(2),et="__reactFiber$"+De,Qe="__reactProps$"+De,_t="__reactContainer$"+De,fi="__reactEvents$"+De,nr="__reactListeners$"+De,en="__reactHandles$"+De,Ai="__reactResources$"+De,di="__reactMarker$"+De;function jr(t){delete t[et],delete t[Qe],delete t[fi],delete t[nr],delete t[en]}function ir(t){var r=t[et];if(r)return r;for(var a=t.parentNode;a;){if(r=a[_t]||a[et]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=Ov(t);t!==null;){if(a=t[et])return a;t=Ov(t)}return r}t=a,a=t.parentNode}return null}function wi(t){if(t=t[et]||t[_t]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ri(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function En(t){var r=t[Ai];return r||(r=t[Ai]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function bt(t){t[di]=!0}var Xo=new Set,Ca={};function mi(t,r){rr(t,r),rr(t+"Capture",r)}function rr(t,r){for(Ca[t]=r,t=0;t<r.length;t++)Xo.add(r[t])}var Ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yu={},ks={};function Qu(t){return Gt.call(ks,t)?!0:Gt.call(Yu,t)?!1:Ku.test(t)?ks[t]=!0:(Yu[t]=!0,!1)}function zr(t,r,a){if(Qu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Ii(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function tn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ps,Xu;function sr(t){if(Ps===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ps=r&&r[1]||"",Xu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ps+t+Xu}var Da=!1;function Na(t,r){if(!t||Da)return"";Da=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Y){var G=Y}Reflect.construct(t,[],J)}else{try{J.call()}catch(Y){G=Y}t.call(J.prototype)}}else{try{throw Error()}catch(Y){G=Y}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],b=d[1];if(E&&b){var N=E.split(`
`),q=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===q.length)for(l=N.length-1,h=q.length-1;1<=l&&0<=h&&N[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==q[h]){var X=`
`+N[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Da=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?sr(a):""}function $o(t){switch(t.tag){case 26:case 27:case 5:return sr(t.type);case 16:return sr("Lazy");case 13:return sr("Suspense");case 19:return sr("SuspenseList");case 0:case 15:return Na(t.type,!1);case 11:return Na(t.type.render,!1);case 1:return Na(t.type,!0);case 31:return sr("Activity");default:return""}}function xa(t){try{var r="";do r+=$o(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function xf(t){var r=Wo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Oa(t){t._valueTracker||(t._valueTracker=xf(t))}function Zo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Wo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ls(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Of=/[\n"\\]/g;function Dt(t){return t.replace(Of,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Pn(t,r,a,l,h,d,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Tn(r)):t.value!==""+Tn(r)&&(t.value=""+Tn(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?Br(t,E,Tn(r)):a!=null?Br(t,E,Tn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Tn(b):t.removeAttribute("name")}function Us(t,r,a,l,h,d,E,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+Tn(a):"",r=r!=null?""+Tn(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function Br(t,r,a){r==="number"&&Ls(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ar(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Tn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function tt(t,r,a){if(r!=null&&(r=""+Tn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Tn(a):""}function js(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Tn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Xn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $u(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||zs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Jo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&$u(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&$u(t,d,r[d])}function el(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(t){return Vf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var or=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lr=null,ur=null;function tl(t){var r=wi(t);if(r&&(t=r.stateNode)){var a=t[Qe]||null;e:switch(t=r.stateNode,r.type){case"input":if(Pn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Qe]||null;if(!h)throw Error(s(90));Pn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Zo(l)}break e;case"textarea":tt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ar(t,!!a.multiple,r,!1)}}}var Ci=!1;function Wu(t,r,a){if(Ci)return t(r,a);Ci=!0;try{var l=t(r);return l}finally{if(Ci=!1,(lr!==null||ur!==null)&&(Fc(),lr&&(r=lr,t=ur,ur=lr=null,tl(r),t)))for(r=0;r<t.length;r++)tl(t[r])}}function Bs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Qe]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wn=!1;if(pi)try{var qs={};Object.defineProperty(qs,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",qs,qs),window.removeEventListener("test",qs,qs)}catch{Wn=!1}var Di=null,qr=null,cr=null;function nl(){if(cr)return cr;var t,r=qr,a=r.length,l,h="value"in Di?Di.value:Di.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[d-l];l++);return cr=h.slice(t,1<l?1-l:void 0)}function Ni(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function xi(){return!0}function il(){return!1}function Kt(t){function r(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?xi:il,this.isPropagationStopped=il,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),r}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Va=Kt($e),Hs=_({},$e,{view:0,detail:0}),Zu=Kt(Hs),ka,Pa,Oi,Fs=_({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(ka=t.screenX-Oi.screenX,Pa=t.screenY-Oi.screenY):Pa=ka=0,Oi=t),ka)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),Zn=Kt(Fs),Ju=_({},Fs,{dataTransfer:0}),kf=Kt(Ju),Gs=_({},Hs,{relatedTarget:0}),La=Kt(Gs),rl=_({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=Kt(rl),ec=_({},$e,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ja=Kt(ec),Pf=_({},$e,{data:0}),sl=Kt(Pf),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=nc[t])?!!r[t]:!1}function Ys(){return al}var ic=_({},Hs,{key:function(t){if(t.key){var r=Ks[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(t){return t.type==="keypress"?Ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),za=Kt(ic),rc=_({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=Kt(rc),hr=_({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),sc=Kt(hr),ac=_({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),oc=Kt(ac),lc=_({},Fs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ba=Kt(lc),bn=_({},$e,{newState:0,oldState:0}),uc=Kt(bn),cc=[9,13,27,32],Mi=pi&&"CompositionEvent"in window,c=null;pi&&"documentMode"in document&&(c=document.documentMode);var y=pi&&"TextEvent"in window&&!c,v=pi&&(!Mi||c&&8<c&&11>=c),S=" ",j=!1;function Q(t,r){switch(t){case"keyup":return cc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qe=!1;function jt(t,r){switch(t){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(j=!0,S);case"textInput":return t=r.data,t===S&&j?null:t;default:return null}}function He(t,r){if(qe)return t==="compositionend"||!Mi&&Q(t,r)?(t=nl(),cr=qr=Di=null,qe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Yt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Yt[t.type]:r==="textarea"}function fr(t,r,a,l){lr?ur?ur.push(l):ur=[l]:lr=l,r=$c(r,"onChange"),0<r.length&&(a=new Va("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var nn=null,Vi=null;function ll(t){bv(t,0)}function hc(t){var r=Ri(t);if(Zo(r))return t}function Hg(t,r){if(t==="change")return r}var Fg=!1;if(pi){var Lf;if(pi){var Uf="oninput"in document;if(!Uf){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),Uf=typeof Gg.oninput=="function"}Lf=Uf}else Lf=!1;Fg=Lf&&(!document.documentMode||9<document.documentMode)}function Kg(){nn&&(nn.detachEvent("onpropertychange",Yg),Vi=nn=null)}function Yg(t){if(t.propertyName==="value"&&hc(Vi)){var r=[];fr(r,Vi,t,$n(t)),Wu(ll,r)}}function iA(t,r,a){t==="focusin"?(Kg(),nn=r,Vi=a,nn.attachEvent("onpropertychange",Yg)):t==="focusout"&&Kg()}function rA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hc(Vi)}function sA(t,r){if(t==="click")return hc(r)}function aA(t,r){if(t==="input"||t==="change")return hc(r)}function oA(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ln=typeof Object.is=="function"?Object.is:oA;function ul(t,r){if(Ln(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Gt.call(r,h)||!Ln(t[h],r[h]))return!1}return!0}function Qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,r){var a=Qg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qg(a)}}function $g(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?$g(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Wg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ls(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ls(t.document)}return r}function jf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var lA=pi&&"documentMode"in document&&11>=document.documentMode,qa=null,zf=null,cl=null,Bf=!1;function Zg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bf||qa==null||qa!==Ls(l)||(l=qa,"selectionStart"in l&&jf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ul(cl,l)||(cl=l,l=$c(zf,"onSelect"),0<l.length&&(r=new Va("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=qa)))}function Qs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ha={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},qf={},Jg={};pi&&(Jg=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function Xs(t){if(qf[t])return qf[t];if(!Ha[t])return t;var r=Ha[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Jg)return qf[t]=r[a];return t}var ey=Xs("animationend"),ty=Xs("animationiteration"),ny=Xs("animationstart"),uA=Xs("transitionrun"),cA=Xs("transitionstart"),hA=Xs("transitioncancel"),iy=Xs("transitionend"),ry=new Map,Hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hf.push("scrollEnd");function gi(t,r){ry.set(t,r),mi(r,[t])}var sy=new WeakMap;function Jn(t,r){if(typeof t=="object"&&t!==null){var a=sy.get(t);return a!==void 0?a:(r={value:t,source:r,stack:xa(r)},sy.set(t,r),r)}return{value:t,source:r,stack:xa(r)}}var ei=[],Fa=0,Ff=0;function fc(){for(var t=Fa,r=Ff=Fa=0;r<t;){var a=ei[r];ei[r++]=null;var l=ei[r];ei[r++]=null;var h=ei[r];ei[r++]=null;var d=ei[r];if(ei[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&ay(a,h,d)}}function dc(t,r,a,l){ei[Fa++]=t,ei[Fa++]=r,ei[Fa++]=a,ei[Fa++]=l,Ff|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Gf(t,r,a,l){return dc(t,r,a,l),mc(t)}function Ga(t,r){return dc(t,null,null,r),mc(t)}function ay(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-yt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function mc(t){if(50<kl)throw kl=0,Wd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ka={};function fA(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,r,a,l){return new fA(t,r,a,l)}function Kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dr(t,r){var a=t.alternate;return a===null?(a=Un(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function oy(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function pc(t,r,a,l,h,d){var E=0;if(l=t,typeof t=="function")Kf(t)&&(E=1);else if(typeof t=="string")E=mw(t,a,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Un(31,a,r,h),t.elementType=I,t.lanes=d,t;case z:return $s(a.children,h,d,r);case F:E=8,h|=24;break;case H:return t=Un(12,a,r,h|2),t.elementType=H,t.lanes=d,t;case ue:return t=Un(13,a,r,h),t.elementType=ue,t.lanes=d,t;case me:return t=Un(19,a,r,h),t.elementType=me,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:case ie:E=10;break e;case se:E=9;break e;case he:E=11;break e;case O:E=14;break e;case w:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Un(E,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function $s(t,r,a,l){return t=Un(7,t,l,r),t.lanes=a,t}function Yf(t,r,a){return t=Un(6,t,null,r),t.lanes=a,t}function Qf(t,r,a){return r=Un(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ya=[],Qa=0,gc=null,yc=0,ti=[],ni=0,Ws=null,mr=1,pr="";function Zs(t,r){Ya[Qa++]=yc,Ya[Qa++]=gc,gc=t,yc=r}function ly(t,r,a){ti[ni++]=mr,ti[ni++]=pr,ti[ni++]=Ws,Ws=t;var l=mr;t=pr;var h=32-yt(l)-1;l&=~(1<<h),a+=1;var d=32-yt(r)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,mr=1<<32-yt(r)+h|a<<h|l,pr=d+t}else mr=1<<d|a<<h|l,pr=t}function Xf(t){t.return!==null&&(Zs(t,1),ly(t,1,0))}function $f(t){for(;t===gc;)gc=Ya[--Qa],Ya[Qa]=null,yc=Ya[--Qa],Ya[Qa]=null;for(;t===Ws;)Ws=ti[--ni],ti[ni]=null,pr=ti[--ni],ti[ni]=null,mr=ti[--ni],ti[ni]=null}var Sn=null,vt=null,Xe=!1,Js=null,ki=!1,Wf=Error(s(519));function ea(t){var r=Error(s(418,""));throw dl(Jn(r,t)),Wf}function uy(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[et]=t,r[Qe]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)ke(Ll[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),Us(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Oa(r);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),js(r,l.value,l.defaultValue,l.children),Oa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Rv(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=Wc),r=!0):r=!1,r||ea(t)}function cy(t){for(Sn=t.return;Sn;)switch(Sn.tag){case 5:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:Sn=Sn.return}}function hl(t){if(t!==Sn)return!1;if(!Xe)return cy(t),Xe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||dm(t.type,t.memoizedProps)),a=!a),a&&vt&&ea(t),cy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){vt=_i(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}vt=null}}else r===27?(r=vt,rs(t.type)?(t=ym,ym=null,vt=t):vt=r):vt=Sn?_i(t.stateNode.nextSibling):null;return!0}function fl(){vt=Sn=null,Xe=!1}function hy(){var t=Js;return t!==null&&(Dn===null?Dn=t:Dn.push.apply(Dn,t),Js=null),t}function dl(t){Js===null?Js=[t]:Js.push(t)}var Zf=$(null),ta=null,gr=null;function Hr(t,r,a){re(Zf,r._currentValue),r._currentValue=a}function yr(t){t._currentValue=Zf.current,ae(Zf)}function Jf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function ed(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<r.length;N++)if(b.context===r[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Jf(d.return,a,t),l||(E=null);break e}d=b.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Jf(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function ml(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var b=h.type;Ln(h.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(h===mt.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}h=h.return}t!==null&&ed(r,t,a,l),r.flags|=262144}function _c(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function na(t){ta=t,gr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function cn(t){return fy(ta,t)}function vc(t,r){return ta===null&&na(t),fy(t,r)}function fy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},gr===null){if(t===null)throw Error(s(308));gr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else gr=gr.next=r;return a}var dA=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},mA=i.unstable_scheduleCallback,pA=i.unstable_NormalPriority,Bt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function td(){return{controller:new dA,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&mA(pA,function(){t.controller.abort()})}var gl=null,nd=0,Xa=0,$a=null;function gA(t,r){if(gl===null){var a=gl=[];nd=0,Xa=rm(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return nd++,r.then(dy,dy),r}function dy(){if(--nd===0&&gl!==null){$a!==null&&($a.status="fulfilled");var t=gl;gl=null,Xa=0,$a=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function yA(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var my=K.S;K.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&gA(t,r),my!==null&&my(t,r)};var ia=$(null);function id(){var t=ia.current;return t!==null?t:ot.pooledCache}function Ec(t,r){r===null?re(ia,ia.current):re(ia,r.pool)}function py(){var t=id();return t===null?null:{parent:Bt._currentValue,pool:t}}var yl=Error(s(460)),gy=Error(s(474)),Tc=Error(s(542)),rd={then:function(){}};function yy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bc(){}function _y(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(bc,bc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ey(t),t;default:if(typeof r.status=="string")r.then(bc,bc);else{if(t=ot,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ey(t),t}throw _l=r,yl}}var _l=null;function vy(){if(_l===null)throw Error(s(459));var t=_l;return _l=null,t}function Ey(t){if(t===yl||t===Tc)throw Error(s(483))}var Fr=!1;function sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Kr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=mc(t),ay(t,null,a),r}return dc(t,l,r,a),mc(t)}function vl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Rn(t,a)}}function od(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ld=!1;function El(){if(ld){var t=$a;if(t!==null)throw t}}function Tl(t,r,a,l){ld=!1;var h=t.updateQueue;Fr=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,q=N.next;N.next=null,E===null?d=q:E.next=q,E=N;var X=t.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==E&&(b===null?X.firstBaseUpdate=q:b.next=q,X.lastBaseUpdate=N))}if(d!==null){var J=h.baseState;E=0,X=q=N=null,b=d;do{var G=b.lane&-536870913,Y=G!==b.lane;if(Y?(Fe&G)===G:(l&G)===G){G!==0&&G===Xa&&(ld=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var we=t,Te=b;G=r;var rt=a;switch(Te.tag){case 1:if(we=Te.payload,typeof we=="function"){J=we.call(rt,J,G);break e}J=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Te.payload,G=typeof we=="function"?we.call(rt,J,G):we,G==null)break e;J=_({},J,G);break e;case 2:Fr=!0}}G=b.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(q=X=Y,N=J):X=X.next=Y,E|=G;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);X===null&&(N=J),h.baseState=N,h.firstBaseUpdate=q,h.lastBaseUpdate=X,d===null&&(h.shared.lanes=0),es|=E,t.lanes=E,t.memoizedState=J}}function Ty(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function by(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Ty(a[t],r)}var Wa=$(null),Sc=$(0);function Sy(t,r){t=Ar,re(Sc,t),re(Wa,r),Ar=t|r.baseLanes}function ud(){re(Sc,Ar),re(Wa,Wa.current)}function cd(){Ar=Sc.current,ae(Wa),ae(Sc)}var Yr=0,xe=null,nt=null,Nt=null,Ac=!1,Za=!1,ra=!1,wc=0,bl=0,Ja=null,_A=0;function St(){throw Error(s(321))}function hd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Ln(t[a],r[a]))return!1;return!0}function fd(t,r,a,l,h,d){return Yr=d,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=t===null||t.memoizedState===null?a_:o_,ra=!1,d=a(l,h),ra=!1,Za&&(d=wy(r,a,l,h)),Ay(t),d}function Ay(t){K.H=xc;var r=nt!==null&&nt.next!==null;if(Yr=0,Nt=nt=xe=null,Ac=!1,bl=0,Ja=null,r)throw Error(s(300));t===null||Qt||(t=t.dependencies,t!==null&&_c(t)&&(Qt=!0))}function wy(t,r,a,l){xe=t;var h=0;do{if(Za&&(Ja=null),bl=0,Za=!1,25<=h)throw Error(s(301));if(h+=1,Nt=nt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=wA,d=r(a,l)}while(Za);return d}function vA(){var t=K.H,r=t.useState()[0];return r=typeof r.then=="function"?Sl(r):r,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(xe.flags|=1024),r}function dd(){var t=wc!==0;return wc=0,t}function md(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function pd(t){if(Ac){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Ac=!1}Yr=0,Nt=nt=xe=null,Za=!1,bl=wc=0,Ja=null}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function xt(){if(nt===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var r=Nt===null?xe.memoizedState:Nt.next;if(r!==null)Nt=r,nt=t;else{if(t===null)throw xe.alternate===null?Error(s(467)):Error(s(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?xe.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(t){var r=bl;return bl+=1,Ja===null&&(Ja=[]),t=_y(Ja,t,r),r=xe,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?a_:o_),t}function Rc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sl(t);if(t.$$typeof===ie)return cn(t)}throw Error(s(438,String(t)))}function yd(t){var r=null,a=xe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=gd(),xe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=V;return r.index++,a}function _r(t,r){return typeof r=="function"?r(t):r}function Ic(t){var r=xt();return _d(r,nt,t)}function _d(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var b=E=null,N=null,q=r,X=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(Fe&J)===J:(Yr&J)===J){var G=q.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===Xa&&(X=!0);else if((Yr&G)===G){q=q.next,G===Xa&&(X=!0);continue}else J={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=J,E=d):N=N.next=J,xe.lanes|=G,es|=G;J=q.action,ra&&a(d,J),d=q.hasEagerState?q.eagerState:a(d,J)}else G={lane:J,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=G,E=d):N=N.next=G,xe.lanes|=J,es|=J;q=q.next}while(q!==null&&q!==r);if(N===null?E=d:N.next=b,!Ln(d,t.memoizedState)&&(Qt=!0,X&&(a=$a,a!==null)))throw a;t.memoizedState=d,t.baseState=E,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function vd(t){var r=xt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=t(d,E.action),E=E.next;while(E!==h);Ln(d,r.memoizedState)||(Qt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function Ry(t,r,a){var l=xe,h=xt(),d=Xe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!Ln((nt||h).memoizedState,a);E&&(h.memoizedState=a,Qt=!0),h=h.queue;var b=Dy.bind(null,l,h,t);if(Al(2048,8,b,[t]),h.getSnapshot!==r||E||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,eo(9,Cc(),Cy.bind(null,l,h,a,r),null),ot===null)throw Error(s(349));d||(Yr&124)!==0||Iy(l,r,a)}return a}function Iy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=xe.updateQueue,r===null?(r=gd(),xe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Cy(t,r,a,l){r.value=a,r.getSnapshot=l,Ny(r)&&xy(t)}function Dy(t,r,a){return a(function(){Ny(r)&&xy(t)})}function Ny(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Ln(t,a)}catch{return!0}}function xy(t){var r=Ga(t,2);r!==null&&Hn(r,t,2)}function Ed(t){var r=In();if(typeof t=="function"){var a=t;if(t=a(),ra){It(!0);try{a()}finally{It(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:t},r}function Oy(t,r,a,l){return t.baseState=a,_d(t,nt,typeof l=="function"?l:_r)}function EA(t,r,a,l,h){if(Nc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,My(r,d)):(d.next=a.next,r.pending=a.next=d)}}function My(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=K.T,E={};K.T=E;try{var b=a(h,l),N=K.S;N!==null&&N(E,b),Vy(t,r,b)}catch(q){Td(t,r,q)}finally{K.T=d}}else try{d=a(h,l),Vy(t,r,d)}catch(q){Td(t,r,q)}}function Vy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ky(t,r,l)},function(l){return Td(t,r,l)}):ky(t,r,a)}function ky(t,r,a){r.status="fulfilled",r.value=a,Py(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,My(t,a)))}function Td(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Py(r),r=r.next;while(r!==l)}t.action=null}function Py(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ly(t,r){return r}function Uy(t,r){if(Xe){var a=ot.formState;if(a!==null){e:{var l=xe;if(Xe){if(vt){t:{for(var h=vt,d=ki;h.nodeType!==8;){if(!d){h=null;break t}if(h=_i(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){vt=_i(h.nextSibling),l=h.data==="F!";break e}}ea(l)}l=!1}l&&(r=a[0])}}return a=In(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ly,lastRenderedState:r},a.queue=l,a=i_.bind(null,xe,l),l.dispatch=a,l=Ed(!1),d=Rd.bind(null,xe,!1,l.queue),l=In(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=EA.bind(null,xe,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function jy(t){var r=xt();return zy(r,nt,t)}function zy(t,r,a){if(r=_d(t,r,Ly)[0],t=Ic(_r)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Sl(r)}catch(E){throw E===yl?Tc:E}else l=r;r=xt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(xe.flags|=2048,eo(9,Cc(),TA.bind(null,h,a),null)),[l,d,t]}function TA(t,r){t.action=r}function By(t){var r=xt(),a=nt;if(a!==null)return zy(r,a,t);xt(),r=r.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function eo(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=xe.updateQueue,r===null&&(r=gd(),xe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Cc(){return{destroy:void 0,resource:void 0}}function qy(){return xt().memoizedState}function Dc(t,r,a,l){var h=In();l=l===void 0?null:l,xe.flags|=t,h.memoizedState=eo(1|r,Cc(),a,l)}function Al(t,r,a,l){var h=xt();l=l===void 0?null:l;var d=h.memoizedState.inst;nt!==null&&l!==null&&hd(l,nt.memoizedState.deps)?h.memoizedState=eo(r,d,a,l):(xe.flags|=t,h.memoizedState=eo(1|r,d,a,l))}function Hy(t,r){Dc(8390656,8,t,r)}function Fy(t,r){Al(2048,8,t,r)}function Gy(t,r){return Al(4,2,t,r)}function Ky(t,r){return Al(4,4,t,r)}function Yy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Qy(t,r,a){a=a!=null?a.concat([t]):null,Al(4,4,Yy.bind(null,r,t),a)}function bd(){}function Xy(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&hd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function $y(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&hd(r,l[1]))return l[0];if(l=t(),ra){It(!0);try{t()}finally{It(!1)}}return a.memoizedState=[l,r],l}function Sd(t,r,a){return a===void 0||(Yr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=J_(),xe.lanes|=t,es|=t,a)}function Wy(t,r,a,l){return Ln(a,r)?a:Wa.current!==null?(t=Sd(t,a,l),Ln(t,r)||(Qt=!0),t):(Yr&42)===0?(Qt=!0,t.memoizedState=a):(t=J_(),xe.lanes|=t,es|=t,r)}function Zy(t,r,a,l,h){var d=te.p;te.p=d!==0&&8>d?d:8;var E=K.T,b={};K.T=b,Rd(t,!1,r,a);try{var N=h(),q=K.S;if(q!==null&&q(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var X=yA(N,l);wl(t,r,X,qn(t))}else wl(t,r,l,qn(t))}catch(J){wl(t,r,{then:function(){},status:"rejected",reason:J},qn())}finally{te.p=d,K.T=E}}function bA(){}function Ad(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Jy(t).queue;Zy(t,h,r,ce,a===null?bA:function(){return e_(t),a(l)})}function Jy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function e_(t){var r=Jy(t).next.queue;wl(t,r,{},qn())}function wd(){return cn(Hl)}function t_(){return xt().memoizedState}function n_(){return xt().memoizedState}function SA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=qn();t=Gr(a);var l=Kr(r,t,a);l!==null&&(Hn(l,r,a),vl(l,r,a)),r={cache:td()},t.payload=r;return}r=r.return}}function AA(t,r,a){var l=qn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Nc(t)?r_(r,a):(a=Gf(t,r,a,l),a!==null&&(Hn(a,t,l),s_(a,r,l)))}function i_(t,r,a){var l=qn();wl(t,r,a,l)}function wl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nc(t))r_(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var E=r.lastRenderedState,b=d(E,a);if(h.hasEagerState=!0,h.eagerState=b,Ln(b,E))return dc(t,r,h,0),ot===null&&fc(),!1}catch{}finally{}if(a=Gf(t,r,h,l),a!==null)return Hn(a,t,l),s_(a,r,l),!0}return!1}function Rd(t,r,a,l){if(l={lane:2,revertLane:rm(),action:l,hasEagerState:!1,eagerState:null,next:null},Nc(t)){if(r)throw Error(s(479))}else r=Gf(t,a,l,2),r!==null&&Hn(r,t,2)}function Nc(t){var r=t.alternate;return t===xe||r!==null&&r===xe}function r_(t,r){Za=Ac=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function s_(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Rn(t,a)}}var xc={readContext:cn,use:Rc,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},a_={readContext:cn,use:Rc,useCallback:function(t,r){return In().memoizedState=[t,r===void 0?null:r],t},useContext:cn,useEffect:Hy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Dc(4194308,4,Yy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Dc(4194308,4,t,r)},useInsertionEffect:function(t,r){Dc(4,2,t,r)},useMemo:function(t,r){var a=In();r=r===void 0?null:r;var l=t();if(ra){It(!0);try{t()}finally{It(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=In();if(a!==void 0){var h=a(r);if(ra){It(!0);try{a(r)}finally{It(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=AA.bind(null,xe,t),[l.memoizedState,t]},useRef:function(t){var r=In();return t={current:t},r.memoizedState=t},useState:function(t){t=Ed(t);var r=t.queue,a=i_.bind(null,xe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:bd,useDeferredValue:function(t,r){var a=In();return Sd(a,t,r)},useTransition:function(){var t=Ed(!1);return t=Zy.bind(null,xe,t.queue,!0,!1),In().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=xe,h=In();if(Xe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ot===null)throw Error(s(349));(Fe&124)!==0||Iy(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Hy(Dy.bind(null,l,d,t),[t]),l.flags|=2048,eo(9,Cc(),Cy.bind(null,l,d,a,r),null),a},useId:function(){var t=In(),r=ot.identifierPrefix;if(Xe){var a=pr,l=mr;a=(l&~(1<<32-yt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=wc++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=_A++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:wd,useFormState:Uy,useActionState:Uy,useOptimistic:function(t){var r=In();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Rd.bind(null,xe,!0,a),a.dispatch=r,[t,r]},useMemoCache:yd,useCacheRefresh:function(){return In().memoizedState=SA.bind(null,xe)}},o_={readContext:cn,use:Rc,useCallback:Xy,useContext:cn,useEffect:Fy,useImperativeHandle:Qy,useInsertionEffect:Gy,useLayoutEffect:Ky,useMemo:$y,useReducer:Ic,useRef:qy,useState:function(){return Ic(_r)},useDebugValue:bd,useDeferredValue:function(t,r){var a=xt();return Wy(a,nt.memoizedState,t,r)},useTransition:function(){var t=Ic(_r)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:Sl(t),r]},useSyncExternalStore:Ry,useId:t_,useHostTransitionStatus:wd,useFormState:jy,useActionState:jy,useOptimistic:function(t,r){var a=xt();return Oy(a,nt,t,r)},useMemoCache:yd,useCacheRefresh:n_},wA={readContext:cn,use:Rc,useCallback:Xy,useContext:cn,useEffect:Fy,useImperativeHandle:Qy,useInsertionEffect:Gy,useLayoutEffect:Ky,useMemo:$y,useReducer:vd,useRef:qy,useState:function(){return vd(_r)},useDebugValue:bd,useDeferredValue:function(t,r){var a=xt();return nt===null?Sd(a,t,r):Wy(a,nt.memoizedState,t,r)},useTransition:function(){var t=vd(_r)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:Sl(t),r]},useSyncExternalStore:Ry,useId:t_,useHostTransitionStatus:wd,useFormState:By,useActionState:By,useOptimistic:function(t,r){var a=xt();return nt!==null?Oy(a,nt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:yd,useCacheRefresh:n_},to=null,Rl=0;function Oc(t){var r=Rl;return Rl+=1,to===null&&(to=[]),_y(to,t,r)}function Il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Mc(t,r){throw r.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function l_(t){var r=t._init;return r(t._payload)}function u_(t){function r(L,k){if(t){var B=L.deletions;B===null?(L.deletions=[k],L.flags|=16):B.push(k)}}function a(L,k){if(!t)return null;for(;k!==null;)r(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function h(L,k){return L=dr(L,k),L.index=0,L.sibling=null,L}function d(L,k,B){return L.index=B,t?(B=L.alternate,B!==null?(B=B.index,B<k?(L.flags|=67108866,k):B):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function E(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function b(L,k,B,W){return k===null||k.tag!==6?(k=Yf(B,L.mode,W),k.return=L,k):(k=h(k,B),k.return=L,k)}function N(L,k,B,W){var pe=B.type;return pe===z?X(L,k,B.props.children,W,B.key):k!==null&&(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&l_(pe)===k.type)?(k=h(k,B.props),Il(k,B),k.return=L,k):(k=pc(B.type,B.key,B.props,null,L.mode,W),Il(k,B),k.return=L,k)}function q(L,k,B,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==B.containerInfo||k.stateNode.implementation!==B.implementation?(k=Qf(B,L.mode,W),k.return=L,k):(k=h(k,B.children||[]),k.return=L,k)}function X(L,k,B,W,pe){return k===null||k.tag!==7?(k=$s(B,L.mode,W,pe),k.return=L,k):(k=h(k,B),k.return=L,k)}function J(L,k,B){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Yf(""+k,L.mode,B),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return B=pc(k.type,k.key,k.props,null,L.mode,B),Il(B,k),B.return=L,B;case x:return k=Qf(k,L.mode,B),k.return=L,k;case w:var W=k._init;return k=W(k._payload),J(L,k,B)}if(oe(k)||P(k))return k=$s(k,L.mode,B,null),k.return=L,k;if(typeof k.then=="function")return J(L,Oc(k),B);if(k.$$typeof===ie)return J(L,vc(L,k),B);Mc(L,k)}return null}function G(L,k,B,W){var pe=k!==null?k.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return pe!==null?null:b(L,k,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return B.key===pe?N(L,k,B,W):null;case x:return B.key===pe?q(L,k,B,W):null;case w:return pe=B._init,B=pe(B._payload),G(L,k,B,W)}if(oe(B)||P(B))return pe!==null?null:X(L,k,B,W,null);if(typeof B.then=="function")return G(L,k,Oc(B),W);if(B.$$typeof===ie)return G(L,k,vc(L,B),W);Mc(L,B)}return null}function Y(L,k,B,W,pe){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return L=L.get(B)||null,b(k,L,""+W,pe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return L=L.get(W.key===null?B:W.key)||null,N(k,L,W,pe);case x:return L=L.get(W.key===null?B:W.key)||null,q(k,L,W,pe);case w:var Oe=W._init;return W=Oe(W._payload),Y(L,k,B,W,pe)}if(oe(W)||P(W))return L=L.get(B)||null,X(k,L,W,pe,null);if(typeof W.then=="function")return Y(L,k,B,Oc(W),pe);if(W.$$typeof===ie)return Y(L,k,B,vc(k,W),pe);Mc(k,W)}return null}function we(L,k,B,W){for(var pe=null,Oe=null,_e=k,be=k=0,$t=null;_e!==null&&be<B.length;be++){_e.index>be?($t=_e,_e=null):$t=_e.sibling;var Ye=G(L,_e,B[be],W);if(Ye===null){_e===null&&(_e=$t);break}t&&_e&&Ye.alternate===null&&r(L,_e),k=d(Ye,k,be),Oe===null?pe=Ye:Oe.sibling=Ye,Oe=Ye,_e=$t}if(be===B.length)return a(L,_e),Xe&&Zs(L,be),pe;if(_e===null){for(;be<B.length;be++)_e=J(L,B[be],W),_e!==null&&(k=d(_e,k,be),Oe===null?pe=_e:Oe.sibling=_e,Oe=_e);return Xe&&Zs(L,be),pe}for(_e=l(_e);be<B.length;be++)$t=Y(_e,L,be,B[be],W),$t!==null&&(t&&$t.alternate!==null&&_e.delete($t.key===null?be:$t.key),k=d($t,k,be),Oe===null?pe=$t:Oe.sibling=$t,Oe=$t);return t&&_e.forEach(function(us){return r(L,us)}),Xe&&Zs(L,be),pe}function Te(L,k,B,W){if(B==null)throw Error(s(151));for(var pe=null,Oe=null,_e=k,be=k=0,$t=null,Ye=B.next();_e!==null&&!Ye.done;be++,Ye=B.next()){_e.index>be?($t=_e,_e=null):$t=_e.sibling;var us=G(L,_e,Ye.value,W);if(us===null){_e===null&&(_e=$t);break}t&&_e&&us.alternate===null&&r(L,_e),k=d(us,k,be),Oe===null?pe=us:Oe.sibling=us,Oe=us,_e=$t}if(Ye.done)return a(L,_e),Xe&&Zs(L,be),pe;if(_e===null){for(;!Ye.done;be++,Ye=B.next())Ye=J(L,Ye.value,W),Ye!==null&&(k=d(Ye,k,be),Oe===null?pe=Ye:Oe.sibling=Ye,Oe=Ye);return Xe&&Zs(L,be),pe}for(_e=l(_e);!Ye.done;be++,Ye=B.next())Ye=Y(_e,L,be,Ye.value,W),Ye!==null&&(t&&Ye.alternate!==null&&_e.delete(Ye.key===null?be:Ye.key),k=d(Ye,k,be),Oe===null?pe=Ye:Oe.sibling=Ye,Oe=Ye);return t&&_e.forEach(function(Rw){return r(L,Rw)}),Xe&&Zs(L,be),pe}function rt(L,k,B,W){if(typeof B=="object"&&B!==null&&B.type===z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case A:e:{for(var pe=B.key;k!==null;){if(k.key===pe){if(pe=B.type,pe===z){if(k.tag===7){a(L,k.sibling),W=h(k,B.props.children),W.return=L,L=W;break e}}else if(k.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===w&&l_(pe)===k.type){a(L,k.sibling),W=h(k,B.props),Il(W,B),W.return=L,L=W;break e}a(L,k);break}else r(L,k);k=k.sibling}B.type===z?(W=$s(B.props.children,L.mode,W,B.key),W.return=L,L=W):(W=pc(B.type,B.key,B.props,null,L.mode,W),Il(W,B),W.return=L,L=W)}return E(L);case x:e:{for(pe=B.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===B.containerInfo&&k.stateNode.implementation===B.implementation){a(L,k.sibling),W=h(k,B.children||[]),W.return=L,L=W;break e}else{a(L,k);break}else r(L,k);k=k.sibling}W=Qf(B,L.mode,W),W.return=L,L=W}return E(L);case w:return pe=B._init,B=pe(B._payload),rt(L,k,B,W)}if(oe(B))return we(L,k,B,W);if(P(B)){if(pe=P(B),typeof pe!="function")throw Error(s(150));return B=pe.call(B),Te(L,k,B,W)}if(typeof B.then=="function")return rt(L,k,Oc(B),W);if(B.$$typeof===ie)return rt(L,k,vc(L,B),W);Mc(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,k!==null&&k.tag===6?(a(L,k.sibling),W=h(k,B),W.return=L,L=W):(a(L,k),W=Yf(B,L.mode,W),W.return=L,L=W),E(L)):a(L,k)}return function(L,k,B,W){try{Rl=0;var pe=rt(L,k,B,W);return to=null,pe}catch(_e){if(_e===yl||_e===Tc)throw _e;var Oe=Un(29,_e,null,L.mode);return Oe.lanes=W,Oe.return=L,Oe}finally{}}}var no=u_(!0),c_=u_(!1),ii=$(null),Pi=null;function Qr(t){var r=t.alternate;re(qt,qt.current&1),re(ii,t),Pi===null&&(r===null||Wa.current!==null||r.memoizedState!==null)&&(Pi=t)}function h_(t){if(t.tag===22){if(re(qt,qt.current),re(ii,t),Pi===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Pi=t)}}else Xr()}function Xr(){re(qt,qt.current),re(ii,ii.current)}function vr(t){ae(ii),Pi===t&&(Pi=null),ae(qt)}var qt=$(0);function Vc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||gm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Id(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Cd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=qn(),h=Gr(l);h.payload=r,a!=null&&(h.callback=a),r=Kr(t,h,l),r!==null&&(Hn(r,t,l),vl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=qn(),h=Gr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Kr(t,h,l),r!==null&&(Hn(r,t,l),vl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=qn(),l=Gr(a);l.tag=2,r!=null&&(l.callback=r),r=Kr(t,l,a),r!==null&&(Hn(r,t,a),vl(r,t,a))}};function f_(t,r,a,l,h,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(h,d):!0}function d_(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Cd.enqueueReplaceState(r,r.state,null)}function sa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var kc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function m_(t){kc(t)}function p_(t){console.error(t)}function g_(t){kc(t)}function Pc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function y_(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Dd(t,r,a){return a=Gr(a),a.tag=3,a.payload={element:null},a.callback=function(){Pc(t,r)},a}function __(t){return t=Gr(t),t.tag=3,t}function v_(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){y_(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){y_(r,a,l),typeof h!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function RA(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ml(r,a,h,!0),a=ii.current,a!==null){switch(a.tag){case 13:return Pi===null?Jd():a.alternate===null&&Et===0&&(Et=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===rd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),tm(t,l,h)),!1;case 22:return a.flags|=65536,l===rd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),tm(t,l,h)),!1}throw Error(s(435,a.tag))}return tm(t,l,h),Jd(),!1}if(Xe)return r=ii.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Wf&&(t=Error(s(422),{cause:l}),dl(Jn(t,a)))):(l!==Wf&&(r=Error(s(423),{cause:l}),dl(Jn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Jn(l,a),h=Dd(t.stateNode,l,h),od(t,h),Et!==4&&(Et=2)),!1;var d=Error(s(520),{cause:l});if(d=Jn(d,a),Vl===null?Vl=[d]:Vl.push(d),Et!==4&&(Et=2),r===null)return!0;l=Jn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Dd(a.stateNode,l,t),od(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ts===null||!ts.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=__(h),v_(h,t,a,l),od(a,h),!1}a=a.return}while(a!==null);return!1}var E_=Error(s(461)),Qt=!1;function rn(t,r,a,l){r.child=t===null?c_(r,null,a,l):no(r,t.child,a,l)}function T_(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return na(r),l=fd(t,r,a,E,d,h),b=dd(),t!==null&&!Qt?(md(t,r,h),Er(t,r,h)):(Xe&&b&&Xf(r),r.flags|=1,rn(t,r,l,h),r.child)}function b_(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Kf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,S_(t,r,d,l,h)):(t=pc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Ld(t,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(E,l)&&t.ref===r.ref)return Er(t,r,h)}return r.flags|=1,t=dr(d,l),t.ref=r.ref,t.return=r,r.child=t}function S_(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(ul(d,l)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=l=d,Ld(t,h))(t.flags&131072)!==0&&(Qt=!0);else return r.lanes=t.lanes,Er(t,r,h)}return Nd(t,r,a,l,h)}function A_(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return w_(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ec(r,d!==null?d.cachePool:null),d!==null?Sy(r,d):ud(),h_(r);else return r.lanes=r.childLanes=536870912,w_(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ec(r,d.cachePool),Sy(r,d),Xr(),r.memoizedState=null):(t!==null&&Ec(r,null),ud(),Xr());return rn(t,r,h,a),r.child}function w_(t,r,a,l){var h=id();return h=h===null?null:{parent:Bt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&Ec(r,null),ud(),h_(r),t!==null&&ml(t,r,l,!0),null}function Lc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Nd(t,r,a,l,h){return na(r),a=fd(t,r,a,l,void 0,h),l=dd(),t!==null&&!Qt?(md(t,r,h),Er(t,r,h)):(Xe&&l&&Xf(r),r.flags|=1,rn(t,r,a,h),r.child)}function R_(t,r,a,l,h,d){return na(r),r.updateQueue=null,a=wy(r,l,a,h),Ay(t),l=dd(),t!==null&&!Qt?(md(t,r,d),Er(t,r,d)):(Xe&&l&&Xf(r),r.flags|=1,rn(t,r,a,d),r.child)}function I_(t,r,a,l,h){if(na(r),r.stateNode===null){var d=Ka,E=a.contextType;typeof E=="object"&&E!==null&&(d=cn(E)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Cd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},sd(r),E=a.contextType,d.context=typeof E=="object"&&E!==null?cn(E):Ka,d.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Id(r,a,E,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&Cd.enqueueReplaceState(d,d.state,null),Tl(r,l,d,h),El(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var b=r.memoizedProps,N=sa(a,b);d.props=N;var q=d.context,X=a.contextType;E=Ka,typeof X=="object"&&X!==null&&(E=cn(X));var J=a.getDerivedStateFromProps;X=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||q!==E)&&d_(r,d,l,E),Fr=!1;var G=r.memoizedState;d.state=G,Tl(r,l,d,h),El(),q=r.memoizedState,b||G!==q||Fr?(typeof J=="function"&&(Id(r,a,J,l),q=r.memoizedState),(N=Fr||f_(r,a,N,l,G,q,E))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),d.props=l,d.state=q,d.context=E,l=N):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,ad(t,r),E=r.memoizedProps,X=sa(a,E),d.props=X,J=r.pendingProps,G=d.context,q=a.contextType,N=Ka,typeof q=="object"&&q!==null&&(N=cn(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==J||G!==N)&&d_(r,d,l,N),Fr=!1,G=r.memoizedState,d.state=G,Tl(r,l,d,h),El();var Y=r.memoizedState;E!==J||G!==Y||Fr||t!==null&&t.dependencies!==null&&_c(t.dependencies)?(typeof b=="function"&&(Id(r,a,b,l),Y=r.memoizedState),(X=Fr||f_(r,a,X,l,G,Y,N)||t!==null&&t.dependencies!==null&&_c(t.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Y,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Y,N)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Y),d.props=l,d.state=Y,d.context=N,l=X):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Lc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=no(r,t.child,null,h),r.child=no(r,null,a,h)):rn(t,r,a,h),r.memoizedState=d.state,t=r.child):t=Er(t,r,h),t}function C_(t,r,a,l){return fl(),r.flags|=256,rn(t,r,a,l),r.child}var xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Od(t){return{baseLanes:t,cachePool:py()}}function Md(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=ri),t}function D_(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(qt.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(Xe){if(h?Qr(r):Xr(),Xe){var b=vt,N;if(N=b){e:{for(N=b,b=ki;N.nodeType!==8;){if(!b){b=null;break e}if(N=_i(N.nextSibling),N===null){b=null;break e}}b=N}b!==null?(r.memoizedState={dehydrated:b,treeContext:Ws!==null?{id:mr,overflow:pr}:null,retryLane:536870912,hydrationErrors:null},N=Un(18,null,null,0),N.stateNode=b,N.return=r,r.child=N,Sn=r,vt=null,N=!0):N=!1}N||ea(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return gm(b)?r.lanes=32:r.lanes=536870912,null;vr(r)}return b=l.children,l=l.fallback,h?(Xr(),h=r.mode,b=Uc({mode:"hidden",children:b},h),l=$s(l,h,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,h=r.child,h.memoizedState=Od(a),h.childLanes=Md(t,E,a),r.memoizedState=xd,l):(Qr(r),Vd(r,b))}if(N=t.memoizedState,N!==null&&(b=N.dehydrated,b!==null)){if(d)r.flags&256?(Qr(r),r.flags&=-257,r=kd(t,r,a)):r.memoizedState!==null?(Xr(),r.child=t.child,r.flags|=128,r=null):(Xr(),h=l.fallback,b=r.mode,l=Uc({mode:"visible",children:l.children},b),h=$s(h,b,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,no(r,t.child,null,a),l=r.child,l.memoizedState=Od(a),l.childLanes=Md(t,E,a),r.memoizedState=xd,r=h);else if(Qr(r),gm(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var q=E.dgst;E=q,l=Error(s(419)),l.stack="",l.digest=E,dl({value:l,source:null,stack:null}),r=kd(t,r,a)}else if(Qt||ml(t,r,a,!1),E=(a&t.childLanes)!==0,Qt||E){if(E=ot,E!==null&&(l=a&-a,l=(l&42)!==0?1:Tt(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Ga(t,l),Hn(E,t,l),E_;b.data==="$?"||Jd(),r=kd(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,vt=_i(b.nextSibling),Sn=r,Xe=!0,Js=null,ki=!1,t!==null&&(ti[ni++]=mr,ti[ni++]=pr,ti[ni++]=Ws,mr=t.id,pr=t.overflow,Ws=r),r=Vd(r,l.children),r.flags|=4096);return r}return h?(Xr(),h=l.fallback,b=r.mode,N=t.child,q=N.sibling,l=dr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,q!==null?h=dr(q,h):(h=$s(h,b,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,b=t.child.memoizedState,b===null?b=Od(a):(N=b.cachePool,N!==null?(q=Bt._currentValue,N=N.parent!==q?{parent:q,pool:q}:N):N=py(),b={baseLanes:b.baseLanes|a,cachePool:N}),h.memoizedState=b,h.childLanes=Md(t,E,a),r.memoizedState=xd,l):(Qr(r),a=t.child,t=a.sibling,a=dr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function Vd(t,r){return r=Uc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Uc(t,r){return t=Un(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function kd(t,r,a){return no(r,t.child,null,a),t=Vd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function N_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Jf(t.return,r,a)}function Pd(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function x_(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(rn(t,r,l.children,a),l=qt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N_(t,a,r);else if(t.tag===19)N_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(re(qt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Vc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Pd(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Vc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Pd(r,!0,a,null,d);break;case"together":Pd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Er(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),es|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ml(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=dr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=dr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Ld(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&_c(t)))}function IA(t,r,a){switch(r.tag){case 3:ze(r,r.stateNode.containerInfo),Hr(r,Bt,t.memoizedState.cache),fl();break;case 27:case 5:Me(r);break;case 4:ze(r,r.stateNode.containerInfo);break;case 10:Hr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Qr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?D_(t,r,a):(Qr(r),t=Er(t,r,a),t!==null?t.sibling:null);Qr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ml(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return x_(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(qt,qt.current),l)break;return null;case 22:case 23:return r.lanes=0,A_(t,r,a);case 24:Hr(r,Bt,t.memoizedState.cache)}return Er(t,r,a)}function O_(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Qt=!0;else{if(!Ld(t,a)&&(r.flags&128)===0)return Qt=!1,IA(t,r,a);Qt=(t.flags&131072)!==0}else Qt=!1,Xe&&(r.flags&1048576)!==0&&ly(r,yc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Kf(l)?(t=sa(l,t),r.tag=1,r=I_(null,r,l,t,a)):(r.tag=0,r=Nd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===he){r.tag=11,r=T_(null,r,l,t,a);break e}else if(h===O){r.tag=14,r=b_(null,r,l,t,a);break e}}throw r=Ke(l)||l,Error(s(306,r,""))}}return r;case 0:return Nd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=sa(l,r.pendingProps),I_(t,r,l,h,a);case 3:e:{if(ze(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,ad(t,r),Tl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Hr(r,Bt,l),l!==d.cache&&ed(r,[Bt],a,!0),El(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=C_(t,r,l,a);break e}else if(l!==h){h=Jn(Error(s(424)),r),dl(h),r=C_(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=_i(t.firstChild),Sn=r,Xe=!0,Js=null,ki=!0,a=c_(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===h){r=Er(t,r,a);break e}rn(t,r,l,a)}r=r.child}return r;case 26:return Lc(t,r),t===null?(a=Pv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Xe||(a=r.type,t=r.pendingProps,l=Zc(ye.current).createElement(a),l[et]=r,l[Qe]=t,an(l,a,t),bt(l),r.stateNode=l):r.memoizedState=Pv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Me(r),t===null&&Xe&&(l=r.stateNode=Mv(r.type,r.pendingProps,ye.current),Sn=r,ki=!0,h=vt,rs(r.type)?(ym=h,vt=_i(l.firstChild)):vt=h),rn(t,r,r.pendingProps.children,a),Lc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Xe&&((h=l=vt)&&(l=tw(l,r.type,r.pendingProps,ki),l!==null?(r.stateNode=l,Sn=r,vt=_i(l.firstChild),ki=!1,h=!0):h=!1),h||ea(r)),Me(r),h=r.type,d=r.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,dm(h,d)?l=null:E!==null&&dm(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=fd(t,r,vA,null,null,a),Hl._currentValue=h),Lc(t,r),rn(t,r,l,a),r.child;case 6:return t===null&&Xe&&((t=a=vt)&&(a=nw(a,r.pendingProps,ki),a!==null?(r.stateNode=a,Sn=r,vt=null,t=!0):t=!1),t||ea(r)),null;case 13:return D_(t,r,a);case 4:return ze(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=no(r,null,l,a):rn(t,r,l,a),r.child;case 11:return T_(t,r,r.type,r.pendingProps,a);case 7:return rn(t,r,r.pendingProps,a),r.child;case 8:return rn(t,r,r.pendingProps.children,a),r.child;case 12:return rn(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Hr(r,r.type,l.value),rn(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,na(r),h=cn(h),l=l(h),r.flags|=1,rn(t,r,l,a),r.child;case 14:return b_(t,r,r.type,r.pendingProps,a);case 15:return S_(t,r,r.type,r.pendingProps,a);case 19:return x_(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Uc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=dr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return A_(t,r,a);case 24:return na(r),l=cn(Bt),t===null?(h=id(),h===null&&(h=ot,d=td(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},sd(r),Hr(r,Bt,h)):((t.lanes&a)!==0&&(ad(t,r),Tl(r,null,null,a),El()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Hr(r,Bt,l)):(l=d.cache,Hr(r,Bt,l),l!==h.cache&&ed(r,[Bt],a,!0))),rn(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Tr(t){t.flags|=4}function M_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Bv(r)){if(r=ii.current,r!==null&&((Fe&4194048)===Fe?Pi!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||r!==Pi))throw _l=rd,gy;t.flags|=8192}}function jc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Vs():536870912,t.lanes|=r,ao|=r)}function Cl(t,r){if(!Xe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function pt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function CA(t,r,a){var l=r.pendingProps;switch($f(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return pt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),yr(Bt),Rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(r)?Tr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hy())),pt(r),null;case 26:return a=r.memoizedState,t===null?(Tr(r),a!==null?(pt(r),M_(r,a)):(pt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(Tr(r),pt(r),M_(r,a)):(pt(r),r.flags&=-16777217):(t.memoizedProps!==l&&Tr(r),pt(r),r.flags&=-16777217),null;case 27:gn(r),a=ye.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Tr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return pt(r),null}t=ge.current,hl(r)?uy(r):(t=Mv(h,l,a),r.stateNode=t,Tr(r))}return pt(r),null;case 5:if(gn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Tr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return pt(r),null}if(t=ge.current,hl(r))uy(r);else{switch(h=Zc(ye.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[et]=r,t[Qe]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(an(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Tr(r)}}return pt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Tr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=ye.current,hl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=Sn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[et]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Rv(t.nodeValue,a)),t||ea(r)}else t=Zc(t).createTextNode(l),t[et]=r,r.stateNode=t}return pt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=hl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[et]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),h=!1}else h=hy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(vr(r),r):(vr(r),null)}if(vr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),jc(r,r.updateQueue),pt(r),null;case 4:return Rt(),t===null&&lm(r.stateNode.containerInfo),pt(r),null;case 10:return yr(r.type),pt(r),null;case 19:if(ae(qt),h=r.memoizedState,h===null)return pt(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)Cl(h,!1);else{if(Et!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Vc(t),d!==null){for(r.flags|=128,Cl(h,!1),t=d.updateQueue,r.updateQueue=t,jc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)oy(a,t),a=a.sibling;return re(qt,qt.current&1|2),r.child}t=t.sibling}h.tail!==null&&yn()>qc&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Vc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,jc(r,t),Cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Xe)return pt(r),null}else 2*yn()-h.renderingStartTime>qc&&a!==536870912&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=yn(),r.sibling=null,t=qt.current,re(qt,l?t&1|2:t&1),r):(pt(r),null);case 22:case 23:return vr(r),cd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),a=r.updateQueue,a!==null&&jc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ae(ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),yr(Bt),pt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function DA(t,r){switch($f(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return yr(Bt),Rt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return gn(r),null;case 13:if(vr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));fl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ae(qt),null;case 4:return Rt(),null;case 10:return yr(r.type),null;case 22:case 23:return vr(r),cd(),t!==null&&ae(ia),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return yr(Bt),null;case 25:return null;default:return null}}function V_(t,r){switch($f(r),r.tag){case 3:yr(Bt),Rt();break;case 26:case 27:case 5:gn(r);break;case 4:Rt();break;case 13:vr(r);break;case 19:ae(qt);break;case 10:yr(r.type);break;case 22:case 23:vr(r),cd(),t!==null&&ae(ia);break;case 24:yr(Bt)}}function Dl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(b){st(r,r.return,b)}}function $r(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,h=r;var N=a,q=b;try{q()}catch(X){st(h,N,X)}}}l=l.next}while(l!==d)}}catch(X){st(r,r.return,X)}}function k_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{by(r,a)}catch(l){st(t,t.return,l)}}}function P_(t,r,a){a.props=sa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){st(t,r,l)}}function Nl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){st(t,r,h)}}function Li(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){st(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){st(t,r,h)}else a.current=null}function L_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){st(t,t.return,h)}}function Ud(t,r,a){try{var l=t.stateNode;$A(l,t.type,a,r),l[Qe]=r}catch(h){st(t,t.return,h)}}function U_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&rs(t.type)||t.tag===4}function jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Wc));else if(l!==4&&(l===27&&rs(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(zd(t,r,a),t=t.sibling;t!==null;)zd(t,r,a),t=t.sibling}function zc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&rs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(zc(t,r,a),t=t.sibling;t!==null;)zc(t,r,a),t=t.sibling}function j_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);an(r,l,a),r[et]=t,r[Qe]=a}catch(d){st(t,t.return,d)}}var br=!1,At=!1,Bd=!1,z_=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function NA(t,r){if(t=t.containerInfo,hm=rh,t=Wg(t),jf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var E=0,b=-1,N=-1,q=0,X=0,J=t,G=null;t:for(;;){for(var Y;J!==a||h!==0&&J.nodeType!==3||(b=E+h),J!==d||l!==0&&J.nodeType!==3||(N=E+l),J.nodeType===3&&(E+=J.nodeValue.length),(Y=J.firstChild)!==null;)G=J,J=Y;for(;;){if(J===t)break t;if(G===a&&++q===h&&(b=E),G===d&&++X===l&&(N=E),(Y=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=Y}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(fm={focusedElem:t,selectionRange:a},rh=!1,Xt=r;Xt!==null;)if(r=Xt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Xt=t;else for(;Xt!==null;){switch(r=Xt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var we=sa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Te){st(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)pm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Xt=t;break}Xt=r.return}}function B_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(t,a),l&4&&Dl(5,a);break;case 1:if(Wr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){st(a,a.return,E)}else{var h=sa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){st(a,a.return,E)}}l&64&&k_(a),l&512&&Nl(a,a.return);break;case 3:if(Wr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{by(t,r)}catch(E){st(a,a.return,E)}}break;case 27:r===null&&l&4&&j_(a);case 26:case 5:Wr(t,a),r===null&&l&4&&L_(a),l&512&&Nl(a,a.return);break;case 12:Wr(t,a);break;case 13:Wr(t,a),l&4&&F_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=jA.bind(null,a),iw(t,a))));break;case 22:if(l=a.memoizedState!==null||br,!l){r=r!==null&&r.memoizedState!==null||At,h=br;var d=At;br=l,(At=r)&&!d?Zr(t,a,(a.subtreeFlags&8772)!==0):Wr(t,a),br=h,At=d}break;case 30:break;default:Wr(t,a)}}function q_(t){var r=t.alternate;r!==null&&(t.alternate=null,q_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&jr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,Cn=!1;function Sr(t,r,a){for(a=a.child;a!==null;)H_(t,r,a),a=a.sibling}function H_(t,r,a){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:At||Li(a,r),Sr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:At||Li(a,r);var l=dt,h=Cn;rs(a.type)&&(dt=a.stateNode,Cn=!1),Sr(t,r,a),jl(a.stateNode),dt=l,Cn=h;break;case 5:At||Li(a,r);case 6:if(l=dt,h=Cn,dt=null,Sr(t,r,a),dt=l,Cn=h,dt!==null)if(Cn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){st(a,r,d)}else try{dt.removeChild(a.stateNode)}catch(d){st(a,r,d)}break;case 18:dt!==null&&(Cn?(t=dt,xv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Yl(t)):xv(dt,a.stateNode));break;case 4:l=dt,h=Cn,dt=a.stateNode.containerInfo,Cn=!0,Sr(t,r,a),dt=l,Cn=h;break;case 0:case 11:case 14:case 15:At||$r(2,a,r),At||$r(4,a,r),Sr(t,r,a);break;case 1:At||(Li(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&P_(a,r,l)),Sr(t,r,a);break;case 21:Sr(t,r,a);break;case 22:At=(l=At)||a.memoizedState!==null,Sr(t,r,a),At=l;break;default:Sr(t,r,a)}}function F_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yl(t)}catch(a){st(r,r.return,a)}}function xA(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new z_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new z_),r;default:throw Error(s(435,t.tag))}}function qd(t,r){var a=xA(t);r.forEach(function(l){var h=zA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function jn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,E=r,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(rs(b.type)){dt=b.stateNode,Cn=!1;break e}break;case 5:dt=b.stateNode,Cn=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,Cn=!0;break e}b=b.return}if(dt===null)throw Error(s(160));H_(d,E,h),dt=null,Cn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)G_(r,t),r=r.sibling}var yi=null;function G_(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:jn(r,t),zn(t),l&4&&($r(3,t,t.return),Dl(3,t),$r(5,t,t.return));break;case 1:jn(r,t),zn(t),l&512&&(At||a===null||Li(a,a.return)),l&64&&br&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=yi;if(jn(r,t),zn(t),l&512&&(At||a===null||Li(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[di]||d[et]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),an(d,l,a),d[et]=t,bt(d),l=d;break e;case"link":var E=jv("link","href",h).get(l+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(d=E[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break t}}d=h.createElement(l),an(d,l,a),h.head.appendChild(d);break;case"meta":if(E=jv("meta","content",h).get(l+(a.content||""))){for(b=0;b<E.length;b++)if(d=E[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break t}}d=h.createElement(l),an(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[et]=t,bt(d),l=d}t.stateNode=l}else zv(h,t.type,t.stateNode);else t.stateNode=Uv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?zv(h,t.type,t.stateNode):Uv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:jn(r,t),zn(t),l&512&&(At||a===null||Li(a,a.return)),a!==null&&l&4&&Ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(jn(r,t),zn(t),l&512&&(At||a===null||Li(a,a.return)),t.flags&32){h=t.stateNode;try{Xn(h,"")}catch(Y){st(t,t.return,Y)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Ud(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Bd=!0);break;case 6:if(jn(r,t),zn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Y){st(t,t.return,Y)}}break;case 3:if(th=null,h=yi,yi=Jc(r.containerInfo),jn(r,t),yi=h,zn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Yl(r.containerInfo)}catch(Y){st(t,t.return,Y)}Bd&&(Bd=!1,K_(t));break;case 4:l=yi,yi=Jc(t.stateNode.containerInfo),jn(r,t),zn(t),yi=l;break;case 12:jn(r,t),zn(t);break;case 13:jn(r,t),zn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qd=yn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qd(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=br,X=At;if(br=q||h,At=X||N,jn(r,t),At=X,br=q,zn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||N||br||At||aa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(d=N.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=N.stateNode;var J=N.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){st(N,N.return,Y)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(Y){st(N,N.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,qd(t,a))));break;case 19:jn(r,t),zn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qd(t,l)));break;case 30:break;case 21:break;default:jn(r,t),zn(t)}}function zn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(U_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=jd(t);zc(t,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(Xn(E,""),a.flags&=-33);var b=jd(t);zc(t,b,E);break;case 3:case 4:var N=a.stateNode.containerInfo,q=jd(t);zd(t,q,N);break;default:throw Error(s(161))}}catch(X){st(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function K_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;K_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Wr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)B_(t,r.alternate,r),r=r.sibling}function aa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:$r(4,r,r.return),aa(r);break;case 1:Li(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&P_(r,r.return,a),aa(r);break;case 27:jl(r.stateNode);case 26:case 5:Li(r,r.return),aa(r);break;case 22:r.memoizedState===null&&aa(r);break;case 30:aa(r);break;default:aa(r)}t=t.sibling}}function Zr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,E=d.flags;switch(d.tag){case 0:case 11:case 15:Zr(h,d,a),Dl(4,d);break;case 1:if(Zr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){st(l,l.return,q)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Ty(N[h],b)}catch(q){st(l,l.return,q)}}a&&E&64&&k_(d),Nl(d,d.return);break;case 27:j_(d);case 26:case 5:Zr(h,d,a),a&&l===null&&E&4&&L_(d),Nl(d,d.return);break;case 12:Zr(h,d,a);break;case 13:Zr(h,d,a),a&&E&4&&F_(h,d);break;case 22:d.memoizedState===null&&Zr(h,d,a),Nl(d,d.return);break;case 30:break;default:Zr(h,d,a)}r=r.sibling}}function Hd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pl(a))}function Fd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t))}function Ui(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Y_(t,r,a,l),r=r.sibling}function Y_(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Ui(t,r,a,l),h&2048&&Dl(9,r);break;case 1:Ui(t,r,a,l);break;case 3:Ui(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t)));break;case 12:if(h&2048){Ui(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,E=d.id,b=d.onPostCommit;typeof b=="function"&&b(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){st(r,r.return,N)}}else Ui(t,r,a,l);break;case 13:Ui(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,E=r.alternate,r.memoizedState!==null?d._visibility&2?Ui(t,r,a,l):xl(t,r):d._visibility&2?Ui(t,r,a,l):(d._visibility|=2,io(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Hd(E,r);break;case 24:Ui(t,r,a,l),h&2048&&Fd(r.alternate,r);break;default:Ui(t,r,a,l)}}function io(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,E=r,b=a,N=l,q=E.flags;switch(E.tag){case 0:case 11:case 15:io(d,E,b,N,h),Dl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?io(d,E,b,N,h):xl(d,E):(X._visibility|=2,io(d,E,b,N,h)),h&&q&2048&&Hd(E.alternate,E);break;case 24:io(d,E,b,N,h),h&&q&2048&&Fd(E.alternate,E);break;default:io(d,E,b,N,h)}r=r.sibling}}function xl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:xl(a,l),h&2048&&Hd(l.alternate,l);break;case 24:xl(a,l),h&2048&&Fd(l.alternate,l);break;default:xl(a,l)}r=r.sibling}}var Ol=8192;function ro(t){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)Q_(t),t=t.sibling}function Q_(t){switch(t.tag){case 26:ro(t),t.flags&Ol&&t.memoizedState!==null&&gw(yi,t.memoizedState,t.memoizedProps);break;case 5:ro(t);break;case 3:case 4:var r=yi;yi=Jc(t.stateNode.containerInfo),ro(t),yi=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,ro(t),Ol=r):ro(t));break;default:ro(t)}}function X_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ml(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Xt=l,W_(l,t)}X_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$_(t),t=t.sibling}function $_(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&$r(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Bc(t)):Ml(t);break;default:Ml(t)}}function Bc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Xt=l,W_(l,t)}X_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:$r(8,r,r.return),Bc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Bc(r));break;default:Bc(r)}t=t.sibling}}function W_(t,r){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:$r(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Xt=l;else e:for(a=t;Xt!==null;){l=Xt;var h=l.sibling,d=l.return;if(q_(l),l===a){Xt=null;break e}if(h!==null){h.return=d,Xt=h;break e}Xt=d}}}var OA={getCacheForType:function(t){var r=cn(Bt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},MA=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ot=null,Ve=null,Fe=0,Je=0,Bn=null,Jr=!1,so=!1,Gd=!1,Ar=0,Et=0,es=0,oa=0,Kd=0,ri=0,ao=0,Vl=null,Dn=null,Yd=!1,Qd=0,qc=1/0,Hc=null,ts=null,sn=0,ns=null,oo=null,lo=0,Xd=0,$d=null,Z_=null,kl=0,Wd=null;function qn(){if((Ze&2)!==0&&Fe!==0)return Fe&-Fe;if(K.T!==null){var t=Xa;return t!==0?t:rm()}return Ut()}function J_(){ri===0&&(ri=(Fe&536870912)===0||Xe?Ms():536870912);var t=ii.current;return t!==null&&(t.flags|=32),ri}function Hn(t,r,a){(t===ot&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(uo(t,0),is(t,Fe,ri,!1)),at(t,a),((Ze&2)===0||t!==ot)&&(t===ot&&((Ze&2)===0&&(oa|=a),Et===4&&is(t,Fe,ri,!1)),ji(t))}function ev(t,r,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||tr(t,r),h=l?PA(t,r):em(t,r,!0),d=l;do{if(h===0){so&&!l&&is(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!VA(a)){h=em(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var b=t;h=Vl;var N=b.current.memoizedState.isDehydrated;if(N&&(uo(b,E).flags|=256),E=em(b,E,!1),E!==2){if(Gd&&!N){b.errorRecoveryDisabledLanes|=d,oa|=d,h=4;break e}d=Dn,Dn=h,d!==null&&(Dn===null?Dn=d:Dn.push.apply(Dn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){uo(t,0),is(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:is(l,r,ri,!Jr);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Qd+300-yn(),10<h)){if(is(l,r,ri,!Jr),er(l,0,!0)!==0)break e;l.timeoutHandle=Dv(tv.bind(null,l,a,Dn,Hc,Yd,r,ri,oa,ao,Jr,d,2,-0,0),h);break e}tv(l,a,Dn,Hc,Yd,r,ri,oa,ao,Jr,d,0,-0,0)}}break}while(!0);ji(t)}function tv(t,r,a,l,h,d,E,b,N,q,X,J,G,Y){if(t.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:pw},Q_(r),J=yw(),J!==null)){t.cancelPendingCommit=J(lv.bind(null,t,r,d,a,l,h,E,b,N,X,1,G,Y)),is(t,d,E,!q);return}lv(t,r,d,a,l,h,E,b,N)}function VA(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Ln(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function is(t,r,a,l){r&=~Kd,r&=~oa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-yt(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&ft(t,a,r)}function Fc(){return(Ze&6)===0?(Pl(0),!1):!0}function Zd(){if(Ve!==null){if(Je===0)var t=Ve.return;else t=Ve,gr=ta=null,pd(t),to=null,Rl=0,t=Ve;for(;t!==null;)V_(t.alternate,t),t=t.return;Ve=null}}function uo(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,ZA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Zd(),ot=t,Ve=a=dr(t.current,null),Fe=r,Je=0,Bn=null,Jr=!1,so=tr(t,r),Gd=!1,ao=ri=Kd=oa=es=Et=0,Dn=Vl=null,Yd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-yt(l),d=1<<h;r|=t[h],l&=~d}return Ar=r,fc(),a}function nv(t,r){xe=null,K.H=xc,r===yl||r===Tc?(r=vy(),Je=3):r===gy?(r=vy(),Je=4):Je=r===E_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Bn=r,Ve===null&&(Et=1,Pc(t,Jn(r,t.current)))}function iv(){var t=K.H;return K.H=xc,t===null?xc:t}function rv(){var t=K.A;return K.A=OA,t}function Jd(){Et=4,Jr||(Fe&4194048)!==Fe&&ii.current!==null||(so=!0),(es&134217727)===0&&(oa&134217727)===0||ot===null||is(ot,Fe,ri,!1)}function em(t,r,a){var l=Ze;Ze|=2;var h=iv(),d=rv();(ot!==t||Fe!==r)&&(Hc=null,uo(t,r)),r=!1;var E=Et;e:do try{if(Je!==0&&Ve!==null){var b=Ve,N=Bn;switch(Je){case 8:Zd(),E=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(r=!0);var q=Je;if(Je=0,Bn=null,co(t,b,N,q),a&&so){E=0;break e}break;default:q=Je,Je=0,Bn=null,co(t,b,N,q)}}kA(),E=Et;break}catch(X){nv(t,X)}while(!0);return r&&t.shellSuspendCounter++,gr=ta=null,Ze=l,K.H=h,K.A=d,Ve===null&&(ot=null,Fe=0,fc()),E}function kA(){for(;Ve!==null;)sv(Ve)}function PA(t,r){var a=Ze;Ze|=2;var l=iv(),h=rv();ot!==t||Fe!==r?(Hc=null,qc=yn()+500,uo(t,r)):so=tr(t,r);e:do try{if(Je!==0&&Ve!==null){r=Ve;var d=Bn;t:switch(Je){case 1:Je=0,Bn=null,co(t,r,d,1);break;case 2:case 9:if(yy(d)){Je=0,Bn=null,av(r);break}r=function(){Je!==2&&Je!==9||ot!==t||(Je=7),ji(t)},d.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:yy(d)?(Je=0,Bn=null,av(r)):(Je=0,Bn=null,co(t,r,d,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var b=Ve;if(!E||Bv(E)){Je=0,Bn=null;var N=b.sibling;if(N!==null)Ve=N;else{var q=b.return;q!==null?(Ve=q,Gc(q)):Ve=null}break t}}Je=0,Bn=null,co(t,r,d,5);break;case 6:Je=0,Bn=null,co(t,r,d,6);break;case 8:Zd(),Et=6;break e;default:throw Error(s(462))}}LA();break}catch(X){nv(t,X)}while(!0);return gr=ta=null,K.H=l,K.A=h,Ze=a,Ve!==null?0:(ot=null,Fe=0,fc(),Et)}function LA(){for(;Ve!==null&&!Kn();)sv(Ve)}function sv(t){var r=O_(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,r===null?Gc(t):Ve=r}function av(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=R_(a,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=R_(a,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:pd(r);default:V_(a,r),r=Ve=oy(r,Ar),r=O_(a,r,Ar)}t.memoizedProps=t.pendingProps,r===null?Gc(t):Ve=r}function co(t,r,a,l){gr=ta=null,pd(r),to=null,Rl=0;var h=r.return;try{if(RA(t,h,r,a,Fe)){Et=1,Pc(t,Jn(a,t.current)),Ve=null;return}}catch(d){if(h!==null)throw Ve=h,d;Et=1,Pc(t,Jn(a,t.current)),Ve=null;return}r.flags&32768?(Xe||l===1?t=!0:so||(Fe&536870912)!==0?t=!1:(Jr=t=!0,(l===2||l===9||l===3||l===6)&&(l=ii.current,l!==null&&l.tag===13&&(l.flags|=16384))),ov(r,t)):Gc(r)}function Gc(t){var r=t;do{if((r.flags&32768)!==0){ov(r,Jr);return}t=r.return;var a=CA(r.alternate,r,Ar);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);Et===0&&(Et=5)}function ov(t,r){do{var a=DA(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);Et=6,Ve=null}function lv(t,r,a,l,h,d,E,b,N){t.cancelPendingCommit=null;do Kc();while(sn!==0);if((Ze&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Ff,Lt(t,a,d,E,b,N),t===ot&&(Ve=ot=null,Fe=0),oo=r,ns=t,lo=a,Xd=d,$d=h,Z_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,BA(Yn,function(){return dv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=te.p,te.p=2,E=Ze,Ze|=4;try{NA(t,r,a)}finally{Ze=E,te.p=h,K.T=l}}sn=1,uv(),cv(),hv()}}function uv(){if(sn===1){sn=0;var t=ns,r=oo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=te.p;te.p=2;var h=Ze;Ze|=4;try{G_(r,t);var d=fm,E=Wg(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(E!==b&&b&&b.ownerDocument&&$g(b.ownerDocument.documentElement,b)){if(N!==null&&jf(b)){var q=N.start,X=N.end;if(X===void 0&&(X=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(X,b.value.length);else{var J=b.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var Y=G.getSelection(),we=b.textContent.length,Te=Math.min(N.start,we),rt=N.end===void 0?Te:Math.min(N.end,we);!Y.extend&&Te>rt&&(E=rt,rt=Te,Te=E);var L=Xg(b,Te),k=Xg(b,rt);if(L&&k&&(Y.rangeCount!==1||Y.anchorNode!==L.node||Y.anchorOffset!==L.offset||Y.focusNode!==k.node||Y.focusOffset!==k.offset)){var B=J.createRange();B.setStart(L.node,L.offset),Y.removeAllRanges(),Te>rt?(Y.addRange(B),Y.extend(k.node,k.offset)):(B.setEnd(k.node,k.offset),Y.addRange(B))}}}}for(J=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&J.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var W=J[b];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}rh=!!hm,fm=hm=null}finally{Ze=h,te.p=l,K.T=a}}t.current=r,sn=2}}function cv(){if(sn===2){sn=0;var t=ns,r=oo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=te.p;te.p=2;var h=Ze;Ze|=4;try{B_(t,r.alternate,r)}finally{Ze=h,te.p=l,K.T=a}}sn=3}}function hv(){if(sn===4||sn===3){sn=0,ui();var t=ns,r=oo,a=lo,l=Z_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?sn=5:(sn=0,oo=ns=null,fv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ts=null),Ct(a),r=r.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(ht,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=K.T,h=te.p,te.p=2,K.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];d(b.value,{componentStack:b.stack})}}finally{K.T=r,te.p=h}}(lo&3)!==0&&Kc(),ji(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Wd?kl++:(kl=0,Wd=t):kl=0,Pl(0)}}function fv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,pl(r)))}function Kc(t){return uv(),cv(),hv(),dv()}function dv(){if(sn!==5)return!1;var t=ns,r=Xd;Xd=0;var a=Ct(lo),l=K.T,h=te.p;try{te.p=32>a?32:a,K.T=null,a=$d,$d=null;var d=ns,E=lo;if(sn=0,oo=ns=null,lo=0,(Ze&6)!==0)throw Error(s(331));var b=Ze;if(Ze|=4,$_(d.current),Y_(d,d.current,E,a),Ze=b,Pl(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(ht,d)}catch{}return!0}finally{te.p=h,K.T=l,fv(t,r)}}function mv(t,r,a){r=Jn(a,r),r=Dd(t.stateNode,r,2),t=Kr(t,r,2),t!==null&&(at(t,2),ji(t))}function st(t,r,a){if(t.tag===3)mv(t,t,a);else for(;r!==null;){if(r.tag===3){mv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ts===null||!ts.has(l))){t=Jn(a,t),a=__(2),l=Kr(r,a,2),l!==null&&(v_(a,l,r,t),at(l,2),ji(l));break}}r=r.return}}function tm(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new MA;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Gd=!0,h.add(a),t=UA.bind(null,t,r,a),r.then(t,t))}function UA(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ot===t&&(Fe&a)===a&&(Et===4||Et===3&&(Fe&62914560)===Fe&&300>yn()-Qd?(Ze&2)===0&&uo(t,0):Kd|=a,ao===Fe&&(ao=0)),ji(t)}function pv(t,r){r===0&&(r=Vs()),t=Ga(t,r),t!==null&&(at(t,r),ji(t))}function jA(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),pv(t,a)}function zA(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),pv(t,a)}function BA(t,r){return wn(t,r)}var Yc=null,ho=null,nm=!1,Qc=!1,im=!1,la=0;function ji(t){t!==ho&&t.next===null&&(ho===null?Yc=ho=t:ho=ho.next=t),Qc=!0,nm||(nm=!0,HA())}function Pl(t,r){if(!im&&Qc){im=!0;do for(var a=!1,l=Yc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-yt(42|t)+1)-1,d&=h&~(E&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,vv(l,d))}else d=Fe,d=er(l,l===ot?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||tr(l,d)||(a=!0,vv(l,d));l=l.next}while(a);im=!1}}function qA(){gv()}function gv(){Qc=nm=!1;var t=0;la!==0&&(WA()&&(t=la),la=0);for(var r=yn(),a=null,l=Yc;l!==null;){var h=l.next,d=yv(l,r);d===0?(l.next=null,a===null?Yc=h:a.next=h,h===null&&(ho=a)):(a=l,(t!==0||(d&3)!==0)&&(Qc=!0)),l=h}Pl(t)}function yv(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-yt(d),b=1<<E,N=h[E];N===-1?((b&a)===0||(b&l)!==0)&&(h[E]=Ur(b,r)):N<=r&&(t.expiredLanes|=b),d&=~b}if(r=ot,a=Fe,a=er(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Jt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||tr(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Jt(l),Ct(a)){case 2:case 8:a=_n;break;case 32:a=Yn;break;case 268435456:a=Wi;break;default:a=Yn}return l=_v.bind(null,t),a=wn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Jt(l),t.callbackPriority=2,t.callbackNode=null,2}function _v(t,r){if(sn!==0&&sn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Kc()&&t.callbackNode!==a)return null;var l=Fe;return l=er(t,t===ot?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ev(t,l,r),yv(t,yn()),t.callbackNode!=null&&t.callbackNode===a?_v.bind(null,t):null)}function vv(t,r){if(Kc())return null;ev(t,r,!0)}function HA(){JA(function(){(Ze&6)!==0?wn($i,qA):gv()})}function rm(){return la===0&&(la=Ms()),la}function Ev(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ma(""+t)}function Tv(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function FA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=Ev((h[Qe]||null).action),E=l.submitter;E&&(r=(r=E[Qe]||null)?Ev(r.formAction):E.getAttribute("formAction"),r!==null&&(d=r,E=null));var b=new Va("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(la!==0){var N=E?Tv(h,E):new FormData(h);Ad(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=E?Tv(h,E):new FormData(h),Ad(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var sm=0;sm<Hf.length;sm++){var am=Hf[sm],GA=am.toLowerCase(),KA=am[0].toUpperCase()+am.slice(1);gi(GA,"on"+KA)}gi(ey,"onAnimationEnd"),gi(ty,"onAnimationIteration"),gi(ny,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(uA,"onTransitionRun"),gi(cA,"onTransitionStart"),gi(hA,"onTransitionCancel"),gi(iy,"onTransitionEnd"),rr("onMouseEnter",["mouseout","mouseover"]),rr("onMouseLeave",["mouseout","mouseover"]),rr("onPointerEnter",["pointerout","pointerover"]),rr("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function bv(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var E=l.length-1;0<=E;E--){var b=l[E],N=b.instance,q=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=q;try{d(h)}catch(X){kc(X)}h.currentTarget=null,d=N}else for(E=0;E<l.length;E++){if(b=l[E],N=b.instance,q=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=q;try{d(h)}catch(X){kc(X)}h.currentTarget=null,d=N}}}}function ke(t,r){var a=r[fi];a===void 0&&(a=r[fi]=new Set);var l=t+"__bubble";a.has(l)||(Sv(r,t,2,!1),a.add(l))}function om(t,r,a){var l=0;r&&(l|=4),Sv(a,t,l,r)}var Xc="_reactListening"+Math.random().toString(36).slice(2);function lm(t){if(!t[Xc]){t[Xc]=!0,Xo.forEach(function(a){a!=="selectionchange"&&(YA.has(a)||om(a,!1,t),om(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Xc]||(r[Xc]=!0,om("selectionchange",!1,r))}}function Sv(t,r,a,l){switch(Yv(r)){case 2:var h=Ew;break;case 8:h=Tw;break;default:h=bm}a=h.bind(null,r,a,t),h=void 0,!Wn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function um(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===h)break;if(E===4)for(E=l.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;b!==null;){if(E=ir(b),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){l=d=E;continue e}b=b.parentNode}}l=l.return}Wu(function(){var q=d,X=$n(a),J=[];e:{var G=ry.get(t);if(G!==void 0){var Y=Va,we=t;switch(t){case"keypress":if(Ni(a)===0)break e;case"keydown":case"keyup":Y=za;break;case"focusin":we="focus",Y=La;break;case"focusout":we="blur",Y=La;break;case"beforeblur":case"afterblur":Y=La;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Zn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=sc;break;case ey:case ty:case ny:Y=Ua;break;case iy:Y=oc;break;case"scroll":case"scrollend":Y=Zu;break;case"wheel":Y=Ba;break;case"copy":case"cut":case"paste":Y=ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ol;break;case"toggle":case"beforetoggle":Y=uc}var Te=(r&4)!==0,rt=!Te&&(t==="scroll"||t==="scrollend"),L=Te?G!==null?G+"Capture":null:G;Te=[];for(var k=q,B;k!==null;){var W=k;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||L===null||(W=Bs(k,L),W!=null&&Te.push(Ul(k,W,B))),rt)break;k=k.return}0<Te.length&&(G=new Y(G,we,null,a,X),J.push({event:G,listeners:Te}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&a!==or&&(we=a.relatedTarget||a.fromElement)&&(ir(we)||we[_t]))break e;if((Y||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(we=a.relatedTarget||a.toElement,Y=q,we=we?ir(we):null,we!==null&&(rt=u(we),Te=we.tag,we!==rt||Te!==5&&Te!==27&&Te!==6)&&(we=null)):(Y=null,we=q),Y!==we)){if(Te=Zn,W="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Te=ol,W="onPointerLeave",L="onPointerEnter",k="pointer"),rt=Y==null?G:Ri(Y),B=we==null?G:Ri(we),G=new Te(W,k+"leave",Y,a,X),G.target=rt,G.relatedTarget=B,W=null,ir(X)===q&&(Te=new Te(L,k+"enter",we,a,X),Te.target=B,Te.relatedTarget=rt,W=Te),rt=W,Y&&we)t:{for(Te=Y,L=we,k=0,B=Te;B;B=fo(B))k++;for(B=0,W=L;W;W=fo(W))B++;for(;0<k-B;)Te=fo(Te),k--;for(;0<B-k;)L=fo(L),B--;for(;k--;){if(Te===L||L!==null&&Te===L.alternate)break t;Te=fo(Te),L=fo(L)}Te=null}else Te=null;Y!==null&&Av(J,G,Y,Te,!1),we!==null&&rt!==null&&Av(J,rt,we,Te,!0)}}e:{if(G=q?Ri(q):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var pe=Hg;else if(zt(G))if(Fg)pe=aA;else{pe=rA;var Oe=iA}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&el(q.elementType)&&(pe=Hg):pe=sA;if(pe&&(pe=pe(t,q))){fr(J,pe,a,X);break e}Oe&&Oe(t,G,q),t==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Br(G,"number",G.value)}switch(Oe=q?Ri(q):window,t){case"focusin":(zt(Oe)||Oe.contentEditable==="true")&&(qa=Oe,zf=q,cl=null);break;case"focusout":cl=zf=qa=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,Zg(J,a,X);break;case"selectionchange":if(lA)break;case"keydown":case"keyup":Zg(J,a,X)}var _e;if(Mi)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else qe?Q(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(v&&a.locale!=="ko"&&(qe||be!=="onCompositionStart"?be==="onCompositionEnd"&&qe&&(_e=nl()):(Di=X,qr="value"in Di?Di.value:Di.textContent,qe=!0)),Oe=$c(q,be),0<Oe.length&&(be=new sl(be,t,null,a,X),J.push({event:be,listeners:Oe}),_e?be.data=_e:(_e=le(a),_e!==null&&(be.data=_e)))),(_e=y?jt(t,a):He(t,a))&&(be=$c(q,"onBeforeInput"),0<be.length&&(Oe=new sl("onBeforeInput","beforeinput",null,a,X),J.push({event:Oe,listeners:be}),Oe.data=_e)),FA(J,t,q,a,X)}bv(J,r)})}function Ul(t,r,a){return{instance:t,listener:r,currentTarget:a}}function $c(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Bs(t,a),h!=null&&l.unshift(Ul(t,h,d)),h=Bs(t,r),h!=null&&l.push(Ul(t,h,d))),t.tag===3)return l;t=t.return}return[]}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Av(t,r,a,l,h){for(var d=r._reactName,E=[];a!==null&&a!==l;){var b=a,N=b.alternate,q=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||q===null||(N=q,h?(q=Bs(a,d),q!=null&&E.unshift(Ul(a,q,N))):h||(q=Bs(a,d),q!=null&&E.push(Ul(a,q,N)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var QA=/\r\n?/g,XA=/\u0000|\uFFFD/g;function wv(t){return(typeof t=="string"?t:""+t).replace(QA,`
`).replace(XA,"")}function Rv(t,r){return r=wv(r),wv(t)===r}function Wc(){}function it(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Xn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Xn(t,""+l);break;case"className":Ii(t,"class",l);break;case"tabIndex":Ii(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ii(t,a,l);break;case"style":Jo(t,l,d);break;case"data":if(r!=="object"){Ii(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ma(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&it(t,r,"name",h.name,h,null),it(t,r,"formEncType",h.formEncType,h,null),it(t,r,"formMethod",h.formMethod,h,null),it(t,r,"formTarget",h.formTarget,h,null)):(it(t,r,"encType",h.encType,h,null),it(t,r,"method",h.method,h,null),it(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ma(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Wc);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ma(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),zr(t,"popover",l);break;case"xlinkActuate":tn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":tn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":tn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":tn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":tn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":tn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":tn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":tn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":tn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Mf.get(a)||a,zr(t,a,l))}}function cm(t,r,a,l,h,d){switch(a){case"style":Jo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Xn(t,l):(typeof l=="number"||typeof l=="bigint")&&Xn(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[Qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):zr(t,a,l)}}}function an(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(t,r,d,E,a,null)}}h&&it(t,r,"srcSet",a.srcSet,a,null),l&&it(t,r,"src",a.src,a,null);return;case"input":ke("invalid",t);var b=d=E=h=null,N=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":E=X;break;case"checked":N=X;break;case"defaultChecked":q=X;break;case"value":d=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:it(t,r,l,X,a,null)}}Us(t,d,b,N,q,E,h,!1),Oa(t);return;case"select":ke("invalid",t),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:it(t,r,h,b,a,null)}r=d,a=E,t.multiple=!!l,r!=null?ar(t,!!l,r,!1):a!=null&&ar(t,!!l,a,!0);return;case"textarea":ke("invalid",t),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:it(t,r,E,b,a,null)}js(t,l,h,d),Oa(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,r,N,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)ke(Ll[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:it(t,r,q,l,a,null)}return;default:if(el(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&cm(t,r,X,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&it(t,r,b,l,a,null))}function $A(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,b=null,N=null,q=null,X=null;for(Y in a){var J=a[Y];if(a.hasOwnProperty(Y)&&J!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":N=J;default:l.hasOwnProperty(Y)||it(t,r,Y,null,l,J)}}for(var G in l){var Y=l[G];if(J=a[G],l.hasOwnProperty(G)&&(Y!=null||J!=null))switch(G){case"type":d=Y;break;case"name":h=Y;break;case"checked":q=Y;break;case"defaultChecked":X=Y;break;case"value":E=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Y!==J&&it(t,r,G,Y,l,J)}}Pn(t,E,b,N,q,X,d,h);return;case"select":Y=E=b=G=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":Y=N;default:l.hasOwnProperty(d)||it(t,r,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":E=d;default:d!==N&&it(t,r,h,d,l,N)}r=b,a=E,l=Y,G!=null?ar(t,!!a,G,!1):!!l!=!!a&&(r!=null?ar(t,!!a,r,!0):ar(t,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(t,r,b,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":G=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&it(t,r,E,h,l,d)}tt(t,G,Y);return;case"option":for(var we in a)if(G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:it(t,r,we,null,l,G)}for(N in l)if(G=l[N],Y=a[N],l.hasOwnProperty(N)&&G!==Y&&(G!=null||Y!=null))switch(N){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:it(t,r,N,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)G=a[Te],a.hasOwnProperty(Te)&&G!=null&&!l.hasOwnProperty(Te)&&it(t,r,Te,null,l,G);for(q in l)if(G=l[q],Y=a[q],l.hasOwnProperty(q)&&G!==Y&&(G!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:it(t,r,q,G,l,Y)}return;default:if(el(r)){for(var rt in a)G=a[rt],a.hasOwnProperty(rt)&&G!==void 0&&!l.hasOwnProperty(rt)&&cm(t,r,rt,void 0,l,G);for(X in l)G=l[X],Y=a[X],!l.hasOwnProperty(X)||G===Y||G===void 0&&Y===void 0||cm(t,r,X,G,l,Y);return}}for(var L in a)G=a[L],a.hasOwnProperty(L)&&G!=null&&!l.hasOwnProperty(L)&&it(t,r,L,null,l,G);for(J in l)G=l[J],Y=a[J],!l.hasOwnProperty(J)||G===Y||G==null&&Y==null||it(t,r,J,G,l,Y)}var hm=null,fm=null;function Zc(t){return t.nodeType===9?t:t.ownerDocument}function Iv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function dm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var mm=null;function WA(){var t=window.event;return t&&t.type==="popstate"?t===mm?!1:(mm=t,!0):(mm=null,!1)}var Dv=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,Nv=typeof Promise=="function"?Promise:void 0,JA=typeof queueMicrotask=="function"?queueMicrotask:typeof Nv<"u"?function(t){return Nv.resolve(null).then(t).catch(ew)}:Dv;function ew(t){setTimeout(function(){throw t})}function rs(t){return t==="head"}function xv(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&jl(E.documentElement),a&2&&jl(E.body),a&4)for(a=E.head,jl(a),E=a.firstChild;E;){var b=E.nextSibling,N=E.nodeName;E[di]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=b}}if(h===0){t.removeChild(d),Yl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Yl(r)}function pm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pm(a),jr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function tw(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[di])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=_i(t.nextSibling),t===null)break}return null}function nw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=_i(t.nextSibling),t===null))return null;return t}function gm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function iw(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function _i(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var ym=null;function Ov(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function Mv(t,r,a){switch(r=Zc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function jl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);jr(t)}var si=new Map,Vv=new Set;function Jc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wr=te.d;te.d={f:rw,r:sw,D:aw,C:ow,L:lw,m:uw,X:hw,S:cw,M:fw};function rw(){var t=wr.f(),r=Fc();return t||r}function sw(t){var r=wi(t);r!==null&&r.tag===5&&r.type==="form"?e_(r):wr.r(t)}var mo=typeof document>"u"?null:document;function kv(t,r,a){var l=mo;if(l&&typeof r=="string"&&r){var h=Dt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Vv.has(h)||(Vv.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),an(r,"link",t),bt(r),l.head.appendChild(r)))}}function aw(t){wr.D(t),kv("dns-prefetch",t,null)}function ow(t,r){wr.C(t,r),kv("preconnect",t,r)}function lw(t,r,a){wr.L(t,r,a);var l=mo;if(l&&t&&r){var h='link[rel="preload"][as="'+Dt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Dt(a.imageSizes)+'"]')):h+='[href="'+Dt(t)+'"]';var d=h;switch(r){case"style":d=po(t);break;case"script":d=go(t)}si.has(d)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),si.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zl(d))||r==="script"&&l.querySelector(Bl(d))||(r=l.createElement("link"),an(r,"link",t),bt(r),l.head.appendChild(r)))}}function uw(t,r){wr.m(t,r);var a=mo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Dt(l)+'"][href="'+Dt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=go(t)}if(!si.has(d)&&(t=_({rel:"modulepreload",href:t},r),si.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(d)))return}l=a.createElement("link"),an(l,"link",t),bt(l),a.head.appendChild(l)}}}function cw(t,r,a){wr.S(t,r,a);var l=mo;if(l&&t){var h=En(l).hoistableStyles,d=po(t);r=r||"default";var E=h.get(d);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(zl(d)))b.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=si.get(d))&&_m(t,a);var N=E=l.createElement("link");bt(N),an(N,"link",t),N._p=new Promise(function(q,X){N.onload=q,N.onerror=X}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,eh(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:b},h.set(d,E)}}}function hw(t,r){wr.X(t,r);var a=mo;if(a&&t){var l=En(a).hoistableScripts,h=go(t),d=l.get(h);d||(d=a.querySelector(Bl(h)),d||(t=_({src:t,async:!0},r),(r=si.get(h))&&vm(t,r),d=a.createElement("script"),bt(d),an(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function fw(t,r){wr.M(t,r);var a=mo;if(a&&t){var l=En(a).hoistableScripts,h=go(t),d=l.get(h);d||(d=a.querySelector(Bl(h)),d||(t=_({src:t,async:!0,type:"module"},r),(r=si.get(h))&&vm(t,r),d=a.createElement("script"),bt(d),an(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Pv(t,r,a,l){var h=(h=ye.current)?Jc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=po(a.href),a=En(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=po(a.href);var d=En(h).hoistableStyles,E=d.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=h.querySelector(zl(t)))&&!d._p&&(E.instance=d,E.state.loading=5),si.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},si.set(t,a),d||dw(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=go(a),a=En(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function po(t){return'href="'+Dt(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function Lv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function dw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),an(r,"link",a),bt(r),t.head.appendChild(r))}function go(t){return'[src="'+Dt(t)+'"]'}function Bl(t){return"script[async]"+t}function Uv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(l)return r.instance=l,bt(l),l;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),bt(l),an(l,"style",h),eh(l,a.precedence,t),r.instance=l;case"stylesheet":h=po(a.href);var d=t.querySelector(zl(h));if(d)return r.state.loading|=4,r.instance=d,bt(d),d;l=Lv(a),(h=si.get(h))&&_m(l,h),d=(t.ownerDocument||t).createElement("link"),bt(d);var E=d;return E._p=new Promise(function(b,N){E.onload=b,E.onerror=N}),an(d,"link",l),r.state.loading|=4,eh(d,a.precedence,t),r.instance=d;case"script":return d=go(a.src),(h=t.querySelector(Bl(d)))?(r.instance=h,bt(h),h):(l=a,(h=si.get(d))&&(l=_({},a),vm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),an(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,eh(l,a.precedence,t));return r.instance}function eh(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===r)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function _m(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function vm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var th=null;function jv(t,r,a){if(th===null){var l=new Map,h=th=new Map;h.set(a,l)}else h=th,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[di]||d[et]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(r)||"";E=t+E;var b=l.get(E);b?b.push(d):l.set(E,[d])}}return l}function zv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function mw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Bv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ql=null;function pw(){}function gw(t,r,a){if(ql===null)throw Error(s(475));var l=ql;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=po(a.href),d=t.querySelector(zl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=nh.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,bt(d);return}d=t.ownerDocument||t,a=Lv(a),(h=si.get(h))&&_m(a,h),d=d.createElement("link"),bt(d);var E=d;E._p=new Promise(function(b,N){E.onload=b,E.onerror=N}),an(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=nh.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function yw(){if(ql===null)throw Error(s(475));var t=ql;return t.stylesheets&&t.count===0&&Em(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&Em(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function nh(){if(this.count--,this.count===0){if(this.stylesheets)Em(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ih=null;function Em(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ih=new Map,r.forEach(_w,t),ih=null,nh.call(t))}function _w(t,r){if(!(r.state.loading&4)){var a=ih.get(t);if(a)var l=a.get(null);else{a=new Map,ih.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=nh.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Hl={$$typeof:ie,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function vw(t,r,a,l,h,d,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function qv(t,r,a,l,h,d,E,b,N,q,X,J){return t=new vw(t,r,a,E,b,N,q,J),r=1,d===!0&&(r|=24),d=Un(3,null,null,r),t.current=d,d.stateNode=t,r=td(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},sd(d),t}function Hv(t){return t?(t=Ka,t):Ka}function Fv(t,r,a,l,h,d){h=Hv(h),l.context===null?l.context=h:l.pendingContext=h,l=Gr(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Kr(t,l,r),a!==null&&(Hn(a,t,r),vl(a,t,r))}function Gv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function Tm(t,r){Gv(t,r),(t=t.alternate)&&Gv(t,r)}function Kv(t){if(t.tag===13){var r=Ga(t,67108864);r!==null&&Hn(r,t,67108864),Tm(t,67108864)}}var rh=!0;function Ew(t,r,a,l){var h=K.T;K.T=null;var d=te.p;try{te.p=2,bm(t,r,a,l)}finally{te.p=d,K.T=h}}function Tw(t,r,a,l){var h=K.T;K.T=null;var d=te.p;try{te.p=8,bm(t,r,a,l)}finally{te.p=d,K.T=h}}function bm(t,r,a,l){if(rh){var h=Sm(l);if(h===null)um(t,r,l,sh,a),Qv(t,l);else if(Sw(h,t,r,a,l))l.stopPropagation();else if(Qv(t,l),r&4&&-1<bw.indexOf(t)){for(;h!==null;){var d=wi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=vn(d.pendingLanes);if(E!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var N=1<<31-yt(E);b.entanglements[1]|=N,E&=~N}ji(d),(Ze&6)===0&&(qc=yn()+500,Pl(0))}}break;case 13:b=Ga(d,2),b!==null&&Hn(b,d,2),Fc(),Tm(d,2)}if(d=Sm(l),d===null&&um(t,r,l,sh,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else um(t,r,l,null,a)}}function Sm(t){return t=$n(t),Am(t)}var sh=null;function Am(t){if(sh=null,t=ir(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return sh=t,null}function Yv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ra()){case $i:return 2;case _n:return 8;case Yn:case Pr:return 32;case Wi:return 268435456;default:return 32}default:return 32}}var wm=!1,ss=null,as=null,os=null,Fl=new Map,Gl=new Map,ls=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qv(t,r){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function Kl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=wi(r),r!==null&&Kv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Sw(t,r,a,l,h){switch(r){case"focusin":return ss=Kl(ss,t,r,a,l,h),!0;case"dragenter":return as=Kl(as,t,r,a,l,h),!0;case"mouseover":return os=Kl(os,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Fl.set(d,Kl(Fl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Gl.set(d,Kl(Gl.get(d)||null,t,r,a,l,h)),!0}return!1}function Xv(t){var r=ir(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,hi(t.priority,function(){if(a.tag===13){var l=qn();l=Tt(l);var h=Ga(a,l);h!==null&&Hn(h,a,l),Tm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ah(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=Sm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);or=l,a.target.dispatchEvent(l),or=null}else return r=wi(a),r!==null&&Kv(r),t.blockedOn=a,!1;r.shift()}return!0}function $v(t,r,a){ah(t)&&a.delete(r)}function Aw(){wm=!1,ss!==null&&ah(ss)&&(ss=null),as!==null&&ah(as)&&(as=null),os!==null&&ah(os)&&(os=null),Fl.forEach($v),Gl.forEach($v)}function oh(t,r){t.blockedOn===r&&(t.blockedOn=null,wm||(wm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Aw)))}var lh=null;function Wv(t){lh!==t&&(lh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){lh===t&&(lh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(Am(l||a)===null)continue;break}var d=wi(a);d!==null&&(t.splice(r,3),r-=3,Ad(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Yl(t){function r(N){return oh(N,t)}ss!==null&&oh(ss,t),as!==null&&oh(as,t),os!==null&&oh(os,t),Fl.forEach(r),Gl.forEach(r);for(var a=0;a<ls.length;a++){var l=ls[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ls.length&&(a=ls[0],a.blockedOn===null);)Xv(a),a.blockedOn===null&&ls.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Qe]||null;if(typeof d=="function")E||Wv(a);else if(E){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Qe]||null)b=E.formAction;else if(Am(h)!==null)continue}else b=E.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Wv(a)}}}function Rm(t){this._internalRoot=t}uh.prototype.render=Rm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=qn();Fv(a,l,t,r,null,null)},uh.prototype.unmount=Rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Fv(t.current,2,null,t,null,null),Fc(),r[_t]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ut();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ls.length&&r!==0&&r<ls[a].priority;a++);ls.splice(a,0,t),a===0&&Xv(t)}};var Zv=e.version;if(Zv!=="19.1.1")throw Error(s(527,Zv,"19.1.1"));te.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var ww={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{ht=ch.inject(ww),Pe=ch}catch{}}return Xl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=m_,d=p_,E=g_,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=qv(t,1,!1,null,null,a,l,h,d,E,b,null),t[_t]=r.current,lm(t),new Rm(r)},Xl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=m_,E=p_,b=g_,N=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),r=qv(t,1,!0,r,a??null,l,h,d,E,b,N,q),r.context=Hv(null),a=r.current,l=qn(),l=Tt(l),h=Gr(l),h.callback=null,Kr(a,h,l),a=l,r.current.lanes=a,at(r,a),ji(r),t[_t]=r.current,lm(t),new uh(r)},Xl.version="19.1.1",Xl}var lE;function kw(){if(lE)return Dm.exports;lE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Dm.exports=Vw(),Dm.exports}var Pw=kw();const ob=U.createContext(void 0),Ru=()=>{const i=U.useContext(ob);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i},Lw=()=>{const{currentUser:i,logout:e}=Ru();return R.jsx("header",{className:"app-header",children:R.jsxs("div",{className:"header-content",children:[R.jsx("div",{className:"header-logo",children:R.jsx("h1",{children:"点検記録アプリ"})}),R.jsx("div",{className:"header-nav",children:i&&R.jsxs("div",{className:"user-info",children:[R.jsx("span",{children:i.displayName||i.email}),R.jsx("button",{onClick:e,className:"logout-button",children:"ログアウト"})]})})]})})},Uw=()=>{};var uE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,g=o+2<i.length,p=g?i[o+2]:0,_=u>>2,T=(u&3)<<4|m>>4;let A=(m&15)<<2|p>>6,x=p&63;g||(x=64,f||(A=64)),s.push(n[_],n[T],n[A],n[x])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(lb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):jw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const p=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new zw;const A=u<<2|m>>4;if(s.push(A),p!==64){const x=m<<4&240|p>>2;if(s.push(x),T!==64){const z=p<<6&192|T;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bw=function(i){const e=lb(i);return ub.encodeByteArray(e,!0)},Nh=function(i){return Bw(i).replace(/\./g,"")},cb=function(i){try{return ub.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=()=>qw().__FIREBASE_DEFAULTS__,Fw=()=>{if(typeof process>"u"||typeof uE>"u")return;const i=uE.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Gw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&cb(i[1]);return e&&JSON.parse(e)},ef=()=>{try{return Uw()||Hw()||Fw()||Gw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},hb=i=>ef()?.emulatorHosts?.[i],fb=i=>{const e=hb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},db=()=>ef()?.config,mb=i=>ef()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Np(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Nh(JSON.stringify(n)),Nh(JSON.stringify(f)),""].join(".")}const iu={};function Qw(){const i={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?i.emulator.push(e):i.prod.push(e);return i}function Xw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let cE=!1;function xp(i,e){if(typeof window>"u"||typeof document>"u"||!ba(window.location.host)||iu[i]===e||iu[i]||cE)return;iu[i]=e;function n(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=Qw().prod.length>0;function f(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{cE=!0,f()},A}function _(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=Xw(s),x=n("text"),z=document.getElementById(x)||document.createElement("span"),F=n("learnmore"),H=document.getElementById(F)||document.createElement("a"),ne=n("preprendIcon"),se=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ie=A.element;m(ie),_(H,F);const he=p();g(se,ne),ie.append(se,z,H,he),document.body.appendChild(ie)}u?(z.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $w(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function Ww(){const i=ef()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function e1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function t1(){const i=pn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function n1(){return!Ww()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function i1(){try{return typeof indexedDB=="object"}catch{return!1}}function r1(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="FirebaseError";class Gn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=s1,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?a1(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Gn(o,m,s)}}function a1(i,e){return i.replace(o1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const o1=/\{\$([^}]+)}/g;function l1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ma(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(hE(u)&&hE(f)){if(!ma(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function hE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $l(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Wl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function u1(i,e){const n=new c1(i,e);return n.subscribe.bind(n)}class c1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");h1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Mm),o.error===void 0&&(o.error=Mm),o.complete===void 0&&(o.complete=Mm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(i){return i&&i._delegate?i._delegate:i}class Es{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Kw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m1(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:d1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d1(i){return i===ua?void 0:i}function m1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new f1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Le||(Le={}));const g1={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},y1=Le.INFO,_1={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},v1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=_1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=y1,this._logHandler=v1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const E1=(i,e)=>e.some(n=>i instanceof n);let fE,dE;function T1(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b1(){return dE||(dE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pb=new WeakMap,$m=new WeakMap,gb=new WeakMap,Vm=new WeakMap,Mp=new WeakMap;function S1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(gs(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&pb.set(n,i)}).catch(()=>{}),Mp.set(e,i),e}function A1(i){if($m.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});$m.set(i,e)}let Wm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return $m.get(i);if(e==="objectStoreNames")return i.objectStoreNames||gb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function w1(i){Wm=i(Wm)}function R1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(km(this),e,...n);return gb.set(s,e.sort?e.sort():[e]),gs(s)}:b1().includes(i)?function(...e){return i.apply(km(this),e),gs(pb.get(this))}:function(...e){return gs(i.apply(km(this),e))}}function I1(i){return typeof i=="function"?R1(i):(i instanceof IDBTransaction&&A1(i),E1(i,T1())?new Proxy(i,Wm):i)}function gs(i){if(i instanceof IDBRequest)return S1(i);if(Vm.has(i))return Vm.get(i);const e=I1(i);return e!==i&&(Vm.set(i,e),Mp.set(e,i)),e}const km=i=>Mp.get(i);function C1(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=gs(f);return s&&f.addEventListener("upgradeneeded",g=>{s(gs(f.result),g.oldVersion,g.newVersion,gs(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const D1=["get","getKey","getAll","getAllKeys","count"],N1=["put","add","delete","clear"],Pm=new Map;function mE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Pm.get(e))return Pm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=N1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||D1.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(m.shift())),(await Promise.all([p[n](...m),o&&g.done]))[0]};return Pm.set(e,u),u}w1(i=>({...i,get:(e,n,s)=>mE(e,n)||i.get(e,n,s),has:(e,n)=>!!mE(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(O1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function O1(i){return i.getComponent()?.type==="VERSION"}const Zm="@firebase/app",pE="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new Op("@firebase/app"),M1="@firebase/app-compat",V1="@firebase/analytics-compat",k1="@firebase/analytics",P1="@firebase/app-check-compat",L1="@firebase/app-check",U1="@firebase/auth",j1="@firebase/auth-compat",z1="@firebase/database",B1="@firebase/data-connect",q1="@firebase/database-compat",H1="@firebase/functions",F1="@firebase/functions-compat",G1="@firebase/installations",K1="@firebase/installations-compat",Y1="@firebase/messaging",Q1="@firebase/messaging-compat",X1="@firebase/performance",$1="@firebase/performance-compat",W1="@firebase/remote-config",Z1="@firebase/remote-config-compat",J1="@firebase/storage",eR="@firebase/storage-compat",tR="@firebase/firestore",nR="@firebase/ai",iR="@firebase/firestore-compat",rR="firebase",sR="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]",aR={[Zm]:"fire-core",[M1]:"fire-core-compat",[k1]:"fire-analytics",[V1]:"fire-analytics-compat",[L1]:"fire-app-check",[P1]:"fire-app-check-compat",[U1]:"fire-auth",[j1]:"fire-auth-compat",[z1]:"fire-rtdb",[B1]:"fire-data-connect",[q1]:"fire-rtdb-compat",[H1]:"fire-fn",[F1]:"fire-fn-compat",[G1]:"fire-iid",[K1]:"fire-iid-compat",[Y1]:"fire-fcm",[Q1]:"fire-fcm-compat",[X1]:"fire-perf",[$1]:"fire-perf-compat",[W1]:"fire-rc",[Z1]:"fire-rc-compat",[J1]:"fire-gcs",[eR]:"fire-gcs-compat",[tR]:"fire-fst",[iR]:"fire-fst-compat",[nR]:"fire-vertex","fire-js":"fire-js",[rR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,oR=new Map,ep=new Map;function gE(i,e){try{i.container.addComponent(e)}catch(n){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function pa(i){const e=i.name;if(ep.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,i);for(const n of xh.values())gE(n,i);for(const n of oR.values())gE(n,i);return!0}function tf(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function xn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Iu("app","Firebase",lR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=sR;function yb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Jm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(n||(n=db()),!n)throw ys.create("no-options");const u=xh.get(o);if(u){if(ma(n,u.options)&&ma(s,u.config))return u;throw ys.create("duplicate-app",{appName:o})}const f=new p1(o);for(const g of ep.values())f.addComponent(g);const m=new uR(n,s,f);return xh.set(o,m),m}function Vp(i=Jm){const e=xh.get(i);if(!e&&i===Jm&&db())return yb();if(!e)throw ys.create("no-app",{appName:i});return e}function Bi(i,e,n){let s=aR[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(f.join(" "));return}pa(new Es(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firebase-heartbeat-database",hR=1,fu="firebase-heartbeat-store";let Lm=null;function _b(){return Lm||(Lm=C1(cR,hR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(i=>{throw ys.create("idb-open",{originalErrorMessage:i.message})})),Lm}async function fR(i){try{const n=(await _b()).transaction(fu),s=await n.objectStore(fu).get(vb(i));return await n.done,s}catch(e){if(e instanceof Gn)xr.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e?.message});xr.warn(n.message)}}}async function yE(i,e){try{const s=(await _b()).transaction(fu,"readwrite");await s.objectStore(fu).put(e,vb(i)),await s.done}catch(n){if(n instanceof Gn)xr.warn(n.message);else{const s=ys.create("idb-set",{originalErrorMessage:n?.message});xr.warn(s.message)}}}function vb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1024,mR=30;class pR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_E();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>mR){const o=_R(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_E(),{heartbeatsToSend:n,unsentEntries:s}=gR(this._heartbeatsCache.heartbeats),o=Nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return xr.warn(e),""}}}function _E(){return new Date().toISOString().substring(0,10)}function gR(i,e=dR){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),vE(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),vE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return i1()?r1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return yE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vE(i){return Nh(JSON.stringify({version:2,heartbeats:i})).length}function _R(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(i){pa(new Es("platform-logger",e=>new x1(e),"PRIVATE")),pa(new Es("heartbeat",e=>new pR(e),"PRIVATE")),Bi(Zm,pE,i),Bi(Zm,pE,"esm2020"),Bi("fire-js","")}vR("");function Eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ER=Eb,Tb=new Iu("auth","Firebase",Eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Op("@firebase/auth");function TR(i,...e){Oh.logLevel<=Le.WARN&&Oh.warn(`Auth (${jo}): ${i}`,...e)}function vh(i,...e){Oh.logLevel<=Le.ERROR&&Oh.error(`Auth (${jo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(i,...e){throw Pp(i,...e)}function Ei(i,...e){return Pp(i,...e)}function kp(i,e,n){const s={...ER(),[e]:n};return new Iu("auth","Firebase",s).create(e,{appName:i.name})}function Dr(i){return kp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bR(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&li(i,"argument-error"),kp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Tb.create(i,...e)}function Se(i,e,...n){if(!i)throw Pp(e,...n)}function Ir(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vh(e),new Error(e)}function Or(i,e){i||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(){return typeof self<"u"&&self.location?.href||""}function SR(){return EE()==="http:"||EE()==="https:"}function EE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SR()||Jw()||"connection"in navigator)?navigator.onLine:!0}function wR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Or(n>e,"Short delay should be less than long delay!"),this.isMobile=$w()||e1()}get(){return AR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(i,e){Or(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CR=new Du(3e4,6e4);function Cs(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function kr(i,e,n,s,o={}){return Sb(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Cu({key:i.config.apiKey,...f}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:g,...u};return Zw()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&ba(i.emulatorConfig.host)&&(p.credentials="include"),bb.fetch()(await Ab(i,i.config.apiHost,n,m),p)})}async function Sb(i,e,n){i._canInitEmulator=!1;const s={...RR,...e};try{const o=new NR(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw hh(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw hh(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw hh(i,"user-disabled",f);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw kp(i,_,p);li(i,_)}}catch(o){if(o instanceof Gn)throw o;li(i,"network-request-failed",{message:String(o)})}}async function Nu(i,e,n,s,o={}){const u=await kr(i,e,n,s,o);return"mfaPendingCredential"in u&&li(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ab(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Lp(i.config,o):`${i.config.apiScheme}://${o}`;return IR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function DR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ei(this.auth,"network-request-failed")),CR.get())})}}function hh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ei(i,e,s);return o.customData._tokenResponse=n,o}function TE(i){return i!==void 0&&i.enterprise!==void 0}class xR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OR(i,e){return kr(i,"GET","/v2/recaptchaConfig",Cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(i,e){return kr(i,"POST","/v1/accounts:delete",e)}async function Mh(i,e){return kr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VR(i,e=!1){const n=ct(i),s=await n.getIdToken(e),o=Up(s);Se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:ru(Um(o.auth_time)),issuedAtTime:ru(Um(o.iat)),expirationTime:ru(Um(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Um(i){return Number(i)*1e3}function Up(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=cb(n);return o?JSON.parse(o):(vh("Failed to decode base64 JWT payload"),null)}catch(o){return vh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function bE(i){const e=Up(i);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Gn&&kR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function kR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(i){const e=i.auth,n=await i.getIdToken(),s=await No(i,Mh(e,{idToken:n}));Se(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?wb(o.providerUserInfo):[],f=UR(i.providerData,u),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!f?.length,p=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new np(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,_)}async function LR(i){const e=ct(i);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function wb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(i,e){const n=await Sb(i,{},async()=>{const s=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Ab(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&ba(i.emulatorConfig.host)&&(g.credentials="include"),bb.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zR(i,e){return kr(i,"POST","/v2/accounts:revokeToken",Cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=bE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await jR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new To;return s&&(Se(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Se(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(i,e){Se(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new PR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new np(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VR(this,e)}reload(){return LR(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await No(this,MR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:x,providerData:z,stsTokenManager:F}=n;Se(T&&F,e,"internal-error");const H=To.fromJSON(this.name,F);Se(typeof T=="string",e,"internal-error"),cs(s,e.name),cs(o,e.name),Se(typeof A=="boolean",e,"internal-error"),Se(typeof x=="boolean",e,"internal-error"),cs(u,e.name),cs(f,e.name),cs(m,e.name),cs(g,e.name),cs(p,e.name),cs(_,e.name);const ne=new vi({uid:T,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:x,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:H,createdAt:p,lastLoginAt:_});return z&&Array.isArray(z)&&(ne.providerData=z.map(se=>({...se}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,n,s=!1){const o=new To;o.updateFromServerResponse(n);const u=new vi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Se(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?wb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new To;m.updateFromIdToken(s);const g=new vi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new np(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new Map;function Cr(i){Or(i instanceof Function,"Expected a class definition");let e=SE.get(i);return e?(Or(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,SE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Rb.type="NONE";const AE=Rb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i,e,n){return`firebase:${i}:${e}:${n}`}class bo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Eh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mh(this.auth,{idToken:e}).catch(()=>{});return n?vi._fromGetAccountInfoResponse(this.auth,n,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new bo(Cr(AE),e,s);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||Cr(AE);const f=Eh(s,e.config.apiKey,e.name);let m=null;for(const p of n)try{const _=await p._get(f);if(_){let T;if(typeof _=="string"){const A=await Mh(e,{idToken:_}).catch(()=>{});if(!A)break;T=await vi._fromGetAccountInfoResponse(e,A,_)}else T=vi._fromJSON(e,_);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new bo(u,e,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new bo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ob(e))return"Blackberry";if(Mb(e))return"Webos";if(Cb(e))return"Safari";if((e.includes("chrome/")||Db(e))&&!e.includes("edge/"))return"Chrome";if(xb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function Ib(i=pn()){return/firefox\//i.test(i)}function Cb(i=pn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Db(i=pn()){return/crios\//i.test(i)}function Nb(i=pn()){return/iemobile/i.test(i)}function xb(i=pn()){return/android/i.test(i)}function Ob(i=pn()){return/blackberry/i.test(i)}function Mb(i=pn()){return/webos/i.test(i)}function jp(i=pn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function BR(i=pn()){return jp(i)&&!!window.navigator?.standalone}function qR(){return t1()&&document.documentMode===10}function Vb(i=pn()){return jp(i)||xb(i)||Mb(i)||Ob(i)||/windows phone/i.test(i)||Nb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(i,e=[]){let n;switch(i){case"Browser":n=wE(pn());break;case"Worker":n=`${wE(pn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(i,e={}){return kr(i,"GET","/v2/passwordPolicy",Cs(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=6;class KR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??GR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RE(this),this.idTokenSubscription=new RE(this),this.beforeStateQueue=new HR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mh(this,{idToken:e}),s=await vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Dr(this));const n=e?ct(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FR(this),n=new KR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Iu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await zR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&TR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ds(i){return ct(i)}class RE{constructor(e){this.auth=e,this.observer=null,this.addObserver=u1(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QR(i){nf=i}function Pb(i){return nf.loadJS(i)}function XR(){return nf.recaptchaEnterpriseScript}function $R(){return nf.gapiScript}function WR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class ZR{constructor(){this.enterprise=new JR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class JR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const eI="recaptcha-enterprise",Lb="NO_RECAPTCHA";class tI{constructor(e){this.type=eI,this.auth=Ds(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{OR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new xR(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,f(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;TE(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(p=>{f(p)}).catch(()=>{f(Lb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZR().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&TE(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=XR();g.length!==0&&(g+=m),Pb(g).then(()=>{o(m,u,f)}).catch(p=>{f(p)})}}).catch(m=>{f(m)})})}}async function IE(i,e,n,s=!1,o=!1){const u=new tI(i);let f;if(o)f=Lb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function ip(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await IE(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await IE(i,e,n,n==="getOobCode");return s(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(i,e){const n=tf(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ma(u,e??{}))return o;li(o,"already-initialized")}return n.initialize({options:e})}function iI(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Cr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function rI(i,e,n){const s=Ds(i);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Ub(e),{host:f,port:m}=sI(e),g=m===null?"":`:${m}`,p={url:`${u}//${f}${g}/`},_=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(ma(p,s.config.emulator)&&ma(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,ba(f)?(Np(`${u}//${f}${g}`),xp("Auth",!0)):aI()}function Ub(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function sI(i){const e=Ub(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:CE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:CE(f)}}}function CE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function aI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,n){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function oI(i,e){return kr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(i,e){return Nu(i,"POST","/v1/accounts:signInWithPassword",Cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(i,e){return Nu(i,"POST","/v1/accounts:signInWithEmailLink",Cs(i,e))}async function cI(i,e){return Nu(i,"POST","/v1/accounts:signInWithEmailLink",Cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends zp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new du(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new du(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,n,"signInWithPassword",lI);case"emailLink":return uI(e,{email:this._email,oobCode:this._password});default:li(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,s,"signUpPassword",oI);case"emailLink":return cI(e,{idToken:n,email:this._email,oobCode:this._password});default:li(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(i,e){return Nu(i,"POST","/v1/accounts:signInWithIdp",Cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="http://localhost";class ga extends zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ga(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,So(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:hI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dI(i){const e=$l(Wl(i)).link,n=e?$l(Wl(e)).deep_link_id:null,s=$l(Wl(i)).deep_link_id;return(s?$l(Wl(s)).link:null)||s||n||e||i}class Bp{constructor(e){const n=$l(Wl(e)),s=n.apiKey??null,o=n.oobCode??null,u=fI(n.mode??null);Se(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=dI(e);try{return new Bp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Bp.parseLink(n);return Se(s,"argument-error"),du._fromEmailAndCode(e,s.code,s.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends qp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends xu{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Rr.credential(n,s)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends xu{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends xu{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ms.credential(n,s)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(i,e){return Nu(i,"POST","/v1/accounts:signUp",Cs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await vi._fromIdTokenResponse(e,s,o),f=DE(s);return new ya({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=DE(s);return new ya({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function DE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Gn{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new kh(e,n,s,o)}}function jb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(i,u,e,s):u})}async function pI(i,e,n=!1){const s=await No(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ya._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(i,e,n=!1){const{auth:s}=i;if(xn(s.app))return Promise.reject(Dr(s));const o="reauthenticate";try{const u=await No(i,jb(s,o,e,i),n);Se(u.idToken,s,"internal-error");const f=Up(u.idToken);Se(f,s,"internal-error");const{sub:m}=f;return Se(i.uid===m,s,"user-mismatch"),ya._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&li(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(i,e,n=!1){if(xn(i.app))return Promise.reject(Dr(i));const s="signIn",o=await jb(i,s,e),u=await ya._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function yI(i,e){return zb(Ds(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(i){const e=Ds(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _I(i,e,n){if(xn(i.app))return Promise.reject(Dr(i));const s=Ds(i),f=await ip(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mI).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Bb(i),g}),m=await ya._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function vI(i,e,n){return xn(i.app)?Promise.reject(Dr(i)):yI(ct(i),zo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Bb(i),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(i,e){return kr(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(i,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=ct(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await No(s,EI(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function bI(i,e,n,s){return ct(i).onIdTokenChanged(e,n,s)}function SI(i,e,n){return ct(i).beforeAuthStateChanged(e,n)}function AI(i,e,n,s){return ct(i).onAuthStateChanged(e,n,s)}function wI(i){return ct(i).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=1e3,II=10;class Hb extends qb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);qR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,II):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},RI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hb.type="LOCAL";const CI=Hb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb extends qb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Fb.type="SESSION";const Gb=Fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new rf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async p=>p(n.origin,u)),g=await DI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const p=Hp("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function xI(i){qi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function OI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MI(){return navigator?.serviceWorker?.controller||null}function VI(){return Kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",kI=1,Lh="firebaseLocalStorage",Qb="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sf(i,e){return i.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function PI(){const i=indexedDB.deleteDatabase(Yb);return new Ou(i).toPromise()}function rp(){const i=indexedDB.open(Yb,kI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Lh,{keyPath:Qb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Lh)?e(s):(s.close(),await PI(),e(await rp()))})})}async function NE(i,e,n){const s=sf(i,!0).put({[Qb]:e,value:n});return new Ou(s).toPromise()}async function LI(i,e){const n=sf(i,!1).get(e),s=await new Ou(n).toPromise();return s===void 0?null:s.value}function xE(i,e){const n=sf(i,!0).delete(e);return new Ou(n).toPromise()}const UI=800,jI=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>jI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(VI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await OI(),!this.activeServiceWorker)return;this.sender=new NI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rp();return await NE(e,Ph,"1"),await xE(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>NE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>LI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=sf(o,!1).getAll();return new Ou(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const zI=Xb;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(i,e){return e?Cr(e):(Se(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BI(i){return zb(i.auth,new Fp(i),i.bypassAuthState)}function qI(i){const{auth:e,user:n}=i;return Se(n,e,"internal-error"),gI(n,new Fp(i),i.bypassAuthState)}async function HI(i){const{auth:e,user:n}=i;return Se(n,e,"internal-error"),pI(n,new Fp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BI;case"linkViaPopup":case"linkViaRedirect":return HI;case"reauthViaPopup":case"reauthViaRedirect":return qI;default:li(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Du(2e3,1e4);async function GI(i,e,n){if(xn(i.app))return Promise.reject(Ei(i,"operation-not-supported-in-this-environment"));const s=Ds(i);bR(i,e,qp);const o=$b(s,n);return new ca(s,"signInViaPopup",e,o).executeNotNull()}class ca extends Wb{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FI.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="pendingRedirect",Th=new Map;class YI extends Wb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const s=await QI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QI(i,e){const n=WI(e),s=$I(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function XI(i,e){Th.set(i._key(),e)}function $I(i){return Cr(i._redirectPersistence)}function WI(i){return Eh(KI,i.config.apiKey,i.name)}async function ZI(i,e,n=!1){if(xn(i.app))return Promise.reject(Dr(i));const s=Ds(i),o=$b(s,e),f=await new YI(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=600*1e3;class eC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Zb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ei(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JI&&this.cachedEventUids.clear(),this.cachedEventUids.has(OE(e))}saveEventToCache(e){this.cachedEventUids.add(OE(e)),this.lastProcessedEventTime=Date.now()}}function OE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Zb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function tC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(i,e={}){return kr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rC=/^https?/;async function sC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await nC(i);for(const n of e)try{if(aC(n))return}catch{}li(i,"unauthorized-domain")}function aC(i){const e=tp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!rC.test(n))return!1;if(iC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Du(3e4,6e4);function ME(){const i=qi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function lC(i){return new Promise((e,n)=>{function s(){ME(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ME(),n(Ei(i,"network-request-failed"))},timeout:oC.get()})}if(qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qi().gapi?.load)s();else{const o=WR("iframefcb");return qi()[o]=()=>{gapi.load?s():n(Ei(i,"network-request-failed"))},Pb(`${$R()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw bh=null,e})}let bh=null;function uC(i){return bh=bh||lC(i),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Du(5e3,15e3),hC="__/auth/iframe",fC="emulator/auth/iframe",dC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pC(i){const e=i.config;Se(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Lp(e,fC):`https://${i.config.authDomain}/${hC}`,s={apiKey:e.apiKey,appName:i.name,v:jo},o=mC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Cu(s).slice(1)}`}async function gC(i){const e=await uC(i),n=qi().gapi;return Se(n,i,"internal-error"),e.open({where:document.body,url:pC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Ei(i,"network-request-failed"),m=qi().setTimeout(()=>{u(f)},cC.get());function g(){qi().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_C=500,vC=600,EC="_blank",TC="http://localhost";class VE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bC(i,e,n,s=_C,o=vC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...yC,width:s.toString(),height:o.toString(),top:u,left:f},p=pn().toLowerCase();n&&(m=Db(p)?EC:n),Ib(p)&&(e=e||TC,g.scrollbars="yes");const _=Object.entries(g).reduce((A,[x,z])=>`${A}${x}=${z},`,"");if(BR(p)&&m!=="_self")return SC(e||"",m),new VE(null);const T=window.open(e||"",m,_);Se(T,i,"popup-blocked");try{T.focus()}catch{}return new VE(T)}function SC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="__/auth/handler",wC="emulator/auth/handler",RC=encodeURIComponent("fac");async function kE(i,e,n,s,o,u){Se(i.config.authDomain,i,"auth-domain-config-required"),Se(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:jo,eventId:o};if(e instanceof qp){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",l1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))f[_]=T}if(e instanceof xu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await i._getAppCheckToken(),p=g?`#${RC}=${encodeURIComponent(g)}`:"";return`${IC(i)}?${Cu(m).slice(1)}${p}`}function IC({config:i}){return i.emulator?Lp(i,wC):`https://${i.authDomain}/${AC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class CC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=ZI,this._overrideRedirectResult=XI}async _openPopup(e,n,s,o){Or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await kE(e,n,s,tp(),o);return bC(e,u,Hp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await kE(e,n,s,tp(),o);return xI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Or(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gC(e),s=new eC(e);return n.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},o=>{const u=o?.[0]?.[jm];u!==void 0&&n(!!u),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vb()||Cb()||jp()}}const DC=CC;var PE="@firebase/auth",LE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OC(i){pa(new Es("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Se(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kb(i)},p=new YR(s,o,u,g);return iI(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),pa(new Es("auth-internal",e=>{const n=Ds(e.getProvider("auth").getImmediate());return(s=>new NC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(PE,LE,xC(i)),Bi(PE,LE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=300,VC=mb("authIdTokenMaxAge")||MC;let UE=null;const kC=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>VC)return;const o=n?.token;UE!==o&&(UE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function PC(i=Vp()){const e=tf(i,"auth");if(e.isInitialized())return e.getImmediate();const n=nI(i,{popupRedirectResolver:DC,persistence:[zI,CI,Gb]}),s=mb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=kC(u.toString());SI(n,f,()=>f(n.currentUser)),bI(n,m=>f(m))}}const o=hb("auth");return o&&rI(n,`http://${o}`),n}function LC(){return document.getElementsByTagName("head")?.[0]??document}QR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ei("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",LC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OC("Browser");var UC="firebase",jC="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(UC,jC,"app");var jE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,Jb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,w){function I(){}I.prototype=w.prototype,O.D=w.prototype,O.prototype=new I,O.prototype.constructor=O,O.C=function(V,M,P){for(var C=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)C[Ke-2]=arguments[Ke];return w.prototype[M].apply(V,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,w,I){I||(I=0);var V=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)V[M]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(M=0;16>M;++M)V[M]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=O.g[0],I=O.g[1],M=O.g[2];var P=O.g[3],C=w+(P^I&(M^P))+V[0]+3614090360&4294967295;w=I+(C<<7&4294967295|C>>>25),C=P+(M^w&(I^M))+V[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(I^P&(w^I))+V[2]+606105819&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(w^M&(P^w))+V[3]+3250441966&4294967295,I=M+(C<<22&4294967295|C>>>10),C=w+(P^I&(M^P))+V[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(M^w&(I^M))+V[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(I^P&(w^I))+V[6]+2821735955&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(w^M&(P^w))+V[7]+4249261313&4294967295,I=M+(C<<22&4294967295|C>>>10),C=w+(P^I&(M^P))+V[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(M^w&(I^M))+V[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(I^P&(w^I))+V[10]+4294925233&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(w^M&(P^w))+V[11]+2304563134&4294967295,I=M+(C<<22&4294967295|C>>>10),C=w+(P^I&(M^P))+V[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(M^w&(I^M))+V[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=M+(I^P&(w^I))+V[14]+2792965006&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(w^M&(P^w))+V[15]+1236535329&4294967295,I=M+(C<<22&4294967295|C>>>10),C=w+(M^P&(I^M))+V[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(w^I))+V[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^I&(P^w))+V[11]+643717713&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(M^P))+V[0]+3921069994&4294967295,I=M+(C<<20&4294967295|C>>>12),C=w+(M^P&(I^M))+V[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(w^I))+V[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^I&(P^w))+V[15]+3634488961&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(M^P))+V[4]+3889429448&4294967295,I=M+(C<<20&4294967295|C>>>12),C=w+(M^P&(I^M))+V[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(w^I))+V[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^I&(P^w))+V[3]+4107603335&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(M^P))+V[8]+1163531501&4294967295,I=M+(C<<20&4294967295|C>>>12),C=w+(M^P&(I^M))+V[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(w^I))+V[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=M+(w^I&(P^w))+V[7]+1735328473&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(M^P))+V[12]+2368359562&4294967295,I=M+(C<<20&4294967295|C>>>12),C=w+(I^M^P)+V[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^M)+V[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^I)+V[11]+1839030562&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^w)+V[14]+4259657740&4294967295,I=M+(C<<23&4294967295|C>>>9),C=w+(I^M^P)+V[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^M)+V[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^I)+V[7]+4139469664&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^w)+V[10]+3200236656&4294967295,I=M+(C<<23&4294967295|C>>>9),C=w+(I^M^P)+V[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^M)+V[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^I)+V[3]+3572445317&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^w)+V[6]+76029189&4294967295,I=M+(C<<23&4294967295|C>>>9),C=w+(I^M^P)+V[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^M)+V[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=M+(P^w^I)+V[15]+530742520&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^w)+V[2]+3299628645&4294967295,I=M+(C<<23&4294967295|C>>>9),C=w+(M^(I|~P))+V[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~M))+V[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~I))+V[14]+2878612391&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~w))+V[5]+4237533241&4294967295,I=M+(C<<21&4294967295|C>>>11),C=w+(M^(I|~P))+V[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~M))+V[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~I))+V[10]+4293915773&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~w))+V[1]+2240044497&4294967295,I=M+(C<<21&4294967295|C>>>11),C=w+(M^(I|~P))+V[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~M))+V[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~I))+V[6]+2734768916&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~w))+V[13]+1309151649&4294967295,I=M+(C<<21&4294967295|C>>>11),C=w+(M^(I|~P))+V[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~M))+V[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=M+(w^(P|~I))+V[2]+718787259&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~w))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+w&4294967295,O.g[1]=O.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+P&4294967295}s.prototype.u=function(O,w){w===void 0&&(w=O.length);for(var I=w-this.blockSize,V=this.B,M=this.h,P=0;P<w;){if(M==0)for(;P<=I;)o(this,O,P),P+=this.blockSize;if(typeof O=="string"){for(;P<w;)if(V[M++]=O.charCodeAt(P++),M==this.blockSize){o(this,V),M=0;break}}else for(;P<w;)if(V[M++]=O[P++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=w},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var w=1;w<O.length-8;++w)O[w]=0;var I=8*this.o;for(w=O.length-8;w<O.length;++w)O[w]=I&255,I/=256;for(this.u(O),O=Array(16),w=I=0;4>w;++w)for(var V=0;32>V;V+=8)O[I++]=this.g[w]>>>V&255;return O};function u(O,w){var I=m;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=w(O)}function f(O,w){this.h=w;for(var I=[],V=!0,M=O.length-1;0<=M;M--){var P=O[M]|0;V&&P==w||(I[M]=P,V=!1)}this.g=I}var m={};function g(O){return-128<=O&&128>O?u(O,function(w){return new f([w|0],0>w?-1:0)}):new f([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return T;if(0>O)return H(p(-O));for(var w=[],I=1,V=0;O>=I;V++)w[V]=O/I|0,I*=4294967296;return new f(w,0)}function _(O,w){if(O.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(O.charAt(0)=="-")return H(_(O.substring(1),w));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(w,8)),V=T,M=0;M<O.length;M+=8){var P=Math.min(8,O.length-M),C=parseInt(O.substring(M,M+P),w);8>P?(P=p(Math.pow(w,P)),V=V.j(P).add(p(C))):(V=V.j(I),V=V.add(p(C)))}return V}var T=g(0),A=g(1),x=g(16777216);i=f.prototype,i.m=function(){if(F(this))return-H(this).m();for(var O=0,w=1,I=0;I<this.g.length;I++){var V=this.i(I);O+=(0<=V?V:4294967296+V)*w,w*=4294967296}return O},i.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(z(this))return"0";if(F(this))return"-"+H(this).toString(O);for(var w=p(Math.pow(O,6)),I=this,V="";;){var M=he(I,w).g;I=ne(I,M.j(w));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(O);if(I=M,z(I))return P+V;for(;6>P.length;)P="0"+P;V=P+V}},i.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function z(O){if(O.h!=0)return!1;for(var w=0;w<O.g.length;w++)if(O.g[w]!=0)return!1;return!0}function F(O){return O.h==-1}i.l=function(O){return O=ne(this,O),F(O)?-1:z(O)?0:1};function H(O){for(var w=O.g.length,I=[],V=0;V<w;V++)I[V]=~O.g[V];return new f(I,~O.h).add(A)}i.abs=function(){return F(this)?H(this):this},i.add=function(O){for(var w=Math.max(this.g.length,O.g.length),I=[],V=0,M=0;M<=w;M++){var P=V+(this.i(M)&65535)+(O.i(M)&65535),C=(P>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);V=C>>>16,P&=65535,C&=65535,I[M]=C<<16|P}return new f(I,I[I.length-1]&-2147483648?-1:0)};function ne(O,w){return O.add(H(w))}i.j=function(O){if(z(this)||z(O))return T;if(F(this))return F(O)?H(this).j(H(O)):H(H(this).j(O));if(F(O))return H(this.j(H(O)));if(0>this.l(x)&&0>O.l(x))return p(this.m()*O.m());for(var w=this.g.length+O.g.length,I=[],V=0;V<2*w;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<O.g.length;M++){var P=this.i(V)>>>16,C=this.i(V)&65535,Ke=O.i(M)>>>16,oe=O.i(M)&65535;I[2*V+2*M]+=C*oe,se(I,2*V+2*M),I[2*V+2*M+1]+=P*oe,se(I,2*V+2*M+1),I[2*V+2*M+1]+=C*Ke,se(I,2*V+2*M+1),I[2*V+2*M+2]+=P*Ke,se(I,2*V+2*M+2)}for(V=0;V<w;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=w;V<2*w;V++)I[V]=0;return new f(I,0)};function se(O,w){for(;(O[w]&65535)!=O[w];)O[w+1]+=O[w]>>>16,O[w]&=65535,w++}function ie(O,w){this.g=O,this.h=w}function he(O,w){if(z(w))throw Error("division by zero");if(z(O))return new ie(T,T);if(F(O))return w=he(H(O),w),new ie(H(w.g),H(w.h));if(F(w))return w=he(O,H(w)),new ie(H(w.g),w.h);if(30<O.g.length){if(F(O)||F(w))throw Error("slowDivide_ only works with positive integers.");for(var I=A,V=w;0>=V.l(O);)I=ue(I),V=ue(V);var M=me(I,1),P=me(V,1);for(V=me(V,2),I=me(I,2);!z(V);){var C=P.add(V);0>=C.l(O)&&(M=M.add(I),P=C),V=me(V,1),I=me(I,1)}return w=ne(O,M.j(w)),new ie(M,w)}for(M=T;0<=O.l(w);){for(I=Math.max(1,Math.floor(O.m()/w.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),P=p(I),C=P.j(w);F(C)||0<C.l(O);)I-=V,P=p(I),C=P.j(w);z(P)&&(P=A),M=M.add(P),O=ne(O,C)}return new ie(M,O)}i.A=function(O){return he(this,O).h},i.and=function(O){for(var w=Math.max(this.g.length,O.g.length),I=[],V=0;V<w;V++)I[V]=this.i(V)&O.i(V);return new f(I,this.h&O.h)},i.or=function(O){for(var w=Math.max(this.g.length,O.g.length),I=[],V=0;V<w;V++)I[V]=this.i(V)|O.i(V);return new f(I,this.h|O.h)},i.xor=function(O){for(var w=Math.max(this.g.length,O.g.length),I=[],V=0;V<w;V++)I[V]=this.i(V)^O.i(V);return new f(I,this.h^O.h)};function ue(O){for(var w=O.g.length+1,I=[],V=0;V<w;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new f(I,O.h)}function me(O,w){var I=w>>5;w%=32;for(var V=O.g.length-I,M=[],P=0;P<V;P++)M[P]=0<w?O.i(P+I)>>>w|O.i(P+I+1)<<32-w:O.i(P+I);return new f(M,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Jb=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=_,_s=f}).apply(typeof jE<"u"?jE:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e0,Zl,t0,Sh,sp,n0,i0,r0;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var j=c[S];if(!(j in v))break e;v=v[j]}c=c[c.length-1],S=v[c],y=y(S),y!=S&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,S=!1,j={next:function(){if(!S&&v<c.length){var Q=v++;return{value:y(Q,c[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,v){return c.call.apply(c.bind,arguments)}function T(c,y,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,S),c.apply(y,j)}}return function(){return c.apply(y,arguments)}}function A(c,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,A.apply(null,arguments)}function x(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function z(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,j,Q){for(var le=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)le[qe-2]=arguments[qe];return y.prototype[j].apply(S,le)}}function F(c){const y=c.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=c[S];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(g(S)){const j=c.length||0,Q=S.length||0;c.length=j+Q;for(let le=0;le<Q;le++)c[j+le]=S[le]}else c.push(S)}}class ne{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(c){return/^[\s\xa0]*$/.test(c)}function ie(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var ue=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function me(c,y,v){for(const S in c)y.call(v,c[S],S,c)}function O(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function w(c){const y={};for(const v in c)y[v]=c[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,y){let v,S;for(let j=1;j<arguments.length;j++){S=arguments[j];for(v in S)c[v]=S[v];for(let Q=0;Q<I.length;Q++)v=I[Q],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function M(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function P(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Ee;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ke{constructor(){this.h=this.g=null}add(y,v){const S=oe.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var oe=new ne(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let te,ce=!1,Ee=new Ke,D=()=>{const c=m.Promise.resolve(void 0);te=()=>{c.then($)}};var $=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){P(v)}var y=oe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ce=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ge=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c})();function Ie(c,y){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ue){e:{try{he(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ye[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ie.aa.h.call(this)}}z(Ie,re);var ye={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Rt(c,y,v,S,j){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=j,this.key=++ze,this.da=this.fa=!1}function Me(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gn(c){this.src=c,this.g={},this.h=0}gn.prototype.add=function(c,y,v,S,j){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var le=wn(c,y,S,j);return-1<le?(y=c[le],v||(y.fa=!1)):(y=new Rt(y,this.src,Q,!!S,j),y.fa=v,c.push(y)),y};function Gt(c,y){var v=y.type;if(v in c.g){var S=c.g[v],j=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=j)&&Array.prototype.splice.call(S,j,1),Q&&(Me(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function wn(c,y,v,S){for(var j=0;j<c.length;++j){var Q=c[j];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==S)return j}return-1}var Jt="closure_lm_"+(1e6*Math.random()|0),Kn={};function ui(c,y,v,S,j){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)ui(c,y[Q],v,S,j);return null}return v=Ia(v),c&&c[mt]?c.K(y,v,p(S)?!!S.capture:!1,j):yn(c,y,v,!1,S,j)}function yn(c,y,v,S,j,Q){if(!y)throw Error("Invalid event type");var le=p(j)?!!j.capture:!!j,qe=Wi(c);if(qe||(c[Jt]=qe=new gn(c)),v=qe.add(y,v,S,le,Q),v.proxy)return v;if(S=Ra(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)ge||(j=le),j===void 0&&(j=!1),c.addEventListener(y.toString(),S,j);else if(c.attachEvent)c.attachEvent(Yn(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ra(){function c(v){return y.call(c.src,c.listener,v)}const y=Pr;return c}function $i(c,y,v,S,j){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)$i(c,y[Q],v,S,j);else S=p(S)?!!S.capture:!!S,v=Ia(v),c&&c[mt]?(c=c.i,y=String(y).toString(),y in c.g&&(Q=c.g[y],v=wn(Q,v,S,j),-1<v&&(Me(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete c.g[y],c.h--)))):c&&(c=Wi(c))&&(y=c.g[y.toString()],c=-1,y&&(c=wn(y,v,S,j)),(v=-1<c?y[c]:null)&&_n(v))}function _n(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[mt])Gt(y.i,c);else{var v=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(v,S,c.capture):y.detachEvent?y.detachEvent(Yn(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Wi(y))?(Gt(v,c),v.h==0&&(v.src=null,y[Jt]=null)):Me(c)}}}function Yn(c){return c in Kn?Kn[c]:Kn[c]="on"+c}function Pr(c,y){if(c.da)c=!0;else{y=new Ie(y,this);var v=c.listener,S=c.ha||c.src;c.fa&&_n(c),c=v.call(S,y)}return c}function Wi(c){return c=c[Jt],c instanceof gn?c:null}var Lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ia(c){return typeof c=="function"?c:(c[Lr]||(c[Lr]=function(y){return c.handleEvent(y)}),c[Lr])}function ht(){ae.call(this),this.i=new gn(this),this.M=this,this.F=null}z(ht,ae),ht.prototype[mt]=!0,ht.prototype.removeEventListener=function(c,y,v,S){$i(this,c,y,v,S)};function Pe(c,y){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new re(y,c);else if(y instanceof re)y.target=y.target||c;else{var j=y;y=new re(S,c),V(y,j)}if(j=!0,v)for(var Q=v.length-1;0<=Q;Q--){var le=y.g=v[Q];j=It(le,S,!0,y)&&j}if(le=y.g=c,j=It(le,S,!0,y)&&j,j=It(le,S,!1,y)&&j,v)for(Q=0;Q<v.length;Q++)le=y.g=v[Q],j=It(le,S,!1,y)&&j}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],S=0;S<v.length;S++)Me(v[S]);delete c.g[y],c.h--}}this.F=null},ht.prototype.K=function(c,y,v,S){return this.i.add(String(c),y,!1,v,S)},ht.prototype.L=function(c,y,v,S){return this.i.add(String(c),y,!0,v,S)};function It(c,y,v,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,Q=0;Q<y.length;++Q){var le=y[Q];if(le&&!le.da&&le.capture==v){var qe=le.listener,jt=le.ha||le.src;le.fa&&Gt(c.i,le),j=qe.call(jt,S)!==!1&&j}}return j&&!S.defaultPrevented}function yt(c,y,v){if(typeof c=="function")v&&(c=A(c,v));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Os(c){c.g=yt(()=>{c.g=null,c.i&&(c.i=!1,Os(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Qn extends ae{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Os(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(c){ae.call(this),this.h=c,this.g={}}z(Si,ae);var Zi=[];function Ji(c){me(c.g,function(y,v){this.g.hasOwnProperty(v)&&_n(y)},c),c.g={}}Si.prototype.N=function(){Si.aa.N.call(this),Ji(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=m.JSON.stringify,er=m.JSON.parse,tr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ur(){}Ur.prototype.h=null;function Ms(c){return c.h||(c.h=c.i())}function Vs(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){re.call(this,"d")}z(at,re);function Lt(){re.call(this,"c")}z(Lt,re);var ft={},Rn=null;function Tt(){return Rn=Rn||new ht}ft.La="serverreachability";function Ct(c){re.call(this,ft.La,c)}z(Ct,re);function Ut(c){const y=Tt();Pe(y,new Ct(y))}ft.STAT_EVENT="statevent";function hi(c,y){re.call(this,ft.STAT_EVENT,c),this.stat=y}z(hi,re);function De(c){const y=Tt();Pe(y,new hi(y,c))}ft.Ma="timingevent";function et(c,y){re.call(this,ft.Ma,c),this.size=y}z(et,re);function Qe(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function _t(){this.g=!0}_t.prototype.xa=function(){this.g=!1};function fi(c,y,v,S,j,Q){c.info(function(){if(c.g)if(Q)for(var le="",qe=Q.split("&"),jt=0;jt<qe.length;jt++){var He=qe[jt].split("=");if(1<He.length){var Yt=He[0];He=He[1];var zt=Yt.split("_");le=2<=zt.length&&zt[1]=="type"?le+(Yt+"="+He+"&"):le+(Yt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+S+") [attempt "+j+"]: "+y+`
`+v+`
`+le})}function nr(c,y,v,S,j,Q,le){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+j+"]: "+y+`
`+v+`
`+Q+" "+le})}function en(c,y,v,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+di(c,v)+(S?" "+S:"")})}function Ai(c,y){c.info(function(){return"TIMEOUT: "+y})}_t.prototype.info=function(){};function di(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var j=S[1];if(Array.isArray(j)&&!(1>j.length)){var Q=j[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<j.length;le++)j[le]=""}}}}return vn(v)}catch{return y}}var jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wi;function Ri(){}z(Ri,Ur),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},wi=new Ri;function En(c,y,v,S){this.j=c,this.i=y,this.l=v,this.R=S||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}var Xo={},Ca={};function mi(c,y,v){c.L=1,c.v=js(Pn(y)),c.m=v,c.P=!0,rr(c,null)}function rr(c,y){c.F=Date.now(),ks(c),c.A=Pn(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),tl(v.i,"t",S),c.C=0,v=c.j.J,c.h=new bt,c.g=oc(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Qn(A(c.Y,c,c.g),c.O)),y=c.U,v=c.g,S=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Zi[0]=j.toString()),j=Zi);for(var Q=0;Q<j.length;Q++){var le=ui(v,j[Q],S||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Ut(),fi(c.i,c.u,c.A,c.l,c.R,c.m)}En.prototype.ca=function(c){c=c.target;const y=this.M;y&&Zn(c)==3?y.j():this.Y(c)},En.prototype.Y=function(c){try{if(c==this.g)e:{const zt=Zn(this.g);var y=this.g.Ba();const fr=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Ju(this.g)))){this.J||zt!=4||y==7||(y==8||0>=fr?Ut(3):Ut(2)),zr(this);var v=this.g.Z();this.X=v;t:if(Ku(this)){var S=Ju(this.g);c="";var j=S.length,Q=Zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Ii(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(Q&&y==j-1)});S.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,nr(this.i,this.u,this.A,this.l,this.R,zt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,jt=this.g;if((qe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(qe)){var He=qe;break t}}He=null}if(v=He)en(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ps(this,v);else{this.o=!1,this.s=3,De(12),tn(this),Ii(this);break e}}if(this.P){v=!0;let nn;for(;!this.J&&this.C<le.length;)if(nn=Yu(this,le),nn==Ca){zt==4&&(this.s=4,De(14),v=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Xo){this.s=4,De(15),en(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else en(this.i,this.l,nn,null),Ps(this,nn);if(Ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||le.length!=0||this.h.h||(this.s=1,De(16),v=!1),this.o=this.o&&v,!v)en(this.i,this.l,le,"[Invalid Chunked Response]"),tn(this),Ii(this);else if(0<le.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Ys(Yt),Yt.M=!0,De(11))}}else en(this.i,this.l,le,null),Ps(this,le);zt==4&&tn(this),this.o&&!this.J&&(zt==4?rc(this.j,this):(this.o=!1,ks(this)))}else kf(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),tn(this),Ii(this)}}}catch{}finally{}};function Ku(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Yu(c,y){var v=c.C,S=y.indexOf(`
`,v);return S==-1?Ca:(v=Number(y.substring(v,S)),isNaN(v)?Xo:(S+=1,S+v>y.length?Ca:(y=y.slice(S,S+v),c.C=S+v,y)))}En.prototype.cancel=function(){this.J=!0,tn(this)};function ks(c){c.S=Date.now()+c.I,Qu(c,c.I)}function Qu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Qe(A(c.ba,c),y)}function zr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}En.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ai(this.i,this.A),this.L!=2&&(Ut(),De(17)),tn(this),this.s=2,Ii(this)):Qu(this,this.S-c)};function Ii(c){c.j.G==0||c.J||rc(c.j,c)}function tn(c){zr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Ji(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ps(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||$o(v.h,c))){if(!c.K&&$o(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var j=S;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)za(v),Ua(v);else break e;al(v),De(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Qe(A(v.Za,v),6e3));if(1>=Na(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else hr(v,11)}else if((c.K||v.g==c)&&za(v),!se(y))for(j=v.Da.g.parse(y),y=0;y<j.length;y++){let He=j[y];if(v.T=He[0],He=He[1],v.G==2)if(He[0]=="c"){v.K=He[1],v.ia=He[2];const Yt=He[3];Yt!=null&&(v.la=Yt,v.j.info("VER="+v.la));const zt=He[4];zt!=null&&(v.Aa=zt,v.j.info("SVER="+v.Aa));const fr=He[5];fr!=null&&typeof fr=="number"&&0<fr&&(S=1.5*fr,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const nn=c.g;if(nn){const Vi=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vi){var Q=S.h;Q.g||Vi.indexOf("spdy")==-1&&Vi.indexOf("quic")==-1&&Vi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(xa(Q,Q.h),Q.h=null))}if(S.D){const ll=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(S.ya=ll,tt(S.I,S.D,ll))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var le=c;if(S.qa=ac(S,S.J?S.ia:null,S.W),le.K){Tn(S.h,le);var qe=le,jt=S.L;jt&&(qe.I=jt),qe.B&&(zr(qe),ks(qe)),S.g=le}else nc(S);0<v.i.length&&ja(v)}else He[0]!="stop"&&He[0]!="close"||hr(v,7);else v.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?hr(v,7):rl(v):He[0]!="noop"&&v.l&&v.l.ta(He),v.v=0)}}Ut(4)}catch{}}var Xu=class{constructor(c,y){this.g=c,this.map=y}};function sr(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Da(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Na(c){return c.h?1:c.g?c.g.size:0}function $o(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function xa(c,y){c.g?c.g.add(y):c.h=y}function Tn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}sr.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Wo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return F(c.i)}function xf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var y=[],v=c.length,S=0;S<v;S++)y.push(c[S]);return y}y=[],v=0;for(S in c)y[v++]=c[S];return y}function Oa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const S in c)y[v++]=S;return y}}}function Zo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Oa(c),S=xf(c),j=S.length,Q=0;Q<j;Q++)y.call(void 0,S[Q],v&&v[Q],c)}var Ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Of(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),j=null;if(0<=S){var Q=c[v].substring(0,S);j=c[v].substring(S+1)}else Q=c[v];y(Q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Dt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Dt){this.h=c.h,Us(this,c.j),this.o=c.o,this.g=c.g,Br(this,c.s),this.l=c.l;var y=c.i,v=new or;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ar(this,v),this.m=c.m}else c&&(y=String(c).match(Ls))?(this.h=!1,Us(this,y[1]||"",!0),this.o=Xn(y[2]||""),this.g=Xn(y[3]||"",!0),Br(this,y[4]),this.l=Xn(y[5]||"",!0),ar(this,y[6]||"",!0),this.m=Xn(y[7]||"")):(this.h=!1,this.i=new or(null,this.h))}Dt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(zs(y,Jo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(zs(y,Jo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(zs(v,v.charAt(0)=="/"?Mf:el,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",zs(v,Ma)),c.join("")};function Pn(c){return new Dt(c)}function Us(c,y,v){c.j=v?Xn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Br(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function ar(c,y,v){y instanceof or?(c.i=y,Wu(c.i,c.h)):(v||(y=zs(y,Vf)),c.i=new or(y,c.h))}function tt(c,y,v){c.i.set(y,v)}function js(c){return tt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Xn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,$u),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function $u(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,Mf=/[#\?]/g,Vf=/[#\?@]/g,Ma=/#/g;function or(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&Of(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=or.prototype,i.add=function(c,y){$n(this),this.i=null,c=Ci(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function lr(c,y){$n(c),y=Ci(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ur(c,y){return $n(c),y=Ci(c,y),c.g.has(y)}i.forEach=function(c,y){$n(this),this.g.forEach(function(v,S){v.forEach(function(j){c.call(y,j,S,this)},this)},this)},i.na=function(){$n(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const j=c[S];for(let Q=0;Q<j.length;Q++)v.push(y[S])}return v},i.V=function(c){$n(this);let y=[];if(typeof c=="string")ur(this,c)&&(y=y.concat(this.g.get(Ci(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return $n(this),this.i=null,c=Ci(this,c),ur(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function tl(c,y,v){lr(c,y),0<v.length&&(c.i=null,c.g.set(Ci(c,y),F(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const Q=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var j=Q;le[S]!==""&&(j+="="+encodeURIComponent(String(le[S]))),c.push(j)}}return this.i=c.join("&")};function Ci(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Wu(c,y){y&&!c.j&&($n(c),c.i=null,c.g.forEach(function(v,S){var j=S.toLowerCase();S!=j&&(lr(this,S),tl(this,j,v))},c)),c.j=y}function Bs(c,y){const v=new _t;if(m.Image){const S=new Image;S.onload=x(Wn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=x(Wn,v,"TestLoadImage: error",!1,y,S),S.onabort=x(Wn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=x(Wn,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function pi(c,y){const v=new _t,S=new AbortController,j=setTimeout(()=>{S.abort(),Wn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(j),Q.ok?Wn(v,"TestPingServer: ok",!0,y):Wn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),Wn(v,"TestPingServer: error",!1,y)})}function Wn(c,y,v,S,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),S(v)}catch{}}function qs(){this.g=new tr}function Di(c,y,v){const S=v||"";try{Zo(c,function(j,Q){let le=j;p(j)&&(le=vn(j)),y.push(S+Q+"="+encodeURIComponent(le))})}catch(j){throw y.push(S+"type="+encodeURIComponent("_badmap")),j}}function qr(c){this.l=c.Ub||null,this.j=c.eb||!1}z(qr,Ur),qr.prototype.g=function(){return new cr(this.l,this.j)},qr.prototype.i=(function(c){return function(){return c}})({});function cr(c,y){ht.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(cr,ht),i=cr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,xi(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function nl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ni(this):xi(this),this.readyState==3&&nl(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ni(this))},i.Qa=function(c){this.g&&(this.response=c,Ni(this))},i.ga=function(){this.g&&Ni(this)};function Ni(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xi(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function xi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function il(c){let y="";return me(c,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Kt(c,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=il(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):tt(c,y,v))}function $e(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z($e,ht);var Va=/^https?$/i,Hs=["POST","PUT"];i=$e.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wi.g(),this.v=this.o?Ms(this.o):Ms(wi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){Zu(this,Q);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var j in S)v.set(j,S[j]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())v.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Hs,y,void 0))||S||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of v)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fs(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){Zu(this,Q)}};function Zu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,ka(c),Oi(c)}function ka(c){c.A||(c.A=!0,Pe(c,"complete"),Pe(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Pe(this,"complete"),Pe(this,"abort"),Oi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),$e.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Pa(this):this.bb())},i.bb=function(){Pa(this)};function Pa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Zn(c)!=4||c.Z()!=2)){if(c.u&&Zn(c)==4)yt(c.Ea,0,c);else if(Pe(c,"readystatechange"),Zn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=le===0){var j=String(c.D).match(Ls)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),S=!Va.test(j?j.toLowerCase():"")}v=S}if(v)Pe(c,"complete"),Pe(c,"success");else{c.m=6;try{var Q=2<Zn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",ka(c)}}finally{Oi(c)}}}}function Oi(c,y){if(c.g){Fs(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Pe(c,"ready");try{v.onreadystatechange=S}catch{}}}function Fs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Zn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Zn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),er(y)}};function Ju(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kf(c){const y={};c=(c.g&&2<=Zn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(se(c[S]))continue;var v=M(c[S]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[j]||[];y[j]=Q,Q.push(v)}O(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function La(c){this.Aa=0,this.i=[],this.j=new _t,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gs("baseRetryDelayMs",5e3,c),this.cb=Gs("retryDelaySeedMs",1e4,c),this.Wa=Gs("forwardChannelMaxRetries",2,c),this.wa=Gs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sr(c&&c.concurrentRequestLimit),this.Da=new qs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=La.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,S){De(0),this.W=c,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=ac(this,null,this.W),ja(this)};function rl(c){if(ec(c),c.G==3){var y=c.U++,v=Pn(c.I);if(tt(v,"SID",c.K),tt(v,"RID",y),tt(v,"TYPE","terminate"),Ks(c,v),y=new En(c,c.j,y),y.L=2,y.v=js(Pn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=oc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ks(y)}sc(c)}function Ua(c){c.g&&(Ys(c),c.g.cancel(),c.g=null)}function ec(c){Ua(c),c.u&&(m.clearTimeout(c.u),c.u=null),za(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ja(c){if(!Da(c.h)&&!c.s){c.s=!0;var y=c.Ga;te||D(),ce||(te(),ce=!0),Ee.add(y,c),c.B=0}}function Pf(c,y){return Na(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Qe(A(c.Ga,c,y),ol(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new En(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=w(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(j.H=Q,Q=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=tc(this,j,y),v=Pn(this.I),tt(v,"RID",c),tt(v,"CVER",22),this.D&&tt(v,"X-HTTP-Session-Id",this.D),Ks(this,v),Q&&(this.O?y="headers="+encodeURIComponent(String(il(Q)))+"&"+y:this.m&&Kt(v,this.m,Q)),xa(this.h,j),this.Ua&&tt(v,"TYPE","init"),this.P?(tt(v,"$req",y),tt(v,"SID","null"),j.T=!0,mi(j,v,null)):mi(j,v,y),this.G=2}}else this.G==3&&(c?sl(this,c):this.i.length==0||Da(this.h)||sl(this))};function sl(c,y){var v;y?v=y.l:v=c.U++;const S=Pn(c.I);tt(S,"SID",c.K),tt(S,"RID",v),tt(S,"AID",c.T),Ks(c,S),c.m&&c.o&&Kt(S,c.m,c.o),v=new En(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=tc(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xa(c.h,v),mi(v,S,y)}function Ks(c,y){c.H&&me(c.H,function(v,S){tt(y,S,v)}),c.l&&Zo({},function(v,S){tt(y,S,v)})}function tc(c,y,v){v=Math.min(c.i.length,v);var S=c.l?A(c.l.Na,c.l,c):null;e:{var j=c.i;let Q=-1;for(;;){const le=["count="+v];Q==-1?0<v?(Q=j[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let qe=!0;for(let jt=0;jt<v;jt++){let He=j[jt].g;const Yt=j[jt].map;if(He-=Q,0>He)Q=Math.max(0,j[jt].g-100),qe=!1;else try{Di(Yt,le,"req"+He+"_")}catch{S&&S(Yt)}}if(qe){S=le.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,S}function nc(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;te||D(),ce||(te(),ce=!0),Ee.add(y,c),c.v=0}}function al(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Qe(A(c.Fa,c),ol(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,ic(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Qe(A(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Ua(this),ic(this))};function Ys(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ic(c){c.g=new En(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Pn(c.qa);tt(y,"RID","rpc"),tt(y,"SID",c.K),tt(y,"AID",c.T),tt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&tt(y,"TO",c.ja),tt(y,"TYPE","xmlhttp"),Ks(c,y),c.m&&c.o&&Kt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=js(Pn(y)),v.m=null,v.P=!0,rr(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Ua(this),al(this),De(19))};function za(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function rc(c,y){var v=null;if(c.g==y){za(c),Ys(c),c.g=null;var S=2}else if($o(c.h,y))v=y.D,Tn(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var j=c.B;S=Tt(),Pe(S,new et(S,v)),ja(c)}else nc(c);else if(j=y.s,j==3||j==0&&0<y.X||!(S==1&&Pf(c,y)||S==2&&al(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),j){case 1:hr(c,5);break;case 4:hr(c,10);break;case 3:hr(c,6);break;default:hr(c,2)}}}function ol(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function hr(c,y){if(c.j.info("Error code "+y),y==2){var v=A(c.fb,c),S=c.Xa;const j=!S;S=new Dt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Us(S,"https"),js(S),j?Bs(S.toString(),v):pi(S.toString(),v)}else De(2);c.G=0,c.l&&c.l.sa(y),sc(c),ec(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function sc(c){if(c.G=0,c.ka=[],c.l){const y=Wo(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function ac(c,y,v){var S=v instanceof Dt?Pn(v):new Dt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Br(S,S.s);else{var j=m.location;S=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var Q=new Dt(null);S&&Us(Q,S),y&&(Q.g=y),j&&Br(Q,j),v&&(Q.l=v),S=Q}return v=c.D,y=c.ya,v&&y&&tt(S,v,y),tt(S,"VER",c.la),Ks(c,S),S}function oc(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new $e(new qr({eb:v})):new $e(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function lc(){}i=lc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ba(){}Ba.prototype.g=function(c,y){return new bn(c,y)};function bn(c,y){ht.call(this),this.g=new La(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!se(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Mi(this)}z(bn,ht),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){rl(this.g)},bn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=vn(c),c=v);y.i.push(new Xu(y.Ya++,c)),y.G==3&&ja(y)},bn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,bn.aa.N.call(this)};function uc(c){at.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}z(uc,at);function cc(){Lt.call(this),this.status=1}z(cc,Lt);function Mi(c){this.g=c}z(Mi,lc),Mi.prototype.ua=function(){Pe(this.g,"a")},Mi.prototype.ta=function(c){Pe(this.g,new uc(c))},Mi.prototype.sa=function(c){Pe(this.g,new cc)},Mi.prototype.ra=function(){Pe(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,r0=function(){return new Ba},i0=function(){return Tt()},n0=ft,sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jr.NO_ERROR=0,jr.TIMEOUT=8,jr.HTTP_ERROR=6,Sh=jr,ir.COMPLETE="complete",t0=ir,Vs.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Zl=Vs,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,e0=$e}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});const zE="@firebase/firestore",BE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Op("@firebase/firestore");function yo(){return _a.logLevel}function de(i,...e){if(_a.logLevel<=Le.DEBUG){const n=e.map(Gp);_a.debug(`Firestore (${Bo}): ${i}`,...n)}}function Mr(i,...e){if(_a.logLevel<=Le.ERROR){const n=e.map(Gp);_a.error(`Firestore (${Bo}): ${i}`,...n)}}function xo(i,...e){if(_a.logLevel<=Le.WARN){const n=e.map(Gp);_a.warn(`Firestore (${Bo}): ${i}`,...n)}}function Gp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,s0(i,s,n)}function s0(i,e,n){let s=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Mr(s),new Error(s)}function We(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||s0(e,o,s)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dn.UNAUTHENTICATED)))}shutdown(){}}class BC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class qC{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fa,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fa)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new a0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class HC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new HC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=KC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(i,e){return i<e?-1:i>e?1:0}function ap(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return zm(o)===zm(u)?Ue(o,u):zm(o)?1:-1}return Ue(i.length,e.length)}const YC=55296,QC=57343;function zm(i){const e=i.charCodeAt(0);return e>=YC&&e<=QC}function Oo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="__name__";class zi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=zi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=zi.isNumericId(e),o=zi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?zi.extractNumericId(e).compare(zi.extractNumericId(n)):ap(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class lt extends zi{construct(e,n,s){return new lt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const XC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends zi{construct(e,n,s){return new ln(e,n,s)}static isValidIdentifier(e){return XC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HE}static keyField(){return new ln([HE])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(n)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(lt.fromString(e))}static fromName(e){return new ve(lt.fromString(e).popFirst(5))}static empty(){return new ve(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(i,e,n){if(!n)throw new fe(Z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function $C(i,e,n,s){if(e===!0&&s===!0)throw new fe(Z.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function FE(i){if(!ve.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function GE(i){if(ve.isDocumentKey(i))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function l0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function af(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function Nr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=af(i);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Mu(i,e){if(!l0(i))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new fe(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=-62135596800,YE=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*YE);return new ut(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<KE)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YE}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mu(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:kt("string",ut._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ut(0,0))}static max(){return new Re(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=-1;function WC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new ut(n+1,0):new ut(n,s));return new Ts(o,ve.empty(),e)}function ZC(i){return new Ts(i.readTime,i.key,mu)}class Ts{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ts(Re.min(),ve.empty(),mu)}static max(){return new Ts(Re.max(),ve.empty(),mu)}}function JC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(i){if(i.code!==Z.FAILED_PRECONDITION||i.message!==eD)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.reject(n)}static resolve(e){return new ee(((n,s)=>{n(e)}))}static reject(e){return new ee(((n,s)=>{s(e)}))}static waitFor(e){return new ee(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(g=>s(g)))})),f=!0,u===o&&n()}))}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next((o=>o?ee.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ee(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;n(e[p]).next((_=>{f[p]=_,++m,m===u&&s(f)}),(_=>o(_)))}}))}static doWhile(e,n){return new ee(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function nD(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}of.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=-1;function lf(i){return i==null}function Uh(i){return i===0&&1/i==-1/0}function iD(i){return typeof i=="number"&&Number.isInteger(i)&&!Uh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="";function rD(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=QE(e)),e=sD(i.get(n),e);return QE(e)}function sD(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case u0:n+="";break;default:n+=u}}return n}function QE(i){return i+u0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ns(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function c0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||on.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??on.RED,this.left=o??on.EMPTY,this.right=u??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new on(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return on.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new on(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $E(this.data.getIterator())}getIteratorFrom(e){return new $E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class $E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Ft(ln.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new h0("Invalid base64 string: "+u):u}})(e);return new un(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new un(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const aD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(i){if(We(!!i,39018),typeof i=="string"){let e=0;const n=aD.exec(i);if(We(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(i.seconds),nanos:wt(i.nanos)}}function wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ss(i){return typeof i=="string"?un.fromBase64String(i):un.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="server_timestamp",d0="__type__",m0="__previous_value__",p0="__local_write_time__";function Qp(i){return(i?.mapValue?.fields||{})[d0]?.stringValue===f0}function uf(i){const e=i.mapValue.fields[m0];return Qp(e)?uf(e):e}function pu(i){const e=bs(i.mapValue.fields[p0].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n,s,o,u,f,m,g,p,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const jh="(default)";class gu{constructor(e,n){this.projectId=e,this.database=n||jh}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===jh}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="__type__",lD="__max__",mh={mapValue:{}},y0="__vector__",zh="value";function As(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Qp(i)?4:cD(i)?9007199254740991:uD(i)?10:11:Ae(28295,{value:i})}function Qi(i,e){if(i===e)return!0;const n=As(i);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return pu(i).isEqual(pu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=bs(o.timestampValue),m=bs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Ss(o.bytesValue).isEqual(Ss(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return wt(o.geoPointValue.latitude)===wt(u.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return wt(o.integerValue)===wt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=wt(o.doubleValue),m=wt(u.doubleValue);return f===m?Uh(f)===Uh(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Oo(i.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(XE(f)!==XE(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Qi(f[g],m[g])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function yu(i,e){return(i.values||[]).find((n=>Qi(n,e)))!==void 0}function Mo(i,e){if(i===e)return 0;const n=As(i),s=As(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=wt(u.integerValue||u.doubleValue),g=wt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return WE(i.timestampValue,e.timestampValue);case 4:return WE(pu(i),pu(e));case 5:return ap(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=Ss(u),g=Ss(f);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let p=0;p<m.length&&p<g.length;p++){const _=Ue(m[p],g[p]);if(_!==0)return _}return Ue(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=Ue(wt(u.latitude),wt(f.latitude));return m!==0?m:Ue(wt(u.longitude),wt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return ZE(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},g=f.fields||{},p=m[zh]?.arrayValue,_=g[zh]?.arrayValue,T=Ue(p?.values?.length||0,_?.values?.length||0);return T!==0?T:ZE(p,_)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===mh.mapValue&&f===mh.mapValue)return 0;if(u===mh.mapValue)return 1;if(f===mh.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=f.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const A=ap(g[T],_[T]);if(A!==0)return A;const x=Mo(m[g[T]],p[_[T]]);if(x!==0)return x}return Ue(g.length,_.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function WE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=bs(i),s=bs(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function ZE(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Mo(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function Vo(i){return op(i)}function op(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=bs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Ss(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ve.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=op(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${op(n.fields[f])}`;return o+"}"})(i.mapValue):Ae(61005,{value:i})}function Ah(i){switch(As(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uf(i);return e?16+Ah(e):16;case 5:return 2*i.stringValue.length;case 6:return Ss(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Ah(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ns(s.fields,((u,f)=>{o+=u.length+Ah(f)})),o})(i.mapValue);default:throw Ae(13486,{value:i})}}function JE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function lp(i){return!!i&&"integerValue"in i}function Xp(i){return!!i&&"arrayValue"in i}function eT(i){return!!i&&"nullValue"in i}function tT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wh(i){return!!i&&"mapValue"in i}function uD(i){return(i?.mapValue?.fields||{})[g0]?.stringValue===y0}function su(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ns(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=su(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=su(i.arrayValue.values[n]);return e}return{...i}}function cD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===lD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(n)}setAll(e){let n=ln.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=su(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ns(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new On(su(this.value))}}function _0(i){const e=[];return Ns(i.fields,((n,s)=>{const o=new ln([n]);if(wh(s)){const u=_0(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new mn(e,0,Re.min(),Re.min(),Re.min(),On.empty(),0)}static newFoundDocument(e,n,s,o){return new mn(e,1,n,Re.min(),s,o,0)}static newNoDocument(e,n){return new mn(e,2,n,Re.min(),Re.min(),On.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,Re.min(),Re.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.position=e,this.inclusive=n}}function nT(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(f.referenceValue),n.key):s=Mo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function iT(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Qi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function hD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{}class Mt extends v0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new dD(e,n,s):n==="array-contains"?new gD(e,s):n==="in"?new yD(e,s):n==="not-in"?new _D(e,s):n==="array-contains-any"?new vD(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new mD(e,s):new pD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mo(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends v0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ti(e,n)}matches(e){return E0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function E0(i){return i.op==="and"}function T0(i){return fD(i)&&E0(i)}function fD(i){for(const e of i.filters)if(e instanceof Ti)return!1;return!0}function up(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Vo(i.value);if(T0(i))return i.filters.map((e=>up(e))).join(",");{const e=i.filters.map((n=>up(n))).join(",");return`${i.op}(${e})`}}function b0(i,e){return i instanceof Mt?(function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&Qi(s.value,o.value)})(i,e):i instanceof Ti?(function(s,o){return o instanceof Ti&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&b0(f,o.filters[m])),!0):!1})(i,e):void Ae(19439)}function S0(i){return i instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`})(i):i instanceof Ti?(function(n){return n.op.toString()+" {"+n.getFilters().map(S0).join(" ,")+"}"})(i):"Filter"}class dD extends Mt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class mD extends Mt{constructor(e,n){super(e,"in",n),this.keys=A0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class pD extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=A0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function A0(i,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}class gD extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&yu(n.arrayValue,this.value)}}class yD extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}}class _D extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yu(this.value.arrayValue,n)}}class vD extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>yu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function rT(i,e=null,n=[],s=[],o=null,u=null,f=null){return new ED(i,e,n,s,o,u,f)}function $p(i){const e=Ce(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>up(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Vo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Vo(s))).join(",")),e.Te=n}return e.Te}function Wp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!hD(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!b0(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!iT(i.startAt,e.startAt)&&iT(i.endAt,e.endAt)}function cp(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function TD(i,e,n,s,o,u,f,m){return new Fo(i,e,n,s,o,u,f,m)}function Zp(i){return new Fo(i)}function sT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function w0(i){return i.collectionGroup!==null}function au(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ft(ln.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new _u(u,s))})),n.has(ln.keyField().canonicalString())||e.Ie.push(new _u(ln.keyField(),s))}return e.Ie}function Hi(i){const e=Ce(i);return e.Ee||(e.Ee=bD(e,au(i))),e.Ee}function bD(i,e){if(i.limitType==="F")return rT(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new _u(o.field,u)}));const n=i.endAt?new Bh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Bh(i.startAt.position,i.startAt.inclusive):null;return rT(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function hp(i,e){const n=i.filters.concat([e]);return new Fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function fp(i,e,n){return new Fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function cf(i,e){return Wp(Hi(i),Hi(e))&&i.limitType===e.limitType}function R0(i){return`${$p(Hi(i))}|lt:${i.limitType}`}function _o(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>S0(o))).join(", ")}]`),lf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Vo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Vo(o))).join(",")),`Target(${s})`})(Hi(i))}; limitType=${i.limitType})`}function hf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of au(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,g){const p=nT(f,m,g);return f.inclusive?p<=0:p<0})(s.startAt,au(s),o)||s.endAt&&!(function(f,m,g){const p=nT(f,m,g);return f.inclusive?p>=0:p>0})(s.endAt,au(s),o))})(i,e)}function SD(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function I0(i){return(e,n)=>{let s=!1;for(const o of au(i)){const u=AD(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function AD(i,e,n){const s=i.field.isKeyField()?ve.comparator(e.key,n.key):(function(u,f,m){const g=f.data.field(u),p=m.data.field(u);return g!==null&&p!==null?Mo(g,p):Ae(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return c0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new gt(ve.comparator);function Vr(){return wD}const C0=new gt(ve.comparator);function Jl(...i){let e=C0;for(const n of i)e=e.insert(n.key,n);return e}function D0(i){let e=C0;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ha(){return ou()}function N0(){return ou()}function ou(){return new Sa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const RD=new gt(ve.comparator),ID=new Ft(ve.comparator);function je(...i){let e=ID;for(const n of i)e=e.add(n);return e}const CD=new Ft(Ue);function DD(){return CD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function x0(i){return{integerValue:""+i}}function ND(i,e){return iD(e)?x0(e):Jp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this._=void 0}}function xD(i,e,n){return i instanceof vu?(function(o,u){const f={fields:{[d0]:{stringValue:f0},[p0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Qp(u)&&(u=uf(u)),u&&(f.fields[m0]=u),{mapValue:f}})(n,e):i instanceof Eu?M0(i,e):i instanceof Tu?V0(i,e):(function(o,u){const f=O0(o,u),m=aT(f)+aT(o.Ae);return lp(f)&&lp(o.Ae)?x0(m):Jp(o.serializer,m)})(i,e)}function OD(i,e,n){return i instanceof Eu?M0(i,e):i instanceof Tu?V0(i,e):n}function O0(i,e){return i instanceof qh?(function(s){return lp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class vu extends ff{}class Eu extends ff{constructor(e){super(),this.elements=e}}function M0(i,e){const n=k0(e);for(const s of i.elements)n.some((o=>Qi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Tu extends ff{constructor(e){super(),this.elements=e}}function V0(i,e){let n=k0(e);for(const s of i.elements)n=n.filter((o=>!Qi(o,s)));return{arrayValue:{values:n}}}class qh extends ff{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function aT(i){return wt(i.integerValue||i.doubleValue)}function k0(i){return Xp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.field=e,this.transform=n}}function VD(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Eu&&o instanceof Eu||s instanceof Tu&&o instanceof Tu?Oo(s.elements,o.elements,Qi):s instanceof qh&&o instanceof qh?Qi(s.Ae,o.Ae):s instanceof vu&&o instanceof vu})(i.transform,e.transform)}class kD{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class df{}function P0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new mf(i.key,Vn.none()):new Vu(i.key,i.data,Vn.none());{const n=i.data,s=On.empty();let o=new Ft(ln.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new xs(i.key,s,new Fn(o.toArray()),Vn.none())}}function PD(i,e,n){i instanceof Vu?(function(o,u,f){const m=o.value.clone(),g=lT(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof xs?(function(o,u,f){if(!Rh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=lT(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(L0(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function lu(i,e,n,s){return i instanceof Vu?(function(u,f,m,g){if(!Rh(u.precondition,f))return m;const p=u.value.clone(),_=uT(u.fieldTransforms,g,f);return p.setAll(_),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null})(i,e,n,s):i instanceof xs?(function(u,f,m,g){if(!Rh(u.precondition,f))return m;const p=uT(u.fieldTransforms,g,f),_=f.data;return _.setAll(L0(u)),_.setAll(p),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,f,m){return Rh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function LD(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=O0(s.transform,o||null);u!=null&&(n===null&&(n=On.empty()),n.set(s.field,u))}return n||null}function oT(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Oo(s,o,((u,f)=>VD(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Vu extends df{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xs extends df{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function L0(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function lT(i,e,n){const s=new Map;We(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,OD(f,m,n[o]))}return s}function uT(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,xD(u,f,e))}return s}class mf extends df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UD extends df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&PD(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=lu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=lu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=N0();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=P0(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,((n,s)=>oT(n,s)))&&Oo(this.baseMutations,e.baseMutations,((n,s)=>oT(n,s)))}}class eg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return RD})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new eg(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ge;function qD(i){switch(i){case Z.OK:return Ae(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function U0(i){if(i===void 0)return Mr("GRPC error has no .code"),Z.UNKNOWN;switch(i){case Ot.OK:return Z.OK;case Ot.CANCELLED:return Z.CANCELLED;case Ot.UNKNOWN:return Z.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return Z.INTERNAL;case Ot.UNAVAILABLE:return Z.UNAVAILABLE;case Ot.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Ot.NOT_FOUND:return Z.NOT_FOUND;case Ot.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Ot.ABORTED:return Z.ABORTED;case Ot.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Ot.DATA_LOSS:return Z.DATA_LOSS;default:return Ae(39323,{code:i})}}(Ge=Ot||(Ot={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new _s([4294967295,4294967295],0);function cT(i){const e=HD().encode(i),n=new Jb;return n.update(e),new Uint8Array(n.digest())}function hT(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new _s([n,s],0),new _s([o,u],0)]}class tg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(s<0)throw new eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_s.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(_s.fromNumber(s)));return o.compare(FD)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cT(e),[s,o]=hT(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new tg(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=cT(e),[s,o]=hT(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new pf(Re.min(),o,new gt(Ue),Vr(),je())}}class ku{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ku(s,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class j0{constructor(e,n){this.targetId=e,this.Ce=n}}class z0{constructor(e,n,s=un.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class fT{constructor(){this.ve=0,this.Fe=dT(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),s=je();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}})),new ku(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=dT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.Je=ph(),this.He=ph(),this.Ye=new gt(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(cp(u))if(s===0){const f=new ve(u.path);this.et(n,f,mn.newNoDocument(f,Re.min()))}else We(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Ss(s).toUint8Array()}catch(g){if(g instanceof h0)return xo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new tg(f,o,u)}catch(g){return xo(g instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&cp(m.target)){const g=new ve(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,mn.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=je();this.He.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new pf(e,n,this.Ye,this.je,s);return this.je=Vr(),this.Je=ph(),this.He=ph(),this.Ye=new gt(Ue),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ph(){return new gt(ve.comparator)}function dT(){return new gt(ve.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},YD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QD={and:"AND",or:"OR"};class XD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dp(i,e){return i.useProto3Json||lf(e)?e:{value:e}}function Hh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function $D(i,e){return Hh(i,e.toTimestamp())}function Fi(i){return We(!!i,49232),Re.fromTimestamp((function(n){const s=bs(n);return new ut(s.seconds,s.nanos)})(i))}function ng(i,e){return mp(i,e).canonicalString()}function mp(i,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function q0(i){const e=lt.fromString(i);return We(Y0(e),10190,{key:e.toString()}),e}function pp(i,e){return ng(i.databaseId,e.path)}function Bm(i,e){const n=q0(e);if(n.get(1)!==i.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ve(F0(n))}function H0(i,e){return ng(i.databaseId,e)}function WD(i){const e=q0(i);return e.length===4?lt.emptyPath():F0(e)}function gp(i){return new lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function F0(i){return We(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function mT(i,e,n){return{name:pp(i,e),fields:n.value.mapValue.fields}}function ZD(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(p,_){return p.useProto3Json?(We(_===void 0||typeof _=="string",58123),un.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),un.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(p){const _=p.code===void 0?Z.UNKNOWN:U0(p.code);return new fe(_,p.message||"")})(f);n=new z0(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Bm(i,s.document.name),u=Fi(s.document.updateTime),f=s.document.createTime?Fi(s.document.createTime):Re.min(),m=new On({mapValue:{fields:s.document.fields}}),g=mn.newFoundDocument(o,u,f,m),p=s.targetIds||[],_=s.removedTargetIds||[];n=new Ih(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Bm(i,s.document),u=s.readTime?Fi(s.readTime):Re.min(),f=mn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Ih([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Bm(i,s.document),u=s.removedTargetIds||[];n=new Ih([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new BD(o,u),m=s.targetId;n=new j0(m,f)}}return n}function JD(i,e){let n;if(e instanceof Vu)n={update:mT(i,e.key,e.value)};else if(e instanceof mf)n={delete:pp(i,e.key)};else if(e instanceof xs)n={update:mT(i,e.key,e.data),updateMask:lN(e.fieldMask)};else{if(!(e instanceof UD))return Ae(16599,{Vt:e.type});n={verify:pp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof vu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Eu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Tu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof qh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ae(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:$D(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)})(i,e.precondition)),n}function eN(i,e){return i&&i.length>0?(We(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?Fi(o.updateTime):Fi(u);return f.isEqual(Re.min())&&(f=Fi(u)),new kD(f,o.transformResults||[])})(n,e)))):[]}function tN(i,e){return{documents:[H0(i,e.path)]}}function nN(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=H0(i,o);const u=(function(p){if(p.length!==0)return K0(Ti.create(p,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(p){if(p.length!==0)return p.map((_=>(function(A){return{field:vo(A.field),direction:sN(A.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=dp(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:o}}function iN(i){let e=WD(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){We(s===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const A=G0(T);return A instanceof Ti&&T0(A)?A.getFilters():[A]})(n.where));let f=[];n.orderBy&&(f=(function(T){return T.map((A=>(function(z){return new _u(Eo(z.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(A)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let A;return A=typeof T=="object"?T.value:T,lf(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(T){const A=!!T.before,x=T.values||[];return new Bh(x,A)})(n.startAt));let p=null;return n.endAt&&(p=(function(T){const A=!T.before,x=T.values||[];return new Bh(x,A)})(n.endAt)),TD(e,o,f,u,m,"F",g,p)}function rN(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function G0(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Eo(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Eo(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Eo(n.unaryFilter.field);return Mt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Mt.create(Eo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ti.create(n.compositeFilter.filters.map((s=>G0(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(i):Ae(30097,{filter:i})}function sN(i){return KD[i]}function aN(i){return YD[i]}function oN(i){return QD[i]}function vo(i){return{fieldPath:i.canonicalString()}}function Eo(i){return ln.fromServerFormat(i.fieldPath)}function K0(i){return i instanceof Mt?(function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:aN(n.op),value:n.value}}})(i):i instanceof Ti?(function(n){const s=n.getFilters().map((o=>K0(o)));return s.length===1?s[0]:{compositeFilter:{op:oN(n.op),filters:s}}})(i):Ae(54877,{filter:i})}function lN(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Y0(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,s,o,u=Re.min(),f=Re.min(),m=un.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.yt=e}}function cN(i){const e=iN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?fp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Cn=new fN}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Ts.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class fN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ft(lt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ft(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q0=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(Q0,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ko(0)}static cr(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",dN=1048576;function yT([i,e],[n,s]){const o=Ue(i,n);return o===0?Ue(e,s):o}class mN{constructor(e){this.Ir=e,this.buffer=new Ft(yT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();yT(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(gT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?de(gT,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Vr(3e5)}))}}class gN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(of.ce);const s=new mN(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(pT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,f,m,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,m=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),yo()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function yN(i,e){return new gN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.changes=new Sa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&lu(s.mutation,o,Fn.empty(),ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,je()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=je()){const o=ha();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Jl();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=ha();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,je())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=Vr();const f=ou(),m=(function(){return ou()})();return n.forEach(((g,p)=>{const _=s.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof xs)?u=u.insert(p.key,p):_!==void 0?(f.set(p.key,_.mutation.getFieldMask()),lu(_.mutation,p,_.mutation.getFieldMask(),ut.now())):f.set(p.key,Fn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((p,_)=>f.set(p,_))),n.forEach(((p,_)=>m.set(p,new vN(_,f.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=ou();let o=new gt(((f,m)=>f-m)),u=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let _=s.get(g)||Fn.empty();_=m.applyToLocalView(p,_),s.set(g,_);const T=(o.get(m.batchId)||je()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,_=g.value,T=N0();_.forEach((A=>{if(!u.has(A)){const x=P0(n.get(A),s.get(A));x!==null&&T.set(A,x),u=u.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,p,T))}return ee.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):w0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ee.resolve(ha());let m=mu,g=u;return f.next((p=>ee.forEach(p,((_,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{g=g.insert(_,A)}))))).next((()=>this.populateOverlays(e,p,u))).next((()=>this.computeViews(e,g,p,je()))).next((_=>({batchId:m,changes:D0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let o=Jl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Jl();return this.indexManager.getCollectionParents(e,u).next((m=>ee.forEach(m,(g=>{const p=(function(T,A){return new Fo(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,s,o).next((_=>{_.forEach(((T,A)=>{f=f.insert(T,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((g,p)=>{const _=p.getKey();f.get(_)===null&&(f=f.insert(_,mn.newInvalidDocument(_)))}));let m=Jl();return f.forEach(((g,p)=>{const _=u.get(g);_!==void 0&&lu(_.mutation,p,Fn.empty(),ut.now()),hf(n,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Fi(o.createTime)}})(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:cN(o.bundledQuery),readTime:Fi(o.readTime)}})(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.overlays=new gt(ve.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ha();return ee.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=ha(),u=n.length+1,f=new ve(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new gt(((p,_)=>p-_));const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let _=u.get(p.largestBatchId);_===null&&(_=ha(),u=u.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const m=ha(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>m.set(p,_))),!(m.size()>=o)););return ee.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new zD(n,s));let u=this.qr.get(n);u===void 0&&(u=je(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.Qr=new Ft(Wt.$r),this.Ur=new Ft(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Wt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Wt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ve(new lt([])),s=new Wt(n,e),o=new Wt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new lt([])),s=new Wt(n,e),o=new Wt(n,e+1);let u=je();return this.Ur.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Wt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Wt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Wt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new jD(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Wt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(f)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Yp:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Wt(n,0),o=new Wt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(f=>{const m=this.Xr(f.Yr);u.push(m)})),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ft(Ue);return n.forEach((o=>{const u=new Wt(o,0),f=new Wt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(m=>{s=s.add(m.Yr)}))})),ee.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const f=new Wt(new ve(u),0);let m=new Ft(Ue);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),f),ee.resolve(this.ti(m))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){We(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ee.forEach(n.mutations,(o=>{const u=new Wt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Wt(n,0),o=this.Zr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.ri=e,this.docs=(function(){return new gt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let s=Vr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():mn.newInvalidDocument(o))})),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Vr();const f=n.path,m=new ve(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||JC(ZC(_),s)<=0||(o.has(_.key)||hf(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}ii(e,n){return ee.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new RN(this)}getSize(e){return ee.resolve(this.size)}}class RN extends _N{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.persistence=e,this.si=new Sa((n=>$p(n)),Wp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new ig,this.targetCount=0,this.ai=ko.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(u).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.ui={},this.overlays={},this.ci=new of(0),this.li=!1,this.li=!0,this.hi=new SN,this.referenceDelegate=e(this),this.Pi=new IN(this),this.indexManager=new hN,this.remoteDocumentCache=(function(o){return new wN(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new uN(n),this.Ii=new TN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new AN(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new CN(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ee.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class CN extends tD{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ig,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(s=>{const o=ve.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fh{constructor(e,n){this.persistence=e,this.pi=new Sa((s=>rD(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=yN(this,n)}static mi(e,n){return new Fh(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ee.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ee.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Re.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ah(e.data.value)),n}br(e,n,s){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=je(),o=je();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new sg(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return n1()?8:nD(pn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new DN;return this.Ss(e,n,f).next((m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(yo()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(yo()<=Le.DEBUG&&de("QueryEngine","Query:",_o(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(yo()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(n))):ee.resolve())}ys(e,n){if(sT(n))return ee.resolve(null);let s=Hi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=fp(n,null,"F"),s=Hi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=je(...u);return this.ps.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(n,m);return this.Cs(n,p,f,g.readTime)?this.ys(e,fp(n,null,"F")):this.vs(e,p,n,g)}))))})))))}ws(e,n,s,o){return sT(n)||o.isEqual(Re.min())?ee.resolve(null):this.ps.getDocuments(e,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?ee.resolve(null):(yo()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),_o(n)),this.vs(e,f,n,WC(o,mu)).next((m=>m)))}))}Ds(e,n){let s=new Ft(I0(e));return n.forEach(((o,u)=>{hf(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return yo()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",_o(n)),this.ps.getDocumentsMatchingQuery(e,n,Ts.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="LocalStore",xN=3e8;class ON{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(Ue),this.xs=new Sa((u=>$p(u)),Wp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function MN(i,e,n,s){return new ON(i,e,n,s)}async function $0(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let g=je();for(const p of o){f.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of u){m.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:f,addedBatchIds:m})))}))}))}function VN(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,_){const T=p.batch,A=T.keys();let x=ee.resolve();return A.forEach((z=>{x=x.next((()=>_.getEntry(g,z))).next((F=>{const H=p.docVersions.get(z);We(H!==null,48541),F.version.compareTo(H)<0&&(T.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),_.addEntry(F)))}))})),x.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=je();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function W0(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function kN(i,e){const n=Ce(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach(((_,T)=>{const A=o.get(T);if(!A)return;m.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,_.addedDocuments,T))));let x=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?x=x.withResumeToken(un.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,s)),o=o.insert(T,x),(function(F,H,ne){return F.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=xN?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(A,x,_)&&m.push(n.Pi.updateTargetData(u,x))}));let g=Vr(),p=je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),m.push(PN(u,f,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!s.isEqual(Re.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(_)}return ee.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function PN(i,e,n){let s=je(),o=je();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=Vr();return n.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):de(ag,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:f,qs:o}}))}function LN(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Yp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function UN(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ee.resolve(o)):n.Pi.allocateTargetId(s).next((f=>(o=new ps(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function yp(i,e,n){const s=Ce(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ho(f))throw f;de(ag,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function _T(i,e,n){const s=Ce(i);let o=Re.min(),u=je();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,p,_){const T=Ce(g),A=T.xs.get(_);return A!==void 0?ee.resolve(T.Ms.get(A)):T.Pi.getTargetData(p,_)})(s,f,Hi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:je()))).next((m=>(jN(s,SD(e),m),{documents:m,Qs:u})))))}function jN(i,e,n){let s=i.Os.get(e)||Re.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class vT{constructor(){this.activeTargetIds=DD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zN{constructor(){this.Mo=new vT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vT,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="ConnectivityMonitor";class TT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(ET,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(ET,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function _p(){return gh===null?gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="RestConnection",qN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===jh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const f=_p(),m=this.zo(e,n.toUriEncodedString());de(qm,`Sending RPC '${e}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),_=ba(p);return this.Jo(e,m,g,s,_).then((T=>(de(qm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw xo(qm,`RPC '${e}' ${f} failed with error: `,T,"url: ",m,"request:",s),T}))}Ho(e,n,s,o,u,f){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=qN[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class GN extends HN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=_p();return new Promise(((m,g)=>{const p=new e0;p.setWithCredentials(!0),p.listenOnce(t0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Sh.NO_ERROR:const T=p.getResponseJson();de(fn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),m(T);break;case Sh.TIMEOUT:de(fn,`RPC '${e}' ${f} timed out`),g(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const A=p.getStatus();if(de(fn,`RPC '${e}' ${f} failed with status:`,A,"response text:",p.getResponseText()),A>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const z=x?.error;if(z&&z.status&&z.message){const F=(function(ne){const se=ne.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(se)>=0?se:Z.UNKNOWN})(z.status);g(new fe(F,z.message))}else g(new fe(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(fn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);de(fn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",_,s,15)}))}T_(e,n,s){const o=_p(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=r0(),m=i0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const _=u.join("");de(fn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const T=f.createWebChannel(_,g);this.I_(T);let A=!1,x=!1;const z=new FN({Yo:H=>{x?de(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(A||(de(fn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),de(fn,`RPC '${e}' stream ${o} sending:`,H),T.send(H))},Zo:()=>T.close()}),F=(H,ne,se)=>{H.listen(ne,(ie=>{try{se(ie)}catch(he){setTimeout((()=>{throw he}),0)}}))};return F(T,Zl.EventType.OPEN,(()=>{x||(de(fn,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),F(T,Zl.EventType.CLOSE,(()=>{x||(x=!0,de(fn,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(T))})),F(T,Zl.EventType.ERROR,(H=>{x||(x=!0,xo(fn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),z.a_(new fe(Z.UNAVAILABLE,"The operation could not be completed")))})),F(T,Zl.EventType.MESSAGE,(H=>{if(!x){const ne=H.data[0];We(!!ne,16349);const se=ne,ie=se?.error||se[0]?.error;if(ie){de(fn,`RPC '${e}' stream ${o} received error:`,ie);const he=ie.status;let ue=(function(w){const I=Ot[w];if(I!==void 0)return U0(I)})(he),me=ie.message;ue===void 0&&(ue=Z.INTERNAL,me="Unknown error status: "+he+" with message "+ie.message),x=!0,z.a_(new fe(ue,me)),T.close()}else de(fn,`RPC '${e}' stream ${o} received:`,ne),z.u_(ne)}})),F(m,n0.STAT_EVENT,(H=>{H.stat===sp.PROXY?de(fn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===sp.NOPROXY&&de(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(i){return new XD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="PersistentStream";class J0{constructor(e,n,s,o,u,f,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new fe(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(bT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(bT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KN extends J0{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZD(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?Fi(f.readTime):Re.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=gp(this.serializer),n.addTarget=(function(u,f){let m;const g=f.target;if(m=cp(g)?{documents:tN(u,g)}:{query:nN(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=B0(u,f.resumeToken);const p=dp(u,f.expectedCount);p!==null&&(m.expectedCount=p)}else if(f.snapshotVersion.compareTo(Re.min())>0){m.readTime=Hh(u,f.snapshotVersion.toTimestamp());const p=dp(u,f.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const s=rN(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=gp(this.serializer),n.removeTarget=e,this.q_(n)}}class YN extends J0{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=eN(e.writeResults,e.commitTime),s=Fi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=gp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>JD(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{}class XN extends QN{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(e,mp(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(Z.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.Ho(e,mp(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new fe(Z.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class $N{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mr(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class WN{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Aa(this)&&(de(va,"Restarting streams for network reachability change."),await(async function(g){const p=Ce(g);p.Ea.add(4),await Pu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await yf(p)})(this))}))})),this.Ra=new $N(s,o)}}async function yf(i){if(Aa(i))for(const e of i.da)await e(!0)}async function Pu(i){for(const e of i.da)await e(!1)}function eS(i,e){const n=Ce(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cg(n)?ug(n):Go(n).O_()&&lg(n,e))}function og(i,e){const n=Ce(i),s=Go(n);n.Ia.delete(e),s.O_()&&tS(n,e),n.Ia.size===0&&(s.O_()?s.L_():Aa(n)&&n.Ra.set("Unknown"))}function lg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(i).Y_(e)}function tS(i,e){i.Va.Ue(e),Go(i).Z_(e)}function ug(i){i.Va=new GD({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Go(i).start(),i.Ra.ua()}function cg(i){return Aa(i)&&!Go(i).x_()&&i.Ia.size>0}function Aa(i){return Ce(i).Ea.size===0}function nS(i){i.Va=void 0}async function ZN(i){i.Ra.set("Online")}async function JN(i){i.Ia.forEach(((e,n)=>{lg(i,e)}))}async function e2(i,e){nS(i),cg(i)?(i.Ra.ha(e),ug(i)):i.Ra.set("Unknown")}async function t2(i,e,n){if(i.Ra.set("Online"),e instanceof z0&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){de(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gh(i,s)}else if(e instanceof Ih?i.Va.Ze(e):e instanceof j0?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const s=await W0(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(p);_&&u.Ia.set(p,_.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,p)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(un.EMPTY_BYTE_STRING,_.snapshotVersion)),tS(u,g);const T=new ps(_.target,g,p,_.sequenceNumber);lg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){de(va,"Failed to raise snapshot:",s),await Gh(i,s)}}async function Gh(i,e,n){if(!Ho(e))throw e;i.Ea.add(1),await Pu(i),i.Ra.set("Offline"),n||(n=()=>W0(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{de(va,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await yf(i)}))}function iS(i,e){return e().catch((n=>Gh(i,n,e)))}async function _f(i){const e=Ce(i),n=ws(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Yp;for(;n2(e);)try{const o=await LN(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,i2(e,o)}catch(o){await Gh(e,o)}rS(e)&&sS(e)}function n2(i){return Aa(i)&&i.Ta.length<10}function i2(i,e){i.Ta.push(e);const n=ws(i);n.O_()&&n.X_&&n.ea(e.mutations)}function rS(i){return Aa(i)&&!ws(i).x_()&&i.Ta.length>0}function sS(i){ws(i).start()}async function r2(i){ws(i).ra()}async function s2(i){const e=ws(i);for(const n of i.Ta)e.ea(n.mutations)}async function a2(i,e,n){const s=i.Ta.shift(),o=eg.from(s,e,n);await iS(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await _f(i)}async function o2(i,e){e&&ws(i).X_&&await(async function(s,o){if((function(f){return qD(f)&&f!==Z.ABORTED})(o.code)){const u=s.Ta.shift();ws(s).B_(),await iS(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await _f(s)}})(i,e),rS(i)&&sS(i)}async function ST(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),de(va,"RemoteStore received new credentials");const s=Aa(n);n.Ea.add(3),await Pu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yf(n)}async function l2(i,e){const n=Ce(i);e?(n.Ea.delete(2),await yf(n)):e||(n.Ea.add(2),await Pu(n),n.Ra.set("Unknown"))}function Go(i){return i.ma||(i.ma=(function(n,s,o){const u=Ce(n);return u.sa(),new KN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:ZN.bind(null,i),t_:JN.bind(null,i),r_:e2.bind(null,i),H_:t2.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),cg(i)?ug(i):i.Ra.set("Unknown")):(await i.ma.stop(),nS(i))}))),i.ma}function ws(i){return i.fa||(i.fa=(function(n,s,o){const u=Ce(n);return u.sa(),new YN(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:r2.bind(null,i),r_:o2.bind(null,i),ta:s2.bind(null,i),na:a2.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await _f(i)):(await i.fa.stop(),i.Ta.length>0&&(de(va,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new hg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(i,e){if(Mr("AsyncQueue",`${e}: ${i}`),Ho(i))return new fe(Z.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Jl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.ga=new gt(ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Po{constructor(e,n,s,o,u,f,m,g,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Po(e,n,Ao.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class c2{constructor(){this.queries=wT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ce(n),u=o.queries;o.queries=wT(),u.forEach(((f,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function wT(){return new Sa((i=>R0(i)),cf)}async function h2(i,e){const n=Ce(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new u2,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=fg(f,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&dg(n)}async function f2(i,e){const n=Ce(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function d2(i,e){const n=Ce(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&dg(n)}function m2(i,e,n){const s=Ce(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function dg(i){i.Ca.forEach((e=>{e.next()}))}var vp,RT;(RT=vp||(vp={})).Ma="default",RT.Cache="cache";class p2{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.key=e}}class oS{constructor(e){this.key=e}}class g2{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=I0(e),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new AT,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const A=o.get(_),x=hf(this.query,T)?T:null,z=!!A&&this.mutatedKeys.has(A.key),F=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let H=!1;A&&x?A.data.isEqual(x.data)?z!==F&&(s.track({type:3,doc:x}),H=!0):this.su(A,x)||(s.track({type:2,doc:x}),H=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(m=!0)):!A&&x?(s.track({type:0,doc:x}),H=!0):A&&!x&&(s.track({type:1,doc:A}),H=!0,(g||p)&&(m=!0)),H&&(x?(f=f.add(x),u=F?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,T)=>(function(x,z){const F=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:H})}};return F(x)-F(z)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,f.length!==0||p?{snapshot:new Po(this.query,e.tu,u,f,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new oS(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new aS(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mg="SyncEngine";class y2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class _2{constructor(e){this.key=e,this.hu=!1}}class v2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Sa((m=>R0(m)),cf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(ve.comparator),this.Au=new Map,this.Ru=new ig,this.Vu={},this.mu=new Map,this.fu=ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E2(i,e,n=!0){const s=dS(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await lS(s,e,n,!0),o}async function T2(i,e){const n=dS(i);await lS(n,e,!0,!1)}async function lS(i,e,n,s){const o=await UN(i.localStore,Hi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await b2(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&eS(i.remoteStore,o),m}async function b2(i,e,n,s,o){i.pu=(T,A,x)=>(async function(F,H,ne,se){let ie=H.view.ru(ne);ie.Cs&&(ie=await _T(F.localStore,H.query,!1).then((({documents:O})=>H.view.ru(O,ie))));const he=se&&se.targetChanges.get(H.targetId),ue=se&&se.targetMismatches.get(H.targetId)!=null,me=H.view.applyChanges(ie,F.isPrimaryClient,he,ue);return CT(F,H.targetId,me.au),me.snapshot})(i,T,A,x);const u=await _T(i.localStore,e,!0),f=new g2(e,u.Qs),m=f.ru(u.documents),g=ku.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),p=f.applyChanges(m,i.isPrimaryClient,g);CT(i,n,p.au);const _=new y2(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),p.snapshot}async function S2(i,e,n){const s=Ce(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!cf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await yp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&og(s.remoteStore,o.targetId),Ep(s,o.targetId)})).catch(qo)):(Ep(s,o.targetId),await yp(s.localStore,o.targetId,!0))}async function A2(i,e){const n=Ce(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),og(n.remoteStore,s.targetId))}async function w2(i,e,n){const s=O2(i);try{const o=await(function(f,m){const g=Ce(f),p=ut.now(),_=m.reduce(((x,z)=>x.add(z.key)),je());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let z=Vr(),F=je();return g.Ns.getEntries(x,_).next((H=>{z=H,z.forEach(((ne,se)=>{se.isValidDocument()||(F=F.add(ne))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,z))).next((H=>{T=H;const ne=[];for(const se of m){const ie=LD(se,T.get(se.key).overlayedDocument);ie!=null&&ne.push(new xs(se.key,ie,_0(ie.value.mapValue),Vn.exists(!0)))}return g.mutationQueue.addMutationBatch(x,p,ne,m)})).next((H=>{A=H;const ne=H.applyToLocalDocumentSet(T,F);return g.documentOverlayCache.saveOverlays(x,H.batchId,ne)}))})).then((()=>({batchId:A.batchId,changes:D0(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let p=f.Vu[f.currentUser.toKey()];p||(p=new gt(Ue)),p=p.insert(m,g),f.Vu[f.currentUser.toKey()]=p})(s,o.batchId,n),await Lu(s,o.changes),await _f(s.remoteStore)}catch(o){const u=fg(o,"Failed to persist write");n.reject(u)}}async function uS(i,e){const n=Ce(i);try{const s=await kN(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?We(f.hu,14607):o.removedDocuments.size>0&&(We(f.hu,42227),f.hu=!1))})),await Lu(n,s,e)}catch(s){await qo(s)}}function IT(i,e,n){const s=Ce(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=Ce(f);g.onlineState=m;let p=!1;g.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(m)&&(p=!0)})),p&&dg(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function R2(i,e,n){const s=Ce(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new gt(ve.comparator);f=f.insert(u,mn.newNoDocument(u,Re.min()));const m=je().add(u),g=new pf(Re.min(),new Map,new gt(Ue),f,m);await uS(s,g),s.du=s.du.remove(u),s.Au.delete(e),pg(s)}else await yp(s.localStore,e,!1).then((()=>Ep(s,e,n))).catch(qo)}async function I2(i,e){const n=Ce(i),s=e.batch.batchId;try{const o=await VN(n.localStore,e);hS(n,s,null),cS(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Lu(n,o)}catch(o){await qo(o)}}async function C2(i,e,n){const s=Ce(i);try{const o=await(function(f,m){const g=Ce(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(We(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(s.localStore,e);hS(s,e,n),cS(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Lu(s,o)}catch(o){await qo(o)}}function cS(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function hS(i,e,n){const s=Ce(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Ep(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||fS(i,s)}))}function fS(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(og(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),pg(i))}function CT(i,e,n){for(const s of n)s instanceof aS?(i.Ru.addReference(s.key,e),D2(i,s)):s instanceof oS?(de(mg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||fS(i,s.key)):Ae(19791,{wu:s})}function D2(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(de(mg,"New document in limbo: "+n),i.Eu.add(s),pg(i))}function pg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ve(lt.fromString(e)),s=i.fu.next();i.Au.set(s,new _2(n)),i.du=i.du.insert(n,s),eS(i.remoteStore,new ps(Hi(Zp(n.path)),s,"TargetPurposeLimboResolution",of.ce))}}async function Lu(i,e,n){const s=Ce(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{f.push(s.pu(g,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){const _=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(p){o.push(p);const _=sg.As(g.targetId,p);u.push(_)}})))})),await Promise.all(f),s.Pu.H_(o),await(async function(g,p){const _=Ce(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ee.forEach(p,(A=>ee.forEach(A.Es,(x=>_.persistence.referenceDelegate.addReference(T,A.targetId,x))).next((()=>ee.forEach(A.ds,(x=>_.persistence.referenceDelegate.removeReference(T,A.targetId,x)))))))))}catch(T){if(!Ho(T))throw T;de(ag,"Failed to update sequence numbers: "+T)}for(const T of p){const A=T.targetId;if(!T.fromCache){const x=_.Ms.get(A),z=x.snapshotVersion,F=x.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(A,F)}}})(s.localStore,u))}async function N2(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){de(mg,"User change. New user:",e.toKey());const s=await $0(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new fe(Z.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lu(n,s.Ls)}}function x2(i,e){const n=Ce(i),s=n.Au.get(e);if(s&&s.hu)return je().add(s.key);{let o=je();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function dS(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=uS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R2.bind(null,e),e.Pu.H_=d2.bind(null,e.eventManager),e.Pu.yu=m2.bind(null,e.eventManager),e}function O2(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C2.bind(null,e),e}class Kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MN(this.persistence,new NN,e.initialUser,this.serializer)}Cu(e){return new X0(rg.mi,this.serializer)}Du(e){return new zN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kh.provider={build:()=>new Kh};class M2 extends Kh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){We(this.persistence.referenceDelegate instanceof Fh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pN(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new X0((s=>Fh.mi(s,n)),this.serializer)}}class Tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>IT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=N2.bind(null,this.syncEngine),await l2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new c2})()}createDatastore(e){const n=gf(e.databaseInfo.databaseId),s=(function(u){return new GN(u)})(e.databaseInfo);return(function(u,f,m,g){return new XN(u,f,m,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new WN(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>IT(this.syncEngine,n,0)),(function(){return TT.v()?new TT:new BN})())}createSyncEngine(e,n){return(function(o,u,f,m,g,p,_){const T=new v2(o,u,f,m,g,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ce(n);de(va,"RemoteStore shutting down."),s.Ea.add(5),await Pu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class k2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=dn.UNAUTHENTICATED,this.clientId=Kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{de(Rs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(de(Rs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=fg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Fm(i,e){i.asyncQueue.verifyOperationInProgress(),de(Rs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await $0(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function DT(i,e){i.asyncQueue.verifyOperationInProgress();const n=await P2(i);de(Rs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>ST(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>ST(e.remoteStore,o))),i._onlineComponents=e}async function P2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(Rs,"Using user provided OfflineComponentProvider");try{await Fm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await Fm(i,new Kh)}}else de(Rs,"Using default OfflineComponentProvider"),await Fm(i,new M2(void 0));return i._offlineComponents}async function mS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(Rs,"Using user provided OnlineComponentProvider"),await DT(i,i._uninitializedComponentsProvider._online)):(de(Rs,"Using default OnlineComponentProvider"),await DT(i,new Tp))),i._onlineComponents}function L2(i){return mS(i).then((e=>e.syncEngine))}async function NT(i){const e=await mS(i),n=e.eventManager;return n.onListen=E2.bind(null,e.syncEngine),n.onUnlisten=S2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A2.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="firestore.googleapis.com",OT=!0;class MT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gS,this.ssl=OT}else this.host=e.host,this.ssl=e.ssl??OT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dN)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$C("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new zC;switch(s.type){case"firstParty":return new FC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=xT.get(n);s&&(de("ComponentProvider","Removing Datastore"),xT.delete(n),s.terminate())})(this),Promise.resolve()}}function U2(i,e,n,s={}){i=Nr(i,vf);const o=ba(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Np(`https://${m}`),xp("Firestore",!0)),u.host!==gS&&u.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!ma(g,f)&&(i._setSettings(g),s.mockUserToken)){let p,_;if(typeof s.mockUserToken=="string")p=s.mockUserToken,_=dn.MOCK_USER;else{p=Yw(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new dn(T)}i._authCredentials=new BC(new a0(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wa(this.firestore,e,this._query)}}class Pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Mu(n,Pt._jsonSchema))return new Pt(e,s||null,new ve(lt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:kt("string",Pt._jsonSchemaVersion),referencePath:kt("string")};class vs extends wa{constructor(e,n,s){super(e,n,Zp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ve(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function Gi(i,e,...n){if(i=ct(i),o0("collection","path",e),i instanceof vf){const s=lt.fromString(e,...n);return GE(s),new vs(i,null,s)}{if(!(i instanceof Pt||i instanceof vs))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(lt.fromString(e,...n));return GE(s),new vs(i.firestore,null,s)}}function Is(i,e,...n){if(i=ct(i),arguments.length===1&&(e=Kp.newId()),o0("doc","path",e),i instanceof vf){const s=lt.fromString(e,...n);return FE(s),new Pt(i,null,new ve(s))}{if(!(i instanceof Pt||i instanceof vs))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(lt.fromString(e,...n));return FE(s),new Pt(i.firestore,i instanceof vs?i.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="AsyncQueue";class kT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z0(this,"async_queue_retry"),this._c=()=>{const s=Hm();s&&de(VT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Hm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;de(VT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Mr("INTERNAL UNHANDLED ERROR: ",PT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=hg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:PT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function PT(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Ea extends vf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new kT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kT(e),this._firestoreClient=void 0,await e}}}function j2(i,e){const n=typeof i=="object"?i:Vp(),s=typeof i=="string"?i:jh,o=tf(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=fb("firestore");u&&U2(o,...u)}return o}function gg(i){if(i._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||z2(i),i._firestoreClient}function z2(i){const e=i._freezeSettings(),n=(function(o,u,f,m){return new oD(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,pS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new k2(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(un.fromBase64String(e))}catch(n){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oi(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mu(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:kt("string",oi._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(Mu(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:kt("string",Ki._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mu(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yi(e.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:kt("string",Yi._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^__.*__$/;class q2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vu(e,this.data,n,this.fieldTransforms)}}class yS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _S(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:i})}}class yg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_S(this.Ac)&&B2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class H2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||gf(e)}Cc(e,n,s,o=!1){return new yg({Ac:e,methodName:n,Dc:s,path:ln.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tf(i){const e=i._freezeSettings(),n=gf(i._databaseId);return new H2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function vS(i,e,n,s,o,u={}){const f=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);vg("Data must be an object, but it was:",f,s);const m=bS(s,f);let g,p;if(u.merge)g=new Fn(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const A=bp(e,T,n);if(!f.contains(A))throw new fe(Z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);AS(_,A)||_.push(A)}g=new Fn(_),p=f.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=f.fieldTransforms;return new q2(new On(m),g,p)}class bf extends Ef{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bf}}class _g extends Ef{_toFieldTransform(e){return new MD(e.path,new vu)}isEqual(e){return e instanceof _g}}function ES(i,e,n,s){const o=i.Cc(1,e,n);vg("Data must be an object, but it was:",o,s);const u=[],f=On.empty();Ns(s,((g,p)=>{const _=Eg(e,g,n);p=ct(p);const T=o.yc(_);if(p instanceof bf)u.push(_);else{const A=ju(p,T);A!=null&&(u.push(_),f.set(_,A))}}));const m=new Fn(u);return new yS(f,m,o.fieldTransforms)}function TS(i,e,n,s,o,u){const f=i.Cc(1,e,n),m=[bp(e,s,n)],g=[o];if(u.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(bp(e,u[A])),g.push(u[A+1]);const p=[],_=On.empty();for(let A=m.length-1;A>=0;--A)if(!AS(p,m[A])){const x=m[A];let z=g[A];z=ct(z);const F=f.yc(x);if(z instanceof bf)p.push(x);else{const H=ju(z,F);H!=null&&(p.push(x),_.set(x,H))}}const T=new Fn(p);return new yS(_,T,f.fieldTransforms)}function F2(i,e,n,s=!1){return ju(n,i.Cc(s?4:3,e))}function ju(i,e){if(SS(i=ct(i)))return vg("Unsupported field value:",e,i),bS(i,e);if(i instanceof Ef)return(function(s,o){if(!_S(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let g=ju(m,o.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ND(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ut.fromDate(s);return{timestampValue:Hh(o.serializer,u)}}if(s instanceof ut){const u=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hh(o.serializer,u)}}if(s instanceof Ki)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof oi)return{bytesValue:B0(o.serializer,s._byteString)};if(s instanceof Pt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ng(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Yi)return(function(f,m){return{mapValue:{fields:{[g0]:{stringValue:y0},[zh]:{arrayValue:{values:f.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Jp(m.serializer,p)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${af(s)}`)})(i,e)}function bS(i,e){const n={};return c0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(i,((s,o)=>{const u=ju(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function SS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ut||i instanceof Ki||i instanceof oi||i instanceof Pt||i instanceof Ef||i instanceof Yi)}function vg(i,e,n){if(!SS(n)||!l0(n)){const s=af(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function bp(i,e,n){if((e=ct(e))instanceof Uu)return e._internalPath;if(typeof e=="string")return Eg(i,e);throw Yh("Field path arguments must be of type string or ",i,!1,void 0,n)}const G2=new RegExp("[~\\*/\\[\\]]");function Eg(i,e,n){if(e.search(G2)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Uu(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Yh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new fe(Z.INVALID_ARGUMENT,m+i+g)}function AS(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new K2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class K2 extends wS{data(){return super.data()}}function Tg(i,e){return typeof e=="string"?Eg(i,e):e instanceof Uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bg{}class RS extends bg{}function wo(i,e,...n){let s=[];e instanceof bg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((g=>g instanceof Ag)).length,m=u.filter((g=>g instanceof Sg)).length;if(f>1||f>0&&m>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Sg extends RS{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Sg(e,n,s)}_apply(e){const n=this._parse(e);return IS(e._query,n),new wa(e.firestore,e.converter,hp(e._query,n))}_parse(e){const n=Tf(e.firestore);return(function(u,f,m,g,p,_,T){let A;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){jT(T,_);const z=[];for(const F of T)z.push(UT(g,u,F));A={arrayValue:{values:z}}}else A=UT(g,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||jT(T,_),A=F2(m,f,T,_==="in"||_==="not-in");return Mt.create(p,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ag extends bg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)IS(f,g),f=hp(f,g)})(e._query,n),new wa(e.firestore,e.converter,hp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends RS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(u,f)})(e._query,this._field,this._direction);return new wa(e.firestore,e.converter,(function(o,u){const f=o.explicitOrderBy.concat([u]);return new Fo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Ro(i,e="asc"){const n=e,s=Tg("orderBy",i);return wg._create(s,n)}function UT(i,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w0(e)&&n.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(lt.fromString(n));if(!ve.isDocumentKey(s))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return JE(i,new ve(s))}if(n instanceof Pt)return JE(i,n._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${af(n)}.`)}function jT(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IS(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Q2{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ns(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[zh].arrayValue?.values?.map((s=>wt(s.doubleValue)));return new Yi(n)}convertGeoPoint(e){return new Ki(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=uf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const n=bs(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=lt.fromString(e);We(Y0(s),9688,{name:e});const o=new gu(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||Mr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends wS{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Tg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=da._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:kt("string",da._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class Ch extends da{data(e={}){return super.data(e)}}class Io{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new tu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Ch(this._firestore,this._userDataWriter,s.key,s,new tu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new Ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return m.type!==0&&(p=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),_=f.indexOf(m.doc.key)),{type:X2(m.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function X2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:kt("string",Io._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class DS extends Q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function $2(i,e,n,...s){i=Nr(i,Pt);const o=Nr(i.firestore,Ea),u=Tf(o);let f;return f=typeof(e=ct(e))=="string"||e instanceof Uu?TS(u,"updateDoc",i._key,e,n,s):ES(u,"updateDoc",i._key,e),Af(o,[f.toMutation(i._key,Vn.exists(!0))])}function Rg(i){return Af(Nr(i.firestore,Ea),[new mf(i._key,Vn.none())])}function Sf(i,e){const n=Nr(i.firestore,Ea),s=Is(i),o=CS(i.converter,e);return Af(n,[vS(Tf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Vn.exists(!1))]).then((()=>s))}function Co(i,...e){i=ct(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||LT(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(LT(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let u,f,m;if(i instanceof Pt)f=Nr(i.firestore,Ea),m=Zp(i._key.path),u={next:g=>{e[s]&&e[s](W2(f,i,g))},error:e[s+1],complete:e[s+2]};else{const g=Nr(i,wa);f=Nr(g.firestore,Ea),m=g._query;const p=new DS(f);u={next:_=>{e[s]&&e[s](new Io(f,p,g,_))},error:e[s+1],complete:e[s+2]},Y2(i._query)}return(function(p,_,T,A){const x=new V2(A),z=new p2(_,x,T);return p.asyncQueue.enqueueAndForget((async()=>h2(await NT(p),z))),()=>{x.Nu(),p.asyncQueue.enqueueAndForget((async()=>f2(await NT(p),z)))}})(gg(f),m,o,u)}function Af(i,e){return(function(s,o){const u=new fa;return s.asyncQueue.enqueueAndForget((async()=>w2(await L2(s),o,u))),u.promise})(gg(i),e)}function W2(i,e,n){const s=n.docs.get(e._key),o=new DS(i);return new da(i,o,e._key,s,new tu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tf(e)}set(e,n,s){this._verifyNotCommitted();const o=Gm(e,this._firestore),u=CS(o.converter,n,s),f=vS(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,s);return this._mutations.push(f.toMutation(o._key,Vn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const u=Gm(e,this._firestore);let f;return f=typeof(n=ct(n))=="string"||n instanceof Uu?TS(this._dataReader,"WriteBatch.update",u._key,n,s,o):ES(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(f.toMutation(u._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gm(e,this._firestore);return this._mutations=this._mutations.concat(new mf(n._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gm(i,e){if((i=ct(i)).firestore!==e)throw new fe(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function J2(){return new _g("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(i){return gg(i=Nr(i,Ea)),new Z2(i,(e=>Af(i,e)))}(function(e,n=!0){(function(o){Bo=o})(jo),pa(new Es("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Ea(new qC(s.getProvider("auth-internal")),new GC(f,s.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(p.options.projectId,_)})(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Bi(zE,BE,e),Bi(zE,BE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="type.googleapis.com/google.protobuf.Int64Value",tx="type.googleapis.com/google.protobuf.UInt64Value";function NS(i,e){const n={};for(const s in i)i.hasOwnProperty(s)&&(n[s]=e(i[s]));return n}function Qh(i){if(i==null)return null;if(i instanceof Number&&(i=i.valueOf()),typeof i=="number"&&isFinite(i)||i===!0||i===!1||Object.prototype.toString.call(i)==="[object String]")return i;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(e=>Qh(e));if(typeof i=="function"||typeof i=="object")return NS(i,e=>Qh(e));throw new Error("Data cannot be encoded in JSON: "+i)}function Lo(i){if(i==null)return i;if(i["@type"])switch(i["@type"]){case ex:case tx:{const e=Number(i.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+i);return e}default:throw new Error("Data cannot be decoded from JSON: "+i)}return Array.isArray(i)?i.map(e=>Lo(e)):typeof i=="function"||typeof i=="object"?NS(i,e=>Lo(e)):i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mn extends Gn{constructor(e,n,s){super(`${Cg}/${e}`,n||""),this.details=s,Object.setPrototypeOf(this,Mn.prototype)}}function nx(i){if(i>=200&&i<300)return"ok";switch(i){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Xh(i,e){let n=nx(i),s=n,o;try{const u=e&&e.error;if(u){const f=u.status;if(typeof f=="string"){if(!zT[f])return new Mn("internal","internal");n=zT[f],s=f}const m=u.message;typeof m=="string"&&(s=m),o=u.details,o!==void 0&&(o=Lo(o))}}catch{}return n==="ok"?null:new Mn(n,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,xn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="us-central1",rx=/^data: (.*?)(?:\n|$)/;function sx(i){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new Mn("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{e&&clearTimeout(e)}}}class ax{constructor(e,n,s,o,u=Sp,f=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=f,this.emulatorOrigin=null,this.contextProvider=new ix(e,n,s,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(u);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=Sp}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ox(i,e,n){const s=ba(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(Np(i.emulatorOrigin),xp("Functions",!0))}function lx(i,e,n){const s=o=>cx(i,e,o,{});return s.stream=(o,u)=>fx(i,e,o,u),s}async function ux(i,e,n,s){n["Content-Type"]="application/json";let o;try{o=await s(i,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let u=null;try{u=await o.json()}catch{}return{status:o.status,json:u}}async function xS(i,e){const n={},s=await i.contextProvider.getContext(e.limitedUseAppCheckTokens);return s.authToken&&(n.Authorization="Bearer "+s.authToken),s.messagingToken&&(n["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=s.appCheckToken),n}function cx(i,e,n,s){const o=i._url(e);return hx(i,o,n,s)}async function hx(i,e,n,s){n=Qh(n);const o={data:n},u=await xS(i,s),f=s.timeout||7e4,m=sx(f),g=await Promise.race([ux(e,o,u,i.fetchImpl),m.promise,i.cancelAllRequests]);if(m.cancel(),!g)throw new Mn("cancelled","Firebase Functions instance was deleted.");const p=Xh(g.status,g.json);if(p)throw p;if(!g.json)throw new Mn("internal","Response is not valid JSON object.");let _=g.json.data;if(typeof _>"u"&&(_=g.json.result),typeof _>"u")throw new Mn("internal","Response is missing data field.");return{data:Lo(_)}}function fx(i,e,n,s){const o=i._url(e);return dx(i,o,n,s||{})}async function dx(i,e,n,s){n=Qh(n);const o={data:n},u=await xS(i,s);u["Content-Type"]="application/json",u.Accept="text/event-stream";let f;try{f=await i.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:s?.signal})}catch(A){if(A instanceof Error&&A.name==="AbortError"){const z=new Mn("cancelled","Request was cancelled.");return{data:Promise.reject(z),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(z)}}}}}}const x=Xh(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let m,g;const p=new Promise((A,x)=>{m=A,g=x});s?.signal?.addEventListener("abort",()=>{const A=new Mn("cancelled","Request was cancelled.");g(A)});const _=f.body.getReader(),T=mx(_,m,g,s?.signal);return{stream:{[Symbol.asyncIterator](){const A=T.getReader();return{async next(){const{value:x,done:z}=await A.read();return{value:x,done:z}},async return(){return await A.cancel(),{done:!0,value:void 0}}}}},data:p}}function mx(i,e,n,s){const o=(f,m)=>{const g=f.match(rx);if(!g)return;const p=g[1];try{const _=JSON.parse(p);if("result"in _){e(Lo(_.result));return}if("message"in _){m.enqueue(Lo(_.message));return}if("error"in _){const T=Xh(0,_);m.error(T),n(T);return}}catch(_){if(_ instanceof Mn){m.error(_),n(_);return}}},u=new TextDecoder;return new ReadableStream({start(f){let m="";return g();async function g(){if(s?.aborted){const p=new Mn("cancelled","Request was cancelled");return f.error(p),n(p),Promise.resolve()}try{const{value:p,done:_}=await i.read();if(_){m.trim()&&o(m.trim(),f),f.close();return}if(s?.aborted){const A=new Mn("cancelled","Request was cancelled");f.error(A),n(A),await i.cancel();return}m+=u.decode(p,{stream:!0});const T=m.split(`
`);m=T.pop()||"";for(const A of T)A.trim()&&o(A.trim(),f);return g()}catch(p){const _=p instanceof Mn?p:Xh(0,null);f.error(_),n(_)}}},cancel(){return i.cancel()}})}const BT="@firebase/functions",qT="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="auth-internal",gx="app-check-internal",yx="messaging-internal";function _x(i){const e=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider(px),f=n.getProvider(yx),m=n.getProvider(gx);return new ax(o,u,f,m,s)};pa(new Es(Cg,e,"PUBLIC").setMultipleInstances(!0)),Bi(BT,qT,i),Bi(BT,qT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(i=Vp(),e=Sp){const s=tf(ct(i),Cg).getImmediate({identifier:e}),o=fb("functions");return o&&Ex(s,...o),s}function Ex(i,e,n){ox(ct(i),e,n)}function wf(i,e,n){return lx(ct(i),e)}_x();const Tx={apiKey:"AIzaSyDKVKL5JVwrWXLQP2IVV08AoMwzvHl_7m4",authDomain:"maimai-a1302.firebaseapp.com",projectId:"maimai-a1302",storageBucket:"maimai-a1302.firebasestorage.app",messagingSenderId:"823024798025",appId:"1:823024798025:web:bff7cfed9cca63dfe63298",measurementId:"G-9HXB7Q48K5"},Dg=yb(Tx),bu=PC(Dg),Vt=j2(Dg),Rf=vx(Dg,"asia-northeast1"),bx=()=>{const[i,e]=U.useState(""),[n,s]=U.useState(""),[o,u]=U.useState(""),f=U.useId(),m=U.useId(),g=async p=>{p.preventDefault(),u("");try{const _=await vI(bu,i,n);console.log("ログイン成功:",_.user),alert(`おかえりなさい、${_.user.email}さん！`)}catch(_){if(console.error("ログインエラー:",_),_ instanceof Gn)switch(_.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":u("メールアドレスまたはパスワードが間違っています。");break;case"auth/invalid-email":u("有効なメールアドレスを入力してください。");break;default:u("ログインに失敗しました。");break}else u("予期せぬエラーが発生しました。")}};return R.jsxs("div",{style:{maxWidth:"400px",padding:"20px",border:"1px solid var(--input-border-color, #ccc)",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",backgroundColor:"var(--card-background-color, #fff)",color:"var(--text-color, #333)"},children:[R.jsx("h2",{children:"ログイン"}),R.jsxs("form",{onSubmit:g,children:[R.jsxs("div",{style:{marginBottom:"15px"},children:[R.jsx("label",{htmlFor:f,children:"メールアドレス"}),R.jsx("input",{id:f,type:"email",value:i,onChange:p=>e(p.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box",backgroundColor:"var(--input-background-color, #fff)",color:"var(--input-text-color, #333)",border:"1px solid var(--input-border-color, #ccc)"}})]}),R.jsxs("div",{style:{marginBottom:"15px"},children:[R.jsx("label",{htmlFor:m,children:"パスword"}),R.jsx("input",{id:m,type:"password",value:n,onChange:p=>s(p.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box",backgroundColor:"var(--input-background-color, #fff)",color:"var(--input-text-color, #333)",border:"1px solid var(--input-border-color, #ccc)"}})]}),o&&R.jsx("p",{style:{color:"red"},children:o}),R.jsx("button",{type:"submit",style:{width:"100%",padding:"10px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"ログインする"})]})]})},Sx=()=>{const[i,e]=U.useState(""),[n,s]=U.useState(""),[o,u]=U.useState(""),f=U.useId(),m=U.useId(),g=async p=>{p.preventDefault(),u("");try{const _=await _I(bu,i,n);console.log("ユーザー登録成功:",_.user),alert(`ようこそ、${_.user.email}さん！`)}catch(_){if(console.error("ユーザー登録エラー:",_),_ instanceof Gn)switch(_.code){case"auth/email-already-in-use":u("このメールアドレスは既に使用されています。");break;case"auth/weak-password":u("パスワードは6文字以上で入力してください。");break;case"auth/invalid-email":u("有効なメールアドレスを入力してください。");break;default:u("ユーザー登録に失敗しました。もう一度お試しください。");break}else u("予期せぬエラーが発生しました。")}};return R.jsxs("div",{style:{maxWidth:"400px",padding:"20px",border:"1px solid var(--input-border-color, #ccc)",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",backgroundColor:"var(--card-background-color, #fff)",color:"var(--text-color, #333)"},children:[R.jsx("h2",{children:"ユーザー登録"}),R.jsxs("form",{onSubmit:g,children:[R.jsxs("div",{style:{marginBottom:"15px"},children:[R.jsx("label",{htmlFor:f,children:"メールアドレス"}),R.jsx("input",{id:f,type:"email",value:i,onChange:p=>e(p.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box",backgroundColor:"var(--input-background-color, #fff)",color:"var(--input-text-color, #333)",border:"1px solid var(--input-border-color, #ccc)"}})]}),R.jsxs("div",{style:{marginBottom:"15px"},children:[R.jsx("label",{htmlFor:m,children:"パスワード"}),R.jsx("input",{id:m,type:"password",value:n,onChange:p=>s(p.target.value),required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box",backgroundColor:"var(--input-background-color, #fff)",color:"var(--input-text-color, #333)",border:"1px solid var(--input-border-color, #ccc)"}})]}),o&&R.jsx("p",{style:{color:"red"},children:o}),R.jsx("button",{type:"submit",style:{width:"100%",padding:"10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"登録する"})]})]})},Ax=()=>{const[i,e]=U.useState(""),n=async()=>{const s=new Rr;e("");try{const u=(await GI(bu,s)).user;console.log("Googleログイン成功:",u),alert(`ようこそ、${u.displayName}さん！`)}catch(o){console.error("Googleログインエラー:",o),e("Googleログインに失敗しました。"),o instanceof Gn&&o.code==="auth/popup-closed-by-user"&&e("")}};return R.jsxs("div",{style:{marginTop:"20px"},children:[R.jsxs("button",{type:"button",onClick:n,style:{padding:"10px 20px",backgroundColor:"#4285F4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"10px"},children:[R.jsxs("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48","aria-hidden":"true",children:[R.jsx("title",{children:"Google icon"})," ",R.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),R.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.53-4.18 7.09-10.36 7.09-17.65z"}),R.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),R.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.82l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),R.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),"Googleでサインイン"]}),i&&R.jsx("p",{style:{color:"red"},children:i})]})},wx=()=>{const[i,e]=An.useState(!0);return R.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[R.jsx("div",{style:{display:"flex",justifyContent:"center"},children:R.jsx(Ax,{})}),i?R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{textAlign:"center",margin:"20px 0",color:"#888"},children:"または"}),R.jsx(bx,{}),R.jsxs("div",{style:{textAlign:"center",margin:"20px 0",color:"#888"},children:["アカウントをお持ちでないですか？",R.jsx("button",{onClick:()=>e(!1),style:{color:"blue",textDecoration:"underline",border:"none",background:"none",cursor:"pointer"},children:"サインアップ"})]})]}):R.jsxs(R.Fragment,{children:[R.jsx("div",{style:{textAlign:"center",margin:"20px 0",color:"#888"},children:"または"}),R.jsx(Sx,{}),R.jsxs("div",{style:{textAlign:"center",margin:"20px 0",color:"#888"},children:["すでにアカウントをお持ちですか？",R.jsx("button",{onClick:()=>e(!0),style:{color:"blue",textDecoration:"underline",border:"none",background:"none",cursor:"pointer"},children:"ログイン"})]})]})]})},OS=()=>{const{currentUser:i}=Ru(),[e,n]=U.useState(""),[s,o]=U.useState(!1),[u,f]=U.useState("");U.useEffect(()=>{i?.displayName&&n(i.displayName)},[i]);const m=async g=>{if(g.preventDefault(),!!i){if(i.displayName===e.trim()){f("変更はありません。");return}o(!0),f("");try{await TI(i,{displayName:e.trim()});const p=Is(Vt,"users",i.uid);await $2(p,{displayName:e.trim()}),f("ユーザー名を更新しました！")}catch(p){console.error("プロフィールの更新に失敗しました:",p),f("エラーが発生しました。")}finally{o(!1)}}};return R.jsxs("div",{style:{padding:"20px",maxWidth:"500px",margin:"20px auto",backgroundColor:"var(--card-background-color, #ffffff)",color:"var(--text-color, #333)",border:"1px solid var(--input-border-color, #ccc)",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[R.jsx("h2",{children:"プロフィール設定"}),R.jsxs("form",{onSubmit:m,children:[R.jsxs("div",{style:{marginBottom:"15px"},children:[R.jsx("label",{htmlFor:"displayName",style:{display:"block",marginBottom:"5px",color:"var(--text-color, #333)"},children:"ユーザー名"}),R.jsx("input",{id:"displayName",type:"text",value:e,onChange:g=>n(g.target.value),placeholder:"表示名を入力",required:!0,style:{width:"100%",padding:"8px",boxSizing:"border-box",backgroundColor:"var(--input-background-color, #ffffff)",color:"var(--input-text-color, #333)",border:"1px solid var(--input-border-color, #ccc)"}})]}),R.jsx("button",{type:"submit",disabled:s,style:{padding:"10px 20px",cursor:"pointer",color:"var(--link-color, #007bff)"},children:s?"保存中...":"保存する"}),u&&R.jsx("p",{style:{marginTop:"10px",color:"var(--text-color, #333)"},children:u})]})]})};var nu=ab();function Rx(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return U.useMemo(()=>s=>{e.forEach(o=>o(s))},e)}const If=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ko(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function Ng(i){return"nodeType"in i}function kn(i){var e,n;return i?Ko(i)?i:Ng(i)&&(e=(n=i.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function xg(i){const{Document:e}=kn(i);return i instanceof e}function zu(i){return Ko(i)?!1:i instanceof kn(i).HTMLElement}function MS(i){return i instanceof kn(i).SVGElement}function Yo(i){return i?Ko(i)?i.document:Ng(i)?xg(i)?i:zu(i)||MS(i)?i.ownerDocument:document:document:document}const Xi=If?U.useLayoutEffect:U.useEffect;function Og(i){const e=U.useRef(i);return Xi(()=>{e.current=i}),U.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e.current==null?void 0:e.current(...s)},[])}function Ix(){const i=U.useRef(null),e=U.useCallback((s,o)=>{i.current=setInterval(s,o)},[]),n=U.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,n]}function Su(i,e){e===void 0&&(e=[i]);const n=U.useRef(i);return Xi(()=>{n.current!==i&&(n.current=i)},e),n}function Bu(i,e){const n=U.useRef();return U.useMemo(()=>{const s=i(n.current);return n.current=s,s},[...e])}function $h(i){const e=Og(i),n=U.useRef(null),s=U.useCallback(o=>{o!==n.current&&e?.(o,n.current),n.current=o},[]);return[n,s]}function Ap(i){const e=U.useRef();return U.useEffect(()=>{e.current=i},[i]),e.current}let Km={};function qu(i,e){return U.useMemo(()=>{if(e)return e;const n=Km[i]==null?0:Km[i]+1;return Km[i]=n,i+"-"+n},[i,e])}function VS(i){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.reduce((u,f)=>{const m=Object.entries(f);for(const[g,p]of m){const _=u[g];_!=null&&(u[g]=_+i*p)}return u},{...e})}}const Do=VS(1),Au=VS(-1);function Cx(i){return"clientX"in i&&"clientY"in i}function Mg(i){if(!i)return!1;const{KeyboardEvent:e}=kn(i.target);return e&&i instanceof e}function Dx(i){if(!i)return!1;const{TouchEvent:e}=kn(i.target);return e&&i instanceof e}function wp(i){if(Dx(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:n}=i.touches[0];return{x:e,y:n}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:n}=i.changedTouches[0];return{x:e,y:n}}}return Cx(i)?{x:i.clientX,y:i.clientY}:null}const Ta=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:n}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:n}=i;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(i){if(i)return[Ta.Translate.toString(i),Ta.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:n,easing:s}=i;return e+" "+n+"ms "+s}}}),HT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Nx(i){return i.matches(HT)?i:i.querySelector(HT)}const xx={display:"none"};function Ox(i){let{id:e,value:n}=i;return An.createElement("div",{id:e,style:xx},n)}function Mx(i){let{id:e,announcement:n,ariaLiveType:s="assertive"}=i;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return An.createElement("div",{id:e,style:o,role:"status","aria-live":s,"aria-atomic":!0},n)}function Vx(){const[i,e]=U.useState("");return{announce:U.useCallback(s=>{s!=null&&e(s)},[]),announcement:i}}const kS=U.createContext(null);function kx(i){const e=U.useContext(kS);U.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function Px(){const[i]=U.useState(()=>new Set),e=U.useCallback(s=>(i.add(s),()=>i.delete(s)),[i]);return[U.useCallback(s=>{let{type:o,event:u}=s;i.forEach(f=>{var m;return(m=f[o])==null?void 0:m.call(f,u)})},[i]),e]}const Lx={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ux={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:n}=i;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:n}=i;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function jx(i){let{announcements:e=Ux,container:n,hiddenTextDescribedById:s,screenReaderInstructions:o=Lx}=i;const{announce:u,announcement:f}=Vx(),m=qu("DndLiveRegion"),[g,p]=U.useState(!1);if(U.useEffect(()=>{p(!0)},[]),kx(U.useMemo(()=>({onDragStart(T){let{active:A}=T;u(e.onDragStart({active:A}))},onDragMove(T){let{active:A,over:x}=T;e.onDragMove&&u(e.onDragMove({active:A,over:x}))},onDragOver(T){let{active:A,over:x}=T;u(e.onDragOver({active:A,over:x}))},onDragEnd(T){let{active:A,over:x}=T;u(e.onDragEnd({active:A,over:x}))},onDragCancel(T){let{active:A,over:x}=T;u(e.onDragCancel({active:A,over:x}))}}),[u,e])),!g)return null;const _=An.createElement(An.Fragment,null,An.createElement(Ox,{id:s,value:o.draggable}),An.createElement(Mx,{id:m,announcement:f}));return n?nu.createPortal(_,n):_}var Ht;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(Ht||(Ht={}));function Wh(){}function Uo(i,e){return U.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function Vg(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return U.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const bi=Object.freeze({x:0,y:0});function PS(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function LS(i,e){let{data:{value:n}}=i,{data:{value:s}}=e;return n-s}function zx(i,e){let{data:{value:n}}=i,{data:{value:s}}=e;return s-n}function FT(i){let{left:e,top:n,height:s,width:o}=i;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+s},{x:e+o,y:n+s}]}function US(i,e){if(!i||i.length===0)return null;const[n]=i;return n[e]}function GT(i,e,n){return e===void 0&&(e=i.left),n===void 0&&(n=i.top),{x:e+i.width*.5,y:n+i.height*.5}}const kg=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=i;const o=GT(e,e.left,e.top),u=[];for(const f of s){const{id:m}=f,g=n.get(m);if(g){const p=PS(GT(g),o);u.push({id:m,data:{droppableContainer:f,value:p}})}}return u.sort(LS)},Bx=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=i;const o=FT(e),u=[];for(const f of s){const{id:m}=f,g=n.get(m);if(g){const p=FT(g),_=o.reduce((A,x,z)=>A+PS(p[z],x),0),T=Number((_/4).toFixed(4));u.push({id:m,data:{droppableContainer:f,value:T}})}}return u.sort(LS)};function qx(i,e){const n=Math.max(e.top,i.top),s=Math.max(e.left,i.left),o=Math.min(e.left+e.width,i.left+i.width),u=Math.min(e.top+e.height,i.top+i.height),f=o-s,m=u-n;if(s<o&&n<u){const g=e.width*e.height,p=i.width*i.height,_=f*m,T=_/(g+p-_);return Number(T.toFixed(4))}return 0}const Hx=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=i;const o=[];for(const u of s){const{id:f}=u,m=n.get(f);if(m){const g=qx(m,e);g>0&&o.push({id:f,data:{droppableContainer:u,value:g}})}}return o.sort(zx)};function Fx(i,e,n){return{...i,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function jS(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:bi}function Gx(i){return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.reduce((f,m)=>({...f,top:f.top+i*m.y,bottom:f.bottom+i*m.y,left:f.left+i*m.x,right:f.right+i*m.x}),{...n})}}const Kx=Gx(1);function Yx(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Qx(i,e,n){const s=Yx(e);if(!s)return i;const{scaleX:o,scaleY:u,x:f,y:m}=s,g=i.left-f-(1-o)*parseFloat(n),p=i.top-m-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),_=o?i.width/o:i.width,T=u?i.height/u:i.height;return{width:_,height:T,top:p,right:g+_,bottom:p+T,left:g}}const Xx={ignoreTransform:!1};function Qo(i,e){e===void 0&&(e=Xx);let n=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:_}=kn(i).getComputedStyle(i);p&&(n=Qx(n,p,_))}const{top:s,left:o,width:u,height:f,bottom:m,right:g}=n;return{top:s,left:o,width:u,height:f,bottom:m,right:g}}function KT(i){return Qo(i,{ignoreTransform:!0})}function $x(i){const e=i.innerWidth,n=i.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Wx(i,e){return e===void 0&&(e=kn(i).getComputedStyle(i)),e.position==="fixed"}function Zx(i,e){e===void 0&&(e=kn(i).getComputedStyle(i));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const u=e[o];return typeof u=="string"?n.test(u):!1})}function Cf(i,e){const n=[];function s(o){if(e!=null&&n.length>=e||!o)return n;if(xg(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!zu(o)||MS(o)||n.includes(o))return n;const u=kn(i).getComputedStyle(o);return o!==i&&Zx(o,u)&&n.push(o),Wx(o,u)?n:s(o.parentNode)}return i?s(i):n}function zS(i){const[e]=Cf(i,1);return e??null}function Ym(i){return!If||!i?null:Ko(i)?i:Ng(i)?xg(i)||i===Yo(i).scrollingElement?window:zu(i)?i:null:null}function BS(i){return Ko(i)?i.scrollX:i.scrollLeft}function qS(i){return Ko(i)?i.scrollY:i.scrollTop}function Rp(i){return{x:BS(i),y:qS(i)}}var Zt;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(Zt||(Zt={}));function HS(i){return!If||!i?!1:i===document.scrollingElement}function FS(i){const e={x:0,y:0},n=HS(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},s={x:i.scrollWidth-n.width,y:i.scrollHeight-n.height},o=i.scrollTop<=e.y,u=i.scrollLeft<=e.x,f=i.scrollTop>=s.y,m=i.scrollLeft>=s.x;return{isTop:o,isLeft:u,isBottom:f,isRight:m,maxScroll:s,minScroll:e}}const Jx={x:.2,y:.2};function eO(i,e,n,s,o){let{top:u,left:f,right:m,bottom:g}=n;s===void 0&&(s=10),o===void 0&&(o=Jx);const{isTop:p,isBottom:_,isLeft:T,isRight:A}=FS(i),x={x:0,y:0},z={x:0,y:0},F={height:e.height*o.y,width:e.width*o.x};return!p&&u<=e.top+F.height?(x.y=Zt.Backward,z.y=s*Math.abs((e.top+F.height-u)/F.height)):!_&&g>=e.bottom-F.height&&(x.y=Zt.Forward,z.y=s*Math.abs((e.bottom-F.height-g)/F.height)),!A&&m>=e.right-F.width?(x.x=Zt.Forward,z.x=s*Math.abs((e.right-F.width-m)/F.width)):!T&&f<=e.left+F.width&&(x.x=Zt.Backward,z.x=s*Math.abs((e.left+F.width-f)/F.width)),{direction:x,speed:z}}function tO(i){if(i===document.scrollingElement){const{innerWidth:u,innerHeight:f}=window;return{top:0,left:0,right:u,bottom:f,width:u,height:f}}const{top:e,left:n,right:s,bottom:o}=i.getBoundingClientRect();return{top:e,left:n,right:s,bottom:o,width:i.clientWidth,height:i.clientHeight}}function GS(i){return i.reduce((e,n)=>Do(e,Rp(n)),bi)}function nO(i){return i.reduce((e,n)=>e+BS(n),0)}function iO(i){return i.reduce((e,n)=>e+qS(n),0)}function rO(i,e){if(e===void 0&&(e=Qo),!i)return;const{top:n,left:s,bottom:o,right:u}=e(i);zS(i)&&(o<=0||u<=0||n>=window.innerHeight||s>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const sO=[["x",["left","right"],nO],["y",["top","bottom"],iO]];class Pg{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Cf(n),o=GS(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[u,f,m]of sO)for(const g of f)Object.defineProperty(this,g,{get:()=>{const p=m(s),_=o[u]-p;return this.rect[g]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class uu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var o;(o=this.target)==null||o.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function aO(i){const{EventTarget:e}=kn(i);return i instanceof e?i:Yo(i)}function Qm(i,e){const n=Math.abs(i.x),s=Math.abs(i.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var ai;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(ai||(ai={}));function YT(i){i.preventDefault()}function oO(i){i.stopPropagation()}var Be;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(Be||(Be={}));const KS={start:[Be.Space,Be.Enter],cancel:[Be.Esc],end:[Be.Space,Be.Enter,Be.Tab]},lO=(i,e)=>{let{currentCoordinates:n}=e;switch(i.code){case Be.Right:return{...n,x:n.x+25};case Be.Left:return{...n,x:n.x-25};case Be.Down:return{...n,y:n.y+25};case Be.Up:return{...n,y:n.y-25}}};class Hu{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new uu(Yo(n)),this.windowListeners=new uu(kn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ai.Resize,this.handleCancel),this.windowListeners.add(ai.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ai.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&rO(s),n(bi)}handleKeyDown(e){if(Mg(e)){const{active:n,context:s,options:o}=this.props,{keyboardCodes:u=KS,coordinateGetter:f=lO,scrollBehavior:m="smooth"}=o,{code:g}=e;if(u.end.includes(g)){this.handleEnd(e);return}if(u.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:p}=s.current,_=p?{x:p.left,y:p.top}:bi;this.referenceCoordinates||(this.referenceCoordinates=_);const T=f(e,{active:n,context:s.current,currentCoordinates:_});if(T){const A=Au(T,_),x={x:0,y:0},{scrollableAncestors:z}=s.current;for(const F of z){const H=e.code,{isTop:ne,isRight:se,isLeft:ie,isBottom:he,maxScroll:ue,minScroll:me}=FS(F),O=tO(F),w={x:Math.min(H===Be.Right?O.right-O.width/2:O.right,Math.max(H===Be.Right?O.left:O.left+O.width/2,T.x)),y:Math.min(H===Be.Down?O.bottom-O.height/2:O.bottom,Math.max(H===Be.Down?O.top:O.top+O.height/2,T.y))},I=H===Be.Right&&!se||H===Be.Left&&!ie,V=H===Be.Down&&!he||H===Be.Up&&!ne;if(I&&w.x!==T.x){const M=F.scrollLeft+A.x,P=H===Be.Right&&M<=ue.x||H===Be.Left&&M>=me.x;if(P&&!A.y){F.scrollTo({left:M,behavior:m});return}P?x.x=F.scrollLeft-M:x.x=H===Be.Right?F.scrollLeft-ue.x:F.scrollLeft-me.x,x.x&&F.scrollBy({left:-x.x,behavior:m});break}else if(V&&w.y!==T.y){const M=F.scrollTop+A.y,P=H===Be.Down&&M<=ue.y||H===Be.Up&&M>=me.y;if(P&&!A.x){F.scrollTo({top:M,behavior:m});return}P?x.y=F.scrollTop-M:x.y=H===Be.Down?F.scrollTop-ue.y:F.scrollTop-me.y,x.y&&F.scrollBy({top:-x.y,behavior:m});break}}this.handleMove(e,Do(Au(T,this.referenceCoordinates),x))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Hu.activators=[{eventName:"onKeyDown",handler:(i,e,n)=>{let{keyboardCodes:s=KS,onActivation:o}=e,{active:u}=n;const{code:f}=i.nativeEvent;if(s.start.includes(f)){const m=u.activatorNode.current;return m&&i.target!==m?!1:(i.preventDefault(),o?.({event:i.nativeEvent}),!0)}return!1}}];function QT(i){return!!(i&&"distance"in i)}function XT(i){return!!(i&&"delay"in i)}class Lg{constructor(e,n,s){var o;s===void 0&&(s=aO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:u}=e,{target:f}=u;this.props=e,this.events=n,this.document=Yo(f),this.documentListeners=new uu(this.document),this.listeners=new uu(s),this.windowListeners=new uu(kn(f)),this.initialCoordinates=(o=wp(u))!=null?o:bi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ai.Resize,this.handleCancel),this.windowListeners.add(ai.DragStart,YT),this.windowListeners.add(ai.VisibilityChange,this.handleCancel),this.windowListeners.add(ai.ContextMenu,YT),this.documentListeners.add(ai.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(XT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(QT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:o}=this.props;o(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ai.Click,oO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ai.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:o,props:u}=this,{onMove:f,options:{activationConstraint:m}}=u;if(!o)return;const g=(n=wp(e))!=null?n:bi,p=Au(o,g);if(!s&&m){if(QT(m)){if(m.tolerance!=null&&Qm(p,m.tolerance))return this.handleCancel();if(Qm(p,m.distance))return this.handleStart()}if(XT(m)&&Qm(p,m.tolerance))return this.handleCancel();this.handlePending(m,p);return}e.cancelable&&e.preventDefault(),f(g)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Be.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const uO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Fu extends Lg{constructor(e){const{event:n}=e,s=Yo(n.target);super(e,uO,s)}}Fu.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const cO={move:{name:"mousemove"},end:{name:"mouseup"}};var Ip;(function(i){i[i.RightClick=2]="RightClick"})(Ip||(Ip={}));class hO extends Lg{constructor(e){super(e,cO,Yo(e.event.target))}}hO.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:s}=e;return n.button===Ip.RightClick?!1:(s?.({event:n}),!0)}}];const Xm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class fO extends Lg{constructor(e){super(e,Xm)}static setup(){return window.addEventListener(Xm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Xm.move.name,e)};function e(){}}}fO.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:s}=e;const{touches:o}=n;return o.length>1?!1:(s?.({event:n}),!0)}}];var cu;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(cu||(cu={}));var Zh;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zh||(Zh={}));function dO(i){let{acceleration:e,activator:n=cu.Pointer,canScroll:s,draggingRect:o,enabled:u,interval:f=5,order:m=Zh.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:_,delta:T,threshold:A}=i;const x=pO({delta:T,disabled:!u}),[z,F]=Ix(),H=U.useRef({x:0,y:0}),ne=U.useRef({x:0,y:0}),se=U.useMemo(()=>{switch(n){case cu.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case cu.DraggableRect:return o}},[n,o,g]),ie=U.useRef(null),he=U.useCallback(()=>{const me=ie.current;if(!me)return;const O=H.current.x*ne.current.x,w=H.current.y*ne.current.y;me.scrollBy(O,w)},[]),ue=U.useMemo(()=>m===Zh.TreeOrder?[...p].reverse():p,[m,p]);U.useEffect(()=>{if(!u||!p.length||!se){F();return}for(const me of ue){if(s?.(me)===!1)continue;const O=p.indexOf(me),w=_[O];if(!w)continue;const{direction:I,speed:V}=eO(me,w,se,e,A);for(const M of["x","y"])x[M][I[M]]||(V[M]=0,I[M]=0);if(V.x>0||V.y>0){F(),ie.current=me,z(he,f),H.current=V,ne.current=I;return}}H.current={x:0,y:0},ne.current={x:0,y:0},F()},[e,he,s,F,u,f,JSON.stringify(se),JSON.stringify(x),z,p,ue,_,JSON.stringify(A)])}const mO={x:{[Zt.Backward]:!1,[Zt.Forward]:!1},y:{[Zt.Backward]:!1,[Zt.Forward]:!1}};function pO(i){let{delta:e,disabled:n}=i;const s=Ap(e);return Bu(o=>{if(n||!s||!o)return mO;const u={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Zt.Backward]:o.x[Zt.Backward]||u.x===-1,[Zt.Forward]:o.x[Zt.Forward]||u.x===1},y:{[Zt.Backward]:o.y[Zt.Backward]||u.y===-1,[Zt.Forward]:o.y[Zt.Forward]||u.y===1}}},[n,e,s])}function gO(i,e){const n=e!=null?i.get(e):void 0,s=n?n.node.current:null;return Bu(o=>{var u;return e==null?null:(u=s??o)!=null?u:null},[s,e])}function yO(i,e){return U.useMemo(()=>i.reduce((n,s)=>{const{sensor:o}=s,u=o.activators.map(f=>({eventName:f.eventName,handler:e(f.handler,s)}));return[...n,...u]},[]),[i,e])}var wu;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(wu||(wu={}));var Cp;(function(i){i.Optimized="optimized"})(Cp||(Cp={}));const $T=new Map;function _O(i,e){let{dragging:n,dependencies:s,config:o}=e;const[u,f]=U.useState(null),{frequency:m,measure:g,strategy:p}=o,_=U.useRef(i),T=H(),A=Su(T),x=U.useCallback(function(ne){ne===void 0&&(ne=[]),!A.current&&f(se=>se===null?ne:se.concat(ne.filter(ie=>!se.includes(ie))))},[A]),z=U.useRef(null),F=Bu(ne=>{if(T&&!n)return $T;if(!ne||ne===$T||_.current!==i||u!=null){const se=new Map;for(let ie of i){if(!ie)continue;if(u&&u.length>0&&!u.includes(ie.id)&&ie.rect.current){se.set(ie.id,ie.rect.current);continue}const he=ie.node.current,ue=he?new Pg(g(he),he):null;ie.rect.current=ue,ue&&se.set(ie.id,ue)}return se}return ne},[i,u,n,T,g]);return U.useEffect(()=>{_.current=i},[i]),U.useEffect(()=>{T||x()},[n,T]),U.useEffect(()=>{u&&u.length>0&&f(null)},[JSON.stringify(u)]),U.useEffect(()=>{T||typeof m!="number"||z.current!==null||(z.current=setTimeout(()=>{x(),z.current=null},m))},[m,T,x,...s]),{droppableRects:F,measureDroppableContainers:x,measuringScheduled:u!=null};function H(){switch(p){case wu.Always:return!1;case wu.BeforeDragging:return n;default:return!n}}}function YS(i,e){return Bu(n=>i?n||(typeof e=="function"?e(i):i):null,[e,i])}function vO(i,e){return YS(i,e)}function EO(i){let{callback:e,disabled:n}=i;const s=Og(e),o=U.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(s)},[s,n]);return U.useEffect(()=>()=>o?.disconnect(),[o]),o}function Df(i){let{callback:e,disabled:n}=i;const s=Og(e),o=U.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(s)},[n]);return U.useEffect(()=>()=>o?.disconnect(),[o]),o}function TO(i){return new Pg(Qo(i),i)}function WT(i,e,n){e===void 0&&(e=TO);const[s,o]=U.useState(null);function u(){o(g=>{if(!i)return null;if(i.isConnected===!1){var p;return(p=g??n)!=null?p:null}const _=e(i);return JSON.stringify(g)===JSON.stringify(_)?g:_})}const f=EO({callback(g){if(i)for(const p of g){const{type:_,target:T}=p;if(_==="childList"&&T instanceof HTMLElement&&T.contains(i)){u();break}}}}),m=Df({callback:u});return Xi(()=>{u(),i?(m?.observe(i),f?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),f?.disconnect())},[i]),s}function bO(i){const e=YS(i);return jS(i,e)}const ZT=[];function SO(i){const e=U.useRef(i),n=Bu(s=>i?s&&s!==ZT&&i&&e.current&&i.parentNode===e.current.parentNode?s:Cf(i):ZT,[i]);return U.useEffect(()=>{e.current=i},[i]),n}function AO(i){const[e,n]=U.useState(null),s=U.useRef(i),o=U.useCallback(u=>{const f=Ym(u.target);f&&n(m=>m?(m.set(f,Rp(f)),new Map(m)):null)},[]);return U.useEffect(()=>{const u=s.current;if(i!==u){f(u);const m=i.map(g=>{const p=Ym(g);return p?(p.addEventListener("scroll",o,{passive:!0}),[p,Rp(p)]):null}).filter(g=>g!=null);n(m.length?new Map(m):null),s.current=i}return()=>{f(i),f(u)};function f(m){m.forEach(g=>{const p=Ym(g);p?.removeEventListener("scroll",o)})}},[o,i]),U.useMemo(()=>i.length?e?Array.from(e.values()).reduce((u,f)=>Do(u,f),bi):GS(i):bi,[i,e])}function JT(i,e){e===void 0&&(e=[]);const n=U.useRef(null);return U.useEffect(()=>{n.current=null},e),U.useEffect(()=>{const s=i!==bi;s&&!n.current&&(n.current=i),!s&&n.current&&(n.current=null)},[i]),n.current?Au(i,n.current):bi}function wO(i){U.useEffect(()=>{if(!If)return;const e=i.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},i.map(e=>{let{sensor:n}=e;return n}))}function RO(i,e){return U.useMemo(()=>i.reduce((n,s)=>{let{eventName:o,handler:u}=s;return n[o]=f=>{u(f,e)},n},{}),[i,e])}function QS(i){return U.useMemo(()=>i?$x(i):null,[i])}const eb=[];function IO(i,e){e===void 0&&(e=Qo);const[n]=i,s=QS(n?kn(n):null),[o,u]=U.useState(eb);function f(){u(()=>i.length?i.map(g=>HS(g)?s:new Pg(e(g),g)):eb)}const m=Df({callback:f});return Xi(()=>{m?.disconnect(),f(),i.forEach(g=>m?.observe(g))},[i]),o}function CO(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return zu(e)?e:i}function DO(i){let{measure:e}=i;const[n,s]=U.useState(null),o=U.useCallback(p=>{for(const{target:_}of p)if(zu(_)){s(T=>{const A=e(_);return T?{...T,width:A.width,height:A.height}:A});break}},[e]),u=Df({callback:o}),f=U.useCallback(p=>{const _=CO(p);u?.disconnect(),_&&u?.observe(_),s(_?e(_):null)},[e,u]),[m,g]=$h(f);return U.useMemo(()=>({nodeRef:m,rect:n,setRef:g}),[n,m,g])}const NO=[{sensor:Fu,options:{}},{sensor:Hu,options:{}}],xO={current:{}},Dh={draggable:{measure:KT},droppable:{measure:KT,strategy:wu.WhileDragging,frequency:Cp.Optimized},dragOverlay:{measure:Qo}};class hu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const OO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new hu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Dh,measureDroppableContainers:Wh,windowRect:null,measuringScheduled:!1},MO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wh,draggableNodes:new Map,over:null,measureDroppableContainers:Wh},Nf=U.createContext(MO),XS=U.createContext(OO);function VO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new hu}}}function kO(i,e){switch(e.type){case Ht.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ht.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case Ht.DragEnd:case Ht.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ht.RegisterDroppable:{const{element:n}=e,{id:s}=n,o=new hu(i.droppable.containers);return o.set(s,n),{...i,droppable:{...i.droppable,containers:o}}}case Ht.SetDroppableDisabled:{const{id:n,key:s,disabled:o}=e,u=i.droppable.containers.get(n);if(!u||s!==u.key)return i;const f=new hu(i.droppable.containers);return f.set(n,{...u,disabled:o}),{...i,droppable:{...i.droppable,containers:f}}}case Ht.UnregisterDroppable:{const{id:n,key:s}=e,o=i.droppable.containers.get(n);if(!o||s!==o.key)return i;const u=new hu(i.droppable.containers);return u.delete(n),{...i,droppable:{...i.droppable,containers:u}}}default:return i}}function PO(i){let{disabled:e}=i;const{active:n,activatorEvent:s,draggableNodes:o}=U.useContext(Nf),u=Ap(s),f=Ap(n?.id);return U.useEffect(()=>{if(!e&&!s&&u&&f!=null){if(!Mg(u)||document.activeElement===u.target)return;const m=o.get(f);if(!m)return;const{activatorNode:g,node:p}=m;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const _ of[g.current,p.current]){if(!_)continue;const T=Nx(_);if(T){T.focus();break}}})}},[s,e,o,f,u]),null}function LO(i,e){let{transform:n,...s}=e;return i!=null&&i.length?i.reduce((o,u)=>u({transform:o,...s}),n):n}function UO(i){return U.useMemo(()=>({draggable:{...Dh.draggable,...i?.draggable},droppable:{...Dh.droppable,...i?.droppable},dragOverlay:{...Dh.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function jO(i){let{activeNode:e,measure:n,initialRect:s,config:o=!0}=i;const u=U.useRef(!1),{x:f,y:m}=typeof o=="boolean"?{x:o,y:o}:o;Xi(()=>{if(!f&&!m||!e){u.current=!1;return}if(u.current||!s)return;const p=e?.node.current;if(!p||p.isConnected===!1)return;const _=n(p),T=jS(_,s);if(f||(T.x=0),m||(T.y=0),u.current=!0,Math.abs(T.x)>0||Math.abs(T.y)>0){const A=zS(p);A&&A.scrollBy({top:T.y,left:T.x})}},[e,f,m,s,n])}const $S=U.createContext({...bi,scaleX:1,scaleY:1});var hs;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(hs||(hs={}));const Ug=U.memo(function(e){var n,s,o,u;let{id:f,accessibility:m,autoScroll:g=!0,children:p,sensors:_=NO,collisionDetection:T=Hx,measuring:A,modifiers:x,...z}=e;const F=U.useReducer(kO,void 0,VO),[H,ne]=F,[se,ie]=Px(),[he,ue]=U.useState(hs.Uninitialized),me=he===hs.Initialized,{draggable:{active:O,nodes:w,translate:I},droppable:{containers:V}}=H,M=O!=null?w.get(O):null,P=U.useRef({initial:null,translated:null}),C=U.useMemo(()=>{var at;return O!=null?{id:O,data:(at=M?.data)!=null?at:xO,rect:P}:null},[O,M]),Ke=U.useRef(null),[oe,K]=U.useState(null),[te,ce]=U.useState(null),Ee=Su(z,Object.values(z)),D=qu("DndDescribedBy",f),$=U.useMemo(()=>V.getEnabled(),[V]),ae=UO(A),{droppableRects:re,measureDroppableContainers:ge,measuringScheduled:Ie}=_O($,{dragging:me,dependencies:[I.x,I.y],config:ae.droppable}),ye=gO(w,O),mt=U.useMemo(()=>te?wp(te):null,[te]),ze=ci(),Rt=vO(ye,ae.draggable.measure);jO({activeNode:O!=null?w.get(O):null,config:ze.layoutShiftCompensation,initialRect:Rt,measure:ae.draggable.measure});const Me=WT(ye,ae.draggable.measure,Rt),gn=WT(ye?ye.parentElement:null),Gt=U.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),wn=V.getNodeFor((n=Gt.current.over)==null?void 0:n.id),Jt=DO({measure:ae.dragOverlay.measure}),Kn=(s=Jt.nodeRef.current)!=null?s:ye,ui=me?(o=Jt.rect)!=null?o:Me:null,yn=!!(Jt.nodeRef.current&&Jt.rect),Ra=bO(yn?null:Me),$i=QS(Kn?kn(Kn):null),_n=SO(me?wn??ye:null),Yn=IO(_n),Pr=LO(x,{transform:{x:I.x-Ra.x,y:I.y-Ra.y,scaleX:1,scaleY:1},activatorEvent:te,active:C,activeNodeRect:Me,containerNodeRect:gn,draggingNodeRect:ui,over:Gt.current.over,overlayNodeRect:Jt.rect,scrollableAncestors:_n,scrollableAncestorRects:Yn,windowRect:$i}),Wi=mt?Do(mt,I):null,Lr=AO(_n),Ia=JT(Lr),ht=JT(Lr,[Me]),Pe=Do(Pr,Ia),It=ui?Kx(ui,Pr):null,yt=C&&It?T({active:C,collisionRect:It,droppableRects:re,droppableContainers:$,pointerCoordinates:Wi}):null,Os=US(yt,"id"),[Qn,Si]=U.useState(null),Zi=yn?Pr:Do(Pr,ht),Ji=Fx(Zi,(u=Qn?.rect)!=null?u:null,Me),vn=U.useRef(null),er=U.useCallback((at,Lt)=>{let{sensor:ft,options:Rn}=Lt;if(Ke.current==null)return;const Tt=w.get(Ke.current);if(!Tt)return;const Ct=at.nativeEvent,Ut=new ft({active:Ke.current,activeNode:Tt,event:Ct,options:Rn,context:Gt,onAbort(De){if(!w.get(De))return;const{onDragAbort:Qe}=Ee.current,_t={id:De};Qe?.(_t),se({type:"onDragAbort",event:_t})},onPending(De,et,Qe,_t){if(!w.get(De))return;const{onDragPending:nr}=Ee.current,en={id:De,constraint:et,initialCoordinates:Qe,offset:_t};nr?.(en),se({type:"onDragPending",event:en})},onStart(De){const et=Ke.current;if(et==null)return;const Qe=w.get(et);if(!Qe)return;const{onDragStart:_t}=Ee.current,fi={activatorEvent:Ct,active:{id:et,data:Qe.data,rect:P}};nu.unstable_batchedUpdates(()=>{_t?.(fi),ue(hs.Initializing),ne({type:Ht.DragStart,initialCoordinates:De,active:et}),se({type:"onDragStart",event:fi}),K(vn.current),ce(Ct)})},onMove(De){ne({type:Ht.DragMove,coordinates:De})},onEnd:hi(Ht.DragEnd),onCancel:hi(Ht.DragCancel)});vn.current=Ut;function hi(De){return async function(){const{active:Qe,collisions:_t,over:fi,scrollAdjustedTranslate:nr}=Gt.current;let en=null;if(Qe&&nr){const{cancelDrop:Ai}=Ee.current;en={activatorEvent:Ct,active:Qe,collisions:_t,delta:nr,over:fi},De===Ht.DragEnd&&typeof Ai=="function"&&await Promise.resolve(Ai(en))&&(De=Ht.DragCancel)}Ke.current=null,nu.unstable_batchedUpdates(()=>{ne({type:De}),ue(hs.Uninitialized),Si(null),K(null),ce(null),vn.current=null;const Ai=De===Ht.DragEnd?"onDragEnd":"onDragCancel";if(en){const di=Ee.current[Ai];di?.(en),se({type:Ai,event:en})}})}}},[w]),tr=U.useCallback((at,Lt)=>(ft,Rn)=>{const Tt=ft.nativeEvent,Ct=w.get(Rn);if(Ke.current!==null||!Ct||Tt.dndKit||Tt.defaultPrevented)return;const Ut={active:Ct};at(ft,Lt.options,Ut)===!0&&(Tt.dndKit={capturedBy:Lt.sensor},Ke.current=Rn,er(ft,Lt))},[w,er]),Ur=yO(_,tr);wO(_),Xi(()=>{Me&&he===hs.Initializing&&ue(hs.Initialized)},[Me,he]),U.useEffect(()=>{const{onDragMove:at}=Ee.current,{active:Lt,activatorEvent:ft,collisions:Rn,over:Tt}=Gt.current;if(!Lt||!ft)return;const Ct={active:Lt,activatorEvent:ft,collisions:Rn,delta:{x:Pe.x,y:Pe.y},over:Tt};nu.unstable_batchedUpdates(()=>{at?.(Ct),se({type:"onDragMove",event:Ct})})},[Pe.x,Pe.y]),U.useEffect(()=>{const{active:at,activatorEvent:Lt,collisions:ft,droppableContainers:Rn,scrollAdjustedTranslate:Tt}=Gt.current;if(!at||Ke.current==null||!Lt||!Tt)return;const{onDragOver:Ct}=Ee.current,Ut=Rn.get(Os),hi=Ut&&Ut.rect.current?{id:Ut.id,rect:Ut.rect.current,data:Ut.data,disabled:Ut.disabled}:null,De={active:at,activatorEvent:Lt,collisions:ft,delta:{x:Tt.x,y:Tt.y},over:hi};nu.unstable_batchedUpdates(()=>{Si(hi),Ct?.(De),se({type:"onDragOver",event:De})})},[Os]),Xi(()=>{Gt.current={activatorEvent:te,active:C,activeNode:ye,collisionRect:It,collisions:yt,droppableRects:re,draggableNodes:w,draggingNode:Kn,draggingNodeRect:ui,droppableContainers:V,over:Qn,scrollableAncestors:_n,scrollAdjustedTranslate:Pe},P.current={initial:ui,translated:It}},[C,ye,yt,It,w,Kn,ui,re,V,Qn,_n,Pe]),dO({...ze,delta:I,draggingRect:It,pointerCoordinates:Wi,scrollableAncestors:_n,scrollableAncestorRects:Yn});const Ms=U.useMemo(()=>({active:C,activeNode:ye,activeNodeRect:Me,activatorEvent:te,collisions:yt,containerNodeRect:gn,dragOverlay:Jt,draggableNodes:w,droppableContainers:V,droppableRects:re,over:Qn,measureDroppableContainers:ge,scrollableAncestors:_n,scrollableAncestorRects:Yn,measuringConfiguration:ae,measuringScheduled:Ie,windowRect:$i}),[C,ye,Me,te,yt,gn,Jt,w,V,re,Qn,ge,_n,Yn,ae,Ie,$i]),Vs=U.useMemo(()=>({activatorEvent:te,activators:Ur,active:C,activeNodeRect:Me,ariaDescribedById:{draggable:D},dispatch:ne,draggableNodes:w,over:Qn,measureDroppableContainers:ge}),[te,Ur,C,Me,ne,D,w,Qn,ge]);return An.createElement(kS.Provider,{value:ie},An.createElement(Nf.Provider,{value:Vs},An.createElement(XS.Provider,{value:Ms},An.createElement($S.Provider,{value:Ji},p)),An.createElement(PO,{disabled:m?.restoreFocus===!1})),An.createElement(jx,{...m,hiddenTextDescribedById:D}));function ci(){const at=oe?.autoScrollEnabled===!1,Lt=typeof g=="object"?g.enabled===!1:g===!1,ft=me&&!at&&!Lt;return typeof g=="object"?{...g,enabled:ft}:{enabled:ft}}}),zO=U.createContext(null),tb="button",BO="Draggable";function qO(i){let{id:e,data:n,disabled:s=!1,attributes:o}=i;const u=qu(BO),{activators:f,activatorEvent:m,active:g,activeNodeRect:p,ariaDescribedById:_,draggableNodes:T,over:A}=U.useContext(Nf),{role:x=tb,roleDescription:z="draggable",tabIndex:F=0}=o??{},H=g?.id===e,ne=U.useContext(H?$S:zO),[se,ie]=$h(),[he,ue]=$h(),me=RO(f,e),O=Su(n);Xi(()=>(T.set(e,{id:e,key:u,node:se,activatorNode:he,data:O}),()=>{const I=T.get(e);I&&I.key===u&&T.delete(e)}),[T,e]);const w=U.useMemo(()=>({role:x,tabIndex:F,"aria-disabled":s,"aria-pressed":H&&x===tb?!0:void 0,"aria-roledescription":z,"aria-describedby":_.draggable}),[s,x,F,H,z,_.draggable]);return{active:g,activatorEvent:m,activeNodeRect:p,attributes:w,isDragging:H,listeners:s?void 0:me,node:se,over:A,setNodeRef:ie,setActivatorNodeRef:ue,transform:ne}}function HO(){return U.useContext(XS)}const FO="Droppable",GO={timeout:25};function KO(i){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:o}=i;const u=qu(FO),{active:f,dispatch:m,over:g,measureDroppableContainers:p}=U.useContext(Nf),_=U.useRef({disabled:n}),T=U.useRef(!1),A=U.useRef(null),x=U.useRef(null),{disabled:z,updateMeasurementsFor:F,timeout:H}={...GO,...o},ne=Su(F??s),se=U.useCallback(()=>{if(!T.current){T.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{p(Array.isArray(ne.current)?ne.current:[ne.current]),x.current=null},H)},[H]),ie=Df({callback:se,disabled:z||!f}),he=U.useCallback((w,I)=>{ie&&(I&&(ie.unobserve(I),T.current=!1),w&&ie.observe(w))},[ie]),[ue,me]=$h(he),O=Su(e);return U.useEffect(()=>{!ie||!ue.current||(ie.disconnect(),T.current=!1,ie.observe(ue.current))},[ue,ie]),U.useEffect(()=>(m({type:Ht.RegisterDroppable,element:{id:s,key:u,disabled:n,node:ue,rect:A,data:O}}),()=>m({type:Ht.UnregisterDroppable,key:u,id:s})),[s]),U.useEffect(()=>{n!==_.current.disabled&&(m({type:Ht.SetDroppableDisabled,id:s,key:u,disabled:n}),_.current.disabled=n)},[s,u,n,m]),{active:f,rect:A,isOver:g?.id===s,node:ue,over:g,setNodeRef:me}}function Gu(i,e,n){const s=i.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function YO(i,e){return i.reduce((n,s,o)=>{const u=e.get(s);return u&&(n[o]=u),n},Array(i.length))}function yh(i){return i!==null&&i>=0}function QO(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==e[n])return!1;return!0}function XO(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const WS=i=>{let{rects:e,activeIndex:n,overIndex:s,index:o}=i;const u=Gu(e,s,n),f=e[o],m=u[o];return!m||!f?null:{x:m.left-f.left,y:m.top-f.top,scaleX:m.width/f.width,scaleY:m.height/f.height}},_h={scaleX:1,scaleY:1},jg=i=>{var e;let{activeIndex:n,activeNodeRect:s,index:o,rects:u,overIndex:f}=i;const m=(e=u[n])!=null?e:s;if(!m)return null;if(o===n){const p=u[f];return p?{x:0,y:n<f?p.top+p.height-(m.top+m.height):p.top-m.top,..._h}:null}const g=$O(u,o,n);return o>n&&o<=f?{x:0,y:-m.height-g,..._h}:o<n&&o>=f?{x:0,y:m.height+g,..._h}:{x:0,y:0,..._h}};function $O(i,e,n){const s=i[e],o=i[e-1],u=i[e+1];return s?n<e?o?s.top-(o.top+o.height):u?u.top-(s.top+s.height):0:u?u.top-(s.top+s.height):o?s.top-(o.top+o.height):0:0}const ZS="Sortable",JS=An.createContext({activeIndex:-1,containerId:ZS,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:WS,disabled:{draggable:!1,droppable:!1}});function zg(i){let{children:e,id:n,items:s,strategy:o=WS,disabled:u=!1}=i;const{active:f,dragOverlay:m,droppableRects:g,over:p,measureDroppableContainers:_}=HO(),T=qu(ZS,n),A=m.rect!==null,x=U.useMemo(()=>s.map(me=>typeof me=="object"&&"id"in me?me.id:me),[s]),z=f!=null,F=f?x.indexOf(f.id):-1,H=p?x.indexOf(p.id):-1,ne=U.useRef(x),se=!QO(x,ne.current),ie=H!==-1&&F===-1||se,he=XO(u);Xi(()=>{se&&z&&_(x)},[se,x,z,_]),U.useEffect(()=>{ne.current=x},[x]);const ue=U.useMemo(()=>({activeIndex:F,containerId:T,disabled:he,disableTransforms:ie,items:x,overIndex:H,useDragOverlay:A,sortedRects:YO(x,g),strategy:o}),[F,T,he.draggable,he.droppable,ie,x,H,g,A,o]);return An.createElement(JS.Provider,{value:ue},e)}const WO=i=>{let{id:e,items:n,activeIndex:s,overIndex:o}=i;return Gu(n,s,o).indexOf(e)},ZO=i=>{let{containerId:e,isSorting:n,wasDragging:s,index:o,items:u,newIndex:f,previousItems:m,previousContainerId:g,transition:p}=i;return!p||!s||m!==u&&o===f?!1:n?!0:f!==o&&e===g},JO={duration:200,easing:"ease"},eA="transform",eM=Ta.Transition.toString({property:eA,duration:0,easing:"linear"}),tM={roleDescription:"sortable"};function nM(i){let{disabled:e,index:n,node:s,rect:o}=i;const[u,f]=U.useState(null),m=U.useRef(n);return Xi(()=>{if(!e&&n!==m.current&&s.current){const g=o.current;if(g){const p=Qo(s.current,{ignoreTransform:!0}),_={x:g.left-p.left,y:g.top-p.top,scaleX:g.width/p.width,scaleY:g.height/p.height};(_.x||_.y)&&f(_)}}n!==m.current&&(m.current=n)},[e,n,s,o]),U.useEffect(()=>{u&&f(null)},[u]),u}function Bg(i){let{animateLayoutChanges:e=ZO,attributes:n,disabled:s,data:o,getNewIndex:u=WO,id:f,strategy:m,resizeObserverConfig:g,transition:p=JO}=i;const{items:_,containerId:T,activeIndex:A,disabled:x,disableTransforms:z,sortedRects:F,overIndex:H,useDragOverlay:ne,strategy:se}=U.useContext(JS),ie=iM(s,x),he=_.indexOf(f),ue=U.useMemo(()=>({sortable:{containerId:T,index:he,items:_},...o}),[T,o,he,_]),me=U.useMemo(()=>_.slice(_.indexOf(f)),[_,f]),{rect:O,node:w,isOver:I,setNodeRef:V}=KO({id:f,data:ue,disabled:ie.droppable,resizeObserverConfig:{updateMeasurementsFor:me,...g}}),{active:M,activatorEvent:P,activeNodeRect:C,attributes:Ke,setNodeRef:oe,listeners:K,isDragging:te,over:ce,setActivatorNodeRef:Ee,transform:D}=qO({id:f,data:ue,attributes:{...tM,...n},disabled:ie.draggable}),$=Rx(V,oe),ae=!!M,re=ae&&!z&&yh(A)&&yh(H),ge=!ne&&te,Ie=ge&&re?D:null,mt=re?Ie??(m??se)({rects:F,activeNodeRect:C,activeIndex:A,overIndex:H,index:he}):null,ze=yh(A)&&yh(H)?u({id:f,items:_,activeIndex:A,overIndex:H}):he,Rt=M?.id,Me=U.useRef({activeId:Rt,items:_,newIndex:ze,containerId:T}),gn=_!==Me.current.items,Gt=e({active:M,containerId:T,isDragging:te,isSorting:ae,id:f,index:he,items:_,newIndex:Me.current.newIndex,previousItems:Me.current.items,previousContainerId:Me.current.containerId,transition:p,wasDragging:Me.current.activeId!=null}),wn=nM({disabled:!Gt,index:he,node:w,rect:O});return U.useEffect(()=>{ae&&Me.current.newIndex!==ze&&(Me.current.newIndex=ze),T!==Me.current.containerId&&(Me.current.containerId=T),_!==Me.current.items&&(Me.current.items=_)},[ae,ze,T,_]),U.useEffect(()=>{if(Rt===Me.current.activeId)return;if(Rt!=null&&Me.current.activeId==null){Me.current.activeId=Rt;return}const Kn=setTimeout(()=>{Me.current.activeId=Rt},50);return()=>clearTimeout(Kn)},[Rt]),{active:M,activeIndex:A,attributes:Ke,data:ue,rect:O,index:he,newIndex:ze,items:_,isOver:I,isSorting:ae,isDragging:te,listeners:K,node:w,overIndex:H,over:ce,setNodeRef:$,setActivatorNodeRef:Ee,setDroppableNodeRef:V,setDraggableNodeRef:oe,transform:wn??mt,transition:Jt()};function Jt(){if(wn||gn&&Me.current.newIndex===he)return eM;if(!(ge&&!Mg(P)||!p)&&(ae||Gt))return Ta.Transition.toString({...p,property:eA})}}function iM(i,e){var n,s;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(n=i?.draggable)!=null?n:e.draggable,droppable:(s=i?.droppable)!=null?s:e.droppable}}function Jh(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const rM=[Be.Down,Be.Right,Be.Up,Be.Left],qg=(i,e)=>{let{context:{active:n,collisionRect:s,droppableRects:o,droppableContainers:u,over:f,scrollableAncestors:m}}=e;if(rM.includes(i.code)){if(i.preventDefault(),!n||!s)return;const g=[];u.getEnabled().forEach(T=>{if(!T||T!=null&&T.disabled)return;const A=o.get(T.id);if(A)switch(i.code){case Be.Down:s.top<A.top&&g.push(T);break;case Be.Up:s.top>A.top&&g.push(T);break;case Be.Left:s.left>A.left&&g.push(T);break;case Be.Right:s.left<A.left&&g.push(T);break}});const p=Bx({collisionRect:s,droppableRects:o,droppableContainers:g});let _=US(p,"id");if(_===f?.id&&p.length>1&&(_=p[1].id),_!=null){const T=u.get(n.id),A=u.get(_),x=A?o.get(A.id):null,z=A?.node.current;if(z&&x&&T&&A){const H=Cf(z).some((me,O)=>m[O]!==me),ne=tA(T,A),se=sM(T,A),ie=H||!ne?{x:0,y:0}:{x:se?s.width-x.width:0,y:se?s.height-x.height:0},he={x:x.left,y:x.top};return ie.x&&ie.y?he:Au(he,ie)}}}};function tA(i,e){return!Jh(i)||!Jh(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function sM(i,e){return!Jh(i)||!Jh(e)||!tA(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}const aM=({item:i,onDelete:e})=>{const{attributes:n,listeners:s,setNodeRef:o,transform:u,transition:f,isDragging:m}=Bg({id:i.id}),g={transform:Ta.Transform.toString(u),transition:f,zIndex:m?1:"auto"};return R.jsxs("li",{ref:o,style:g,className:`list-item-detailed ${m?"dragging":""}`,children:[R.jsx("div",{className:"drag-handle",...n,...s,children:"⠿"}),R.jsxs("div",{className:"item-content",children:[R.jsxs("div",{className:"item-name",children:[R.jsx("strong",{children:i.label})," (",i.type,")"]}),i.type==="number"&&R.jsxs("small",{children:["基準値: ",i.standardValue,", 許容差: ",i.errorThreshold]})]}),R.jsx("button",{onClick:()=>e(i.id),className:"delete-button-small",children:"×"})]})},oM=({placeId:i,category:e})=>{const[n,s]=U.useState([]),[o,u]=U.useState({label:"",type:"number",standardValue:"0",errorThreshold:"0"});U.useEffect(()=>{const _=wo(Gi(Vt,"places",i,"categories",e.id,"items"),Ro("order"));return Co(_,A=>{s(A.docs.map(x=>({id:x.id,...x.data()})))})},[i,e]);const f=async _=>{if(_.preventDefault(),o.label.trim()==="")return;const T={label:o.label.trim(),type:o.type,order:n.length,...o.type==="number"&&{standardValue:parseFloat(o.standardValue)||0,errorThreshold:parseFloat(o.errorThreshold)||0}};await Sf(Gi(Vt,"places",i,"categories",e.id,"items"),T),u({label:"",type:"number",standardValue:"0",errorThreshold:"0"})},m=async _=>{window.confirm("この項目を削除しますか？")&&await Rg(Is(Vt,"places",i,"categories",e.id,"items",_))},g=Vg(Uo(Fu),Uo(Hu,{coordinateGetter:qg})),p=async _=>{const{active:T,over:A}=_;if(A&&T.id!==A.id){const x=n.findIndex(ne=>ne.id===T.id),z=n.findIndex(ne=>ne.id===A.id),F=Gu(n,x,z);s(F);const H=Ig(Vt);F.forEach((ne,se)=>{const ie=Is(Vt,"places",i,"categories",e.id,"items",ne.id);H.update(ie,{order:se})}),await H.commit()}};return R.jsxs("div",{className:"column",children:[R.jsx("div",{className:"column-header",children:R.jsxs("h3",{children:["計測項目 (",e.name,")"]})}),R.jsxs("div",{className:"column-content",children:[R.jsx(Ug,{sensors:g,collisionDetection:kg,onDragEnd:p,children:R.jsx(zg,{items:n,strategy:jg,children:R.jsx("ul",{className:"item-list-detailed",children:n.map(_=>R.jsx(aM,{item:_,onDelete:m},_.id))})})}),R.jsxs("form",{onSubmit:f,className:"add-form-detailed",children:[R.jsxs("div",{className:"form-row",children:[R.jsx("label",{htmlFor:"item-label",children:"項目名"}),R.jsx("input",{id:"item-label",value:o.label,onChange:_=>u({...o,label:_.target.value}),placeholder:"例: 排水流量計",required:!0})]}),R.jsxs("div",{className:"form-row",children:[R.jsx("label",{htmlFor:"item-type",children:"入力タイプ"}),R.jsxs("select",{id:"item-type",value:o.type,onChange:_=>u({...o,type:_.target.value}),children:[R.jsx("option",{value:"number",children:"数値"}),R.jsx("option",{value:"checkbox",children:"チェック"})]})]}),o.type==="number"&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"form-row",children:[R.jsx("label",{htmlFor:"item-std-val",children:"基準値"}),R.jsx("input",{id:"item-std-val",type:"number",step:"any",value:o.standardValue,onChange:_=>u({...o,standardValue:_.target.value})})]}),R.jsxs("div",{className:"form-row",children:[R.jsx("label",{htmlFor:"item-err-thresh",children:"許容差 (±)"}),R.jsx("input",{id:"item-err-thresh",type:"number",step:"any",value:o.errorThreshold,onChange:_=>u({...o,errorThreshold:_.target.value})})]})]}),R.jsx("button",{type:"submit",children:"項目を追加"})]})]})]})},lM=({category:i,selected:e,onClick:n,onDelete:s})=>{const{attributes:o,listeners:u,setNodeRef:f,transform:m,transition:g,isDragging:p}=Bg({id:i.id}),_={transform:Ta.Transform.toString(m),transition:g,zIndex:p?1:"auto"};return R.jsxs("li",{ref:f,style:_,className:`list-item ${e?"selected":""} ${p?"dragging":""}`,onClick:n,children:[R.jsx("div",{className:"drag-handle",...o,...u,children:"⠿"}),R.jsx("span",{className:"item-content",children:i.name}),R.jsx("button",{onClick:T=>{T.stopPropagation(),s()},className:"delete-button-small",children:"×"})]})},uM=({place:i})=>{const[e,n]=U.useState([]),[s,o]=U.useState(""),[u,f]=U.useState(null);U.useEffect(()=>{f(null);const T=wo(Gi(Vt,"places",i.id,"categories"),Ro("order"));return Co(T,x=>{n(x.docs.map(z=>({id:z.id,...z.data()})))})},[i]);const m=async T=>{T.preventDefault(),s.trim()!==""&&(await Sf(Gi(Vt,"places",i.id,"categories"),{name:s,order:e.length}),o(""))},g=async T=>{window.confirm("この施設を削除しますか？")&&(await Rg(Is(Vt,"places",i.id,"categories",T)),f(null))},p=Vg(Uo(Fu),Uo(Hu,{coordinateGetter:qg})),_=async T=>{const{active:A,over:x}=T;if(x&&A.id!==x.id){const z=e.findIndex(se=>se.id===A.id),F=e.findIndex(se=>se.id===x.id),H=Gu(e,z,F);n(H);const ne=Ig(Vt);H.forEach((se,ie)=>{const he=Is(Vt,"places",i.id,"categories",se.id);ne.update(he,{order:ie})}),await ne.commit()}};return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"column",children:[R.jsx("div",{className:"column-header",children:R.jsxs("h3",{children:["施設 (",i.name,")"]})}),R.jsxs("div",{className:"column-content",children:[R.jsx(Ug,{sensors:p,collisionDetection:kg,onDragEnd:_,children:R.jsx(zg,{items:e,strategy:jg,children:R.jsx("ul",{className:"item-list",children:e.map(T=>R.jsx(lM,{category:T,selected:u?.id===T.id,onClick:()=>f(T),onDelete:()=>g(T.id)},T.id))})})}),R.jsxs("form",{onSubmit:m,className:"add-form",children:[R.jsx("input",{type:"text",value:s,onChange:T=>o(T.target.value),placeholder:"新しい施設を追加"}),R.jsx("button",{type:"submit",children:"+"})]})]})]}),u&&R.jsx(oM,{placeId:i.id,category:u})]})},cM=({place:i,selected:e,onClick:n,onDelete:s})=>{const{attributes:o,listeners:u,setNodeRef:f,transform:m,transition:g,isDragging:p}=Bg({id:i.id}),_={transform:Ta.Transform.toString(m),transition:g,zIndex:p?1:"auto"};return R.jsxs("li",{ref:f,style:_,className:`list-item ${e?"selected":""} ${p?"dragging":""}`,onClick:n,children:[R.jsx("div",{className:"drag-handle",...o,...u,children:"⠿"}),R.jsx("span",{className:"item-content",children:i.name}),R.jsx("button",{onClick:T=>{T.stopPropagation(),s()},className:"delete-button-small",children:"×"})]})},hM=()=>{const[i,e]=U.useState([]),[n,s]=U.useState(""),[o,u]=U.useState(null);U.useEffect(()=>{const _=wo(Gi(Vt,"places"),Ro("order"));return Co(_,A=>{e(A.docs.map(x=>({id:x.id,...x.data()})))})},[]);const f=async _=>{_.preventDefault(),n.trim()!==""&&(await Sf(Gi(Vt,"places"),{name:n,order:i.length}),s(""))},m=async _=>{window.confirm("この場所を削除すると、関連する施設や項目もすべて削除されます。よろしいですか？")&&(await Rg(Is(Vt,"places",_)),u(null))},g=Vg(Uo(Fu),Uo(Hu,{coordinateGetter:qg})),p=async _=>{const{active:T,over:A}=_;if(A&&T.id!==A.id){const x=i.findIndex(ne=>ne.id===T.id),z=i.findIndex(ne=>ne.id===A.id),F=Gu(i,x,z);e(F);const H=Ig(Vt);F.forEach((ne,se)=>{const ie=Is(Vt,"places",ne.id);H.update(ie,{order:se})}),await H.commit()}};return R.jsxs("div",{className:"form-management-layout",children:[R.jsxs("div",{className:"column",children:[R.jsx("div",{className:"column-header",children:R.jsx("h3",{children:"場所"})}),R.jsxs("div",{className:"column-content",children:[R.jsx(Ug,{sensors:g,collisionDetection:kg,onDragEnd:p,children:R.jsx(zg,{items:i,strategy:jg,children:R.jsx("ul",{className:"item-list",children:i.map(_=>R.jsx(cM,{place:_,selected:o?.id===_.id,onClick:()=>u(_),onDelete:()=>m(_.id)},_.id))})})}),R.jsxs("form",{onSubmit:f,className:"add-form",children:[R.jsx("input",{type:"text",value:n,onChange:_=>s(_.target.value),placeholder:"新しい場所を追加"}),R.jsx("button",{type:"submit",children:"+"})]})]})]}),o&&R.jsx(uM,{place:o})]})},fM=wf(Rf,"getAllUsers"),dM=wf(Rf,"addAdminRole"),mM=wf(Rf,"removeAdminRole"),pM=wf(Rf,"toggleUserApproval"),gM=()=>{const[i,e]=U.useState([]),[n,s]=U.useState(!0),[o,u]=U.useState(""),f=async()=>{s(!0),u("");try{const p=await fM();e(p.data)}catch(p){u("ユーザー情報の取得に失敗しました。"),console.error(p)}finally{s(!1)}};U.useEffect(()=>{f()},[]);const m=async p=>{const _=!p.isApproved;if(window.confirm(`${p.email} を「${_?"承認済み":"未認証"}」に変更しますか？`))try{await pM({uid:p.uid,isApproved:_}),await f()}catch(A){alert("承認状態の変更に失敗しました。"),console.error(A)}},g=async p=>{const _=p.isAdmin?mM:dM,T=p.isAdmin?"削除":"付与";if(!window.confirm(`${p.email} の管理者権限を${T}します。よろしいですか？`))return;if(window.prompt(`この操作は危険です。確認のため、「${p.email}」と入力してください。`)!==p.email){alert("入力が一致しません。操作はキャンセルされました。");return}try{await _({email:p.email}),await f()}catch(z){alert("管理者権限の操作に失敗しました。"),console.error(z)}};return n?R.jsx("div",{children:"ユーザーを読み込み中..."}):o?R.jsx("div",{className:"error-message",children:o}):R.jsxs("div",{className:"user-admin-container",children:[R.jsx("h2",{children:"ユーザー管理"}),R.jsxs("table",{className:"user-table",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{children:"メールアドレス"}),R.jsx("th",{children:"承認状態"}),R.jsx("th",{children:"役割"}),R.jsx("th",{children:"操作"})]})}),R.jsx("tbody",{children:i.map(p=>R.jsxs("tr",{children:[R.jsx("td",{children:p.email||"(メールアドレスなし)"}),R.jsx("td",{children:R.jsx("span",{className:`status-badge ${p.isApproved?"approved":"pending"}`,children:p.isApproved?"承認済み":"未認証"})}),R.jsx("td",{children:p.isAdmin?"管理者":"一般ユーザー"}),R.jsxs("td",{className:"action-buttons",children:[R.jsx("button",{onClick:()=>m(p),className:"approval-button",children:p.isApproved?"未認証に戻す":"承認する"}),R.jsx("button",{onClick:()=>g(p),className:"admin-role-button",children:"管理者権限"})]})]},p.uid))})]})]})},yM=()=>{const[i,e]=U.useState([]),[n,s]=U.useState(!0);return U.useEffect(()=>{s(!0);const o=wo(Gi(Vt,"places"),Ro("order")),u=Co(o,f=>{const m=f.docs.map(p=>({id:p.id,name:p.data().name,categories:[]})),g=[];return m.forEach((p,_)=>{const T=wo(Gi(Vt,"places",p.id,"categories"),Ro("order")),A=Co(T,x=>{x.docs.forEach((z,F)=>{const H=wo(Gi(Vt,"places",p.id,"categories",z.id,"items"),Ro("order")),ne=Co(H,se=>{const ie=se.docs.map(he=>({id:he.id,...he.data()}));e(he=>{const ue=[...he];return ue[_]&&(ue[_].categories[F]?ue[_].categories[F].items=ie:ue[_].categories[F]={id:z.id,name:z.data().name,items:ie}),ue})});g.push(ne)}),e(z=>{const F=[...z];return F[_]&&(F[_].categories=x.docs.map(H=>({id:H.id,name:H.data().name,items:F[_]?.categories.find(ne=>ne.id===H.id)?.items||[]}))),F})});g.push(A)}),e(m),s(!1),()=>{g.forEach(p=>p())}});return()=>{u()}},[]),{formStructure:i,loading:n}},nb=({id:i,label:e,primary:n=!1,size:s="medium",backgroundColor:o,type:u="text",placeholder:f,value:m,onChange:g,error:p,warning:_,standardValue:T,errorThreshold:A,...x})=>{const z=n?"storybook-input--primary":"storybook-input--secondary",F=p?"storybook-input--error-state":"",H=!p&&_?"storybook-input--warning-state":"",ne=u==="number";return R.jsxs("div",{className:"input-wrapper",children:[R.jsx("label",{htmlFor:i,className:"input-label",children:e}),R.jsxs("div",{className:"input-container",children:[" ",R.jsx("input",{id:i,type:ne?"text":u,inputMode:ne?"numeric":void 0,pattern:ne?"[0-9]*":void 0,placeholder:f,className:["storybook-input",`storybook-input--${s}`,z,F,H].join(" "),style:o?{backgroundColor:o}:{},value:m,onChange:g,...x}),(typeof T=="number"||typeof A=="number")&&R.jsxs("div",{className:"input-info",children:[typeof T=="number"&&R.jsxs("span",{children:["基準: ",T]}),typeof A=="number"&&R.jsxs("span",{children:["(±",A,")"]})]})]}),p&&R.jsx("p",{className:"storybook-input-error",children:p}),!p&&_&&R.jsx("p",{className:"storybook-input-warning",children:_})]})},_M=({checked:i,onChange:e,primary:n=!1,size:s="medium",label:o,...u})=>{const f=n?"storybook-checkbox--primary":"storybook-checkbox--secondary";return R.jsxs("label",{className:["storybook-checkbox-wrapper",`storybook-checkbox-wrapper--${s}`].join(" "),children:[R.jsx("input",{type:"checkbox",checked:i,onChange:e,className:"storybook-checkbox-input",...u}),R.jsx("span",{className:["storybook-checkbox-visual",f].join(" ")}),R.jsx("span",{className:"storybook-checkbox-label",children:o})]})},vM=({item:i,value:e,error:n,warning:s,detail:o,onValueChange:u,onDetailChange:f})=>R.jsxs("div",{className:"form-item-wrapper",children:[R.jsx("div",{className:"form-item",children:i.type==="number"?R.jsx(nb,{id:i.id,label:i.label,type:"number",value:e||"",onChange:m=>u(i,m.target.value),error:n,warning:s,placeholder:typeof i.standardValue=="number"?String(i.standardValue):"数値を入力",standardValue:i.standardValue,errorThreshold:i.errorThreshold}):R.jsx(_M,{label:i.label,checked:e??!1,onChange:m=>u(i,m.target.checked)})}),i.type==="checkbox"&&!(e??!1)&&R.jsx("div",{className:"form-item-details",children:R.jsx(nb,{id:`${i.id}-details`,label:"エラー詳細",type:"text",value:o||"",onChange:m=>f(i,m.target.value),error:n,warning:s})})]}),EM=({formStructure:i,inputValues:e,details:n,warnings:s,onBack:o,onSubmit:u,isSubmitting:f})=>{const{currentUser:m}=Ru(),[g,p]=U.useState(!1),_=Object.values(s).some(x=>!!x),T=()=>{_?p(!0):u()},A=()=>{p(!1),u()};return R.jsxs("div",{className:"confirmation-screen",children:[R.jsx("h2",{children:"入力内容の確認"}),R.jsxs("div",{className:"confirmation-summary",style:{marginBottom:"1rem"},children:[R.jsxs("p",{children:[R.jsx("strong",{children:"日時:"})," ",new Date().toLocaleString("ja-JP")]}),R.jsxs("p",{children:[R.jsx("strong",{children:"担当者:"})," ",m?.displayName||m?.email]})]}),R.jsx("div",{className:"confirmation-summary",children:i.map(x=>R.jsxs("div",{className:"summary-place",children:[R.jsx("h3",{children:x.name}),x.categories.map(z=>R.jsxs("div",{className:"summary-category",children:[R.jsx("h4",{children:z.name}),R.jsx("ul",{children:z.items.map(F=>{const H=e[F.id],ne=n[F.id],se=s[F.id],ie=F.type==="checkbox"?H?"正常":ne||"(詳細未入力)":H||"未入力";return R.jsxs("li",{className:"summary-item",children:[R.jsx("span",{className:"item-label",children:F.label}),R.jsxs("div",{className:"item-value-container",children:[R.jsx("span",{className:"item-value",children:ie}),se&&R.jsxs("span",{className:"item-warning",children:["⚠️ ",se]})]})]},F.id)})})]},z.id))]},x.id))}),R.jsxs("div",{className:"confirmation-actions",children:[R.jsx("button",{type:"button",onClick:o,className:"back-button",children:"修正する"}),R.jsx("button",{type:"button",onClick:T,className:"submit-button",disabled:f,children:f?"送信中...":"この内容で送信する"})]}),g&&R.jsx("div",{className:"confirm-dialog-overlay",children:R.jsxs("div",{className:"confirm-dialog",children:[R.jsx("h4",{children:"確認"}),R.jsx("p",{children:"入力内容に警告が含まれています。本当にこの内容で送信しますか？"}),R.jsxs("div",{className:"dialog-actions",children:[R.jsx("button",{onClick:()=>p(!1),children:"キャンセル"}),R.jsx("button",{onClick:A,className:"confirm-button",children:"はい、送信します"})]})]})})]})},nA=()=>{const{currentUser:i}=Ru(),{formStructure:e,loading:n}=yM(),[s,o]=U.useState(null),[u,f]=U.useState(null),[m,g]=U.useState(!1),[p,_]=U.useState({}),[T,A]=U.useState({}),[x,z]=U.useState({}),[F,H]=U.useState({}),[ne,se]=U.useState(!1),[ie,he]=U.useState(!1),ue=()=>{_({}),H({}),A({}),z({}),se(!1),f(null),o(null),he(!1)};U.useEffect(()=>{if(n||e.length===0||Object.keys(p).length>0)return;const oe={},K={},te={};e.forEach(ce=>{ce.categories.forEach(Ee=>{Ee.items.forEach(D=>{oe[D.id]=D.type==="checkbox"?!1:"";let $="";const ae=oe[D.id];D.type==="number"&&ae.trim()===""?$="必須項目です。":D.type==="checkbox"&&ae===!1&&($="エラー詳細を入力してください。"),K[D.id]=$,te[D.id]=""})})}),_(oe),A(K),z(te)},[n,e,p]);const me=U.useCallback((oe,K,te)=>{let ce="",Ee="";if(oe.type==="number"){const D=K.trim();if(D==="")ce="必須項目です。";else{const $=parseFloat(D);if(isNaN($))ce="数値を入力してください。";else if(typeof oe.standardValue=="number"&&typeof oe.errorThreshold=="number"){const ae=oe.standardValue-oe.errorThreshold,re=oe.standardValue+oe.errorThreshold;($<ae||$>re)&&(Ee=`異常値です。(${ae} ~ ${re}の範囲)`)}}}else if(oe.type==="checkbox"){const D=te!==void 0?te:F[oe.id];K===!1&&(D?.trim()?Ee="異常が記録されています。":ce="エラー詳細を入力してください。")}A(D=>({...D,[oe.id]:ce})),z(D=>({...D,[oe.id]:Ee}))},[F]),O=(oe,K)=>{_(te=>({...te,[oe.id]:K})),me(oe,K)},w=(oe,K)=>{H(ce=>({...ce,[oe.id]:K}));const te=p[oe.id];oe.type==="checkbox"&&te===!1&&me(oe,te,K)},I=async()=>{if(!i){alert("ログインしていません。");return}g(!0);const oe={};e.forEach(ce=>{oe[ce.name]={},ce.categories.forEach(Ee=>{oe[ce.name][Ee.name]={},Ee.items.forEach(D=>{const $=p[D.id];D.type==="checkbox"?oe[ce.name][Ee.name][D.label]=$===!1?F[D.id]||"エラー":!0:oe[ce.name][Ee.name][D.label]=parseFloat($)||0})})});try{await Sf(Gi(Vt,"reports"),{submittedAt:J2(),submittedBy:{uid:i.uid,name:i.displayName||i.email},values:oe})}catch(ce){console.error("Firestoreへの保存に失敗しました:",ce),alert("データベースへの保存に失敗しました。"),g(!1);return}const K="https://script.google.com/macros/s/AKfycbxWDBfbzGqxeE9jgylxyB_cg8gN_qfcGE9k1w6syinw0-tgIQW47RS2A3q1YjApYBRe/exec",te={タイムスタンプ:new Date().toLocaleString("ja-JP"),担当者名:i.displayName||i.email||"不明",データ:oe};try{await fetch(K,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)}),alert("データが正常に送信されました。"),he(!0)}catch(ce){console.error("GASへの送信エラー:",ce),alert("スプレッドシートへの送信中にエラーが発生しました。")}finally{g(!1)}},V=oe=>oe.items.every(K=>p[K.id]!==void 0&&!T[K.id]),M=oe=>oe.items.some(K=>!!x[K.id]),P=()=>e.length>0&&e.every(oe=>oe.categories.every(V));if(n)return R.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"フォームを読み込んでいます..."});const C=e.find(oe=>oe.id===s),Ke=C?.categories.find(oe=>oe.id===u);return R.jsx("div",{className:"data-entry-form",children:ie?R.jsxs("div",{className:"completion-screen",children:[R.jsx("h2",{children:"本日の入力は行われました"}),R.jsx("p",{children:"もし、入力をし直す場合、このボタンを押してください"}),R.jsx("button",{onClick:ue,className:"submit-button",children:"再入力する"})]}):ne?R.jsx(EM,{formStructure:e,inputValues:p,details:F,warnings:x,onBack:()=>se(!1),onSubmit:I,isSubmitting:m}):R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"navigation-header",children:[C&&R.jsx("button",{className:"back-button-nav",onClick:()=>{f(null),o(null)},children:"← 場所選択に戻る"}),Ke&&R.jsx("button",{className:"back-button-nav",onClick:()=>f(null),children:"← 施設選択に戻る"})]}),C&&Ke?R.jsxs("div",{className:"form-section",children:[R.jsxs("h2",{children:[C.name," - ",Ke.name]}),Ke.items.map(oe=>R.jsx(vM,{item:oe,value:p[oe.id],error:T[oe.id],warning:x[oe.id],detail:F[oe.id],onValueChange:O,onDetailChange:w},oe.id))]}):C?R.jsxs("div",{className:"menu-section",children:[R.jsx("h2",{children:C.name}),R.jsx("p",{children:"施設を選択してください。"}),R.jsx("ul",{className:"menu-list",children:C.categories.map(oe=>R.jsxs("li",{onClick:()=>f(oe.id),children:[oe.name,V(oe)&&(M(oe)?R.jsx("span",{className:"completion-warning",children:"⚠️"}):R.jsx("span",{className:"completion-check",children:"✔"}))]},oe.id))})]}):R.jsxs("div",{className:"menu-section",children:[R.jsx("h2",{children:"場所を選択してください"}),R.jsx("ul",{className:"menu-list",children:e.map(oe=>{const K=oe.categories.every(V),te=oe.categories.some(M);return R.jsxs("li",{onClick:()=>o(oe.id),children:[oe.name,K&&(te?R.jsx("span",{className:"completion-warning",children:"⚠️"}):R.jsx("span",{className:"completion-check",children:"✔"}))]},oe.id)})})]}),P()&&!s&&R.jsx("div",{className:"submit-area",children:R.jsx("button",{onClick:()=>se(!0),className:"submit-button",children:"入力内容を確認して送信する"})})]})})},ib=({setActivePage:i})=>R.jsxs("div",{className:"dashboard-container",children:[R.jsx("h2",{children:"管理者メニュー"}),R.jsx("p",{children:"操作を選択してください。"}),R.jsxs("div",{className:"dashboard-buttons",children:[R.jsx("button",{className:"dashboard-button",onClick:()=>i("profile"),children:"プロフィール設定"}),R.jsx("button",{className:"dashboard-button",onClick:()=>i("form-management"),children:"フォーム管理"}),R.jsx("button",{className:"dashboard-button",onClick:()=>i("user-management"),children:"ユーザー管理"}),R.jsx("button",{className:"dashboard-button",onClick:()=>i("data-entry"),children:"データ入力"})]})]}),TM=()=>{const[i,e]=U.useState("dashboard"),n=()=>{switch(i){case"dashboard":return R.jsx(ib,{setActivePage:e});case"profile":return R.jsx(OS,{});case"form-management":return R.jsx(hM,{});case"user-management":return R.jsx(gM,{});case"data-entry":return R.jsx(nA,{});default:return R.jsx(ib,{setActivePage:e})}};return R.jsxs("div",{className:"page-content",style:{padding:"20px"},children:[i!=="dashboard"&&R.jsx("button",{onClick:()=>e("dashboard"),style:{display:"block",marginBottom:"20px",cursor:"pointer",background:"none",border:"none",color:"#007bff",fontWeight:"bold"},children:"← メニューに戻る"}),n()]})},rb=({setActivePage:i})=>R.jsxs("div",{className:"dashboard-container",children:[R.jsx("h2",{children:"メニュー"}),R.jsx("p",{children:"操作を選択してください。"}),R.jsxs("div",{className:"dashboard-buttons",children:[R.jsx("button",{className:"dashboard-button",onClick:()=>i("profile"),children:"プロフィール設定"}),R.jsx("button",{className:"dashboard-button",onClick:()=>i("data-entry"),children:"データ入力"})]})]}),bM=()=>{const[i,e]=U.useState("dashboard"),n=()=>{switch(i){case"dashboard":return R.jsx(rb,{setActivePage:e});case"profile":return R.jsx(OS,{});case"data-entry":return R.jsx(nA,{});default:return R.jsx(rb,{setActivePage:e})}};return R.jsxs("div",{className:"page-content",style:{padding:"20px"},children:[i!=="dashboard"&&R.jsx("button",{onClick:()=>e("dashboard"),style:{display:"block",marginBottom:"20px",cursor:"pointer",background:"none",border:"none",color:"#007bff",fontWeight:"bold"},children:"← メニューに戻る"}),n()]})};function SM(){const{currentUser:i,isAdmin:e,loading:n}=Ru();if(U.useEffect(()=>{document.body.className="light-mode"},[]),n)return R.jsx("div",{children:"読み込み中..."});const s=()=>i?e?R.jsx(TM,{}):R.jsx(bM,{}):R.jsx(wx,{});return R.jsxs("div",{className:"App",children:[R.jsx(Lw,{})," ",R.jsx("main",{className:"main-content",children:s()})]})}const AM=({children:i})=>{const[e,n]=U.useState(null),[s,o]=U.useState(!1),[u,f]=U.useState(!0);U.useEffect(()=>AI(bu,async _=>{if(n(_),_){const T=await _.getIdTokenResult();o(T.claims.admin===!0)}else o(!1);f(!1)}),[]);const g={currentUser:e,isAdmin:s,loading:u,logout:async()=>{try{await wI(bu)}catch(p){console.error("ログアウトエラー:",p)}}};return R.jsx(ob.Provider,{value:g,children:!u&&i})},sb=document.getElementById("root");sb?Pw.createRoot(sb).render(R.jsx(U.StrictMode,{children:R.jsx(AM,{children:R.jsx(SM,{})})})):console.error("Failed to find the root element");
